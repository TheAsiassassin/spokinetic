"use strict";var _Events,_get=function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:get(i,t,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0},_createClass=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function asap(e){setTimeout(e,0)}function noop(){}var LAST_ERROR=null,IS_ERROR={};function getThen(e){try{return e.then}catch(e){return LAST_ERROR=e,IS_ERROR}}function tryCallOne(e,t){try{return e(t)}catch(e){return LAST_ERROR=e,IS_ERROR}}function tryCallTwo(e,t,r){try{e(t,r)}catch(e){return LAST_ERROR=e,IS_ERROR}}function getStackTraceStack(){return global.tabris?global.tabris._stackTraceStack:[]}function setStackTraceStack(e){global.tabris&&(global.tabris._stackTraceStack=e)}function Promise(e){var t=[(new Error).stack].concat(getStackTraceStack());if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");Object.defineProperties(this,{_deferredState:{value:0,writable:!0},_state:{value:0,writable:!0},_value:{value:null,writable:!0},_stackTraceStack:{value:t,writable:!1},_deferreds:{value:null,writable:!0}}),e!==noop&&doResolve(e,this)}function safeThen(e,t,r){return new e.constructor(function(n,i){var o=new Promise(noop);o.then(n,i),handle(e,new Handler(t,r,o))})}function handle(e,t){for(;3===e._state;)e=e._value;if(Promise._onHandle&&Promise._onHandle(e),0===e._state)return 0===e._deferredState?(e._deferredState=1,void(e._deferreds=t)):1===e._deferredState?(e._deferredState=2,void(e._deferreds=[e._deferreds,t])):void e._deferreds.push(t);handleResolved(e,t)}function handleResolved(e,t){asap(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n=getStackTraceStack();setStackTraceStack(e._stackTraceStack);var i=tryCallOne(r,e._value);setStackTraceStack(n),i===IS_ERROR?reject(t.promise,LAST_ERROR):resolve(t.promise,i)}else 1===e._state?resolve(t.promise,e._value):reject(t.promise,e._value)})}function resolve(e,t){if(t===e)return reject(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=getThen(t);if(r===IS_ERROR)return reject(e,LAST_ERROR);if(r===e.then&&t instanceof Promise)return e._state=3,e._value=t,void finale(e);if("function"==typeof r)return void doResolve(r.bind(t),e)}e._state=1,e._value=t,finale(e)}function reject(e,t){e._state=2,e._value=t,Promise._onReject&&Promise._onReject(e,t),finale(e)}function finale(e){if(1===e._deferredState&&(handle(e,e._deferreds),e._deferreds=null),2===e._deferredState){for(var t=0;t<e._deferreds.length;t++)handle(e,e._deferreds[t]);e._deferreds=null}}function Handler(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function doResolve(e,t){var r=!1,n=tryCallTwo(e,function(e){r||(r=!0,resolve(t,e))},function(e){r||(r=!0,reject(t,e))});r||n!==IS_ERROR||(r=!0,reject(t,LAST_ERROR))}function valuePromise(e){var t=new Promise(Promise._noop);return t._state=1,t._value=e,t}function isPending(e){return 0===e._state}function isRejected(e){return 2===e._state}function getPromiseResult(e){return e._value}function assign(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n){var i=Object.keys(Object(n));for(var o of i){var a=Object.getOwnPropertyDescriptor(n,o);void 0!==a&&a.enumerable&&(t[o]=n[o])}}}return t}Promise._onHandle=null,Promise._onReject=null,Promise._noop=noop,Promise.prototype.then=function(e,t){if(this.constructor!==Promise)return safeThen(this,e,t);var r=new Promise(noop);return handle(this,new Handler(e,t,r)),r},Promise.resolve=function(e){if(e instanceof Promise)return e;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new Promise(t.bind(e))}catch(e){return new Promise(function(t,r){return r(e)})}return valuePromise(e)},Promise.all=function(e){var t=Array.prototype.slice.call(e);return new Promise(function(e,r){if(0===t.length)return e([]);var n=t.length;function res(i,o){if(o&&("object"==typeof o||"function"==typeof o)){if(o instanceof Promise&&o.then===Promise.prototype.then){for(;3===o._state;)o=o._value;return 1===o._state?res(i,o._value):(2===o._state&&r(o._value),void o.then(function(e){return res(i,e)},r))}var a=o.then;if("function"==typeof a)return void new Promise(a.bind(o)).then(function(e){return res(i,e)},r)}t[i]=o,0==--n&&e(t)}for(var i=0;i<t.length;i++)res(i,t[i])})},Promise.reject=function(e){return new Promise(function(t,r){return r(e)})},Promise.race=function(e){return new Promise(function(t,r){return e.forEach(function(e){return Promise.resolve(e).then(t,r)})})},Promise.prototype.catch=function(e){return this.then(null,e)},global.Promise=Promise,"undefined"==typeof window&&(global.window=global),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:assign});var equals$1=Symbol("equals"),creationAllowed=Symbol("creationAllowed"),bytes=Symbol("bytes"),nativeObject=Symbol("nativeObject"),toXML$1=Symbol("toXML"),notify=Symbol("notify"),data=Symbol("data"),listenersStore=Symbol("listenersStore");function pick(e,t){var r={};for(var n in e)t.includes(n)&&(r[n]=e[n]);return r}function omit(e,t){var r={};for(var n in e)t.includes(n)||(r[n]=e[n]);return r}function isObject(e){return null!==e&&"object"==typeof e}function capitalizeFirstChar(e){return e.charAt(0).toUpperCase()+e.slice(1)}function normalizePath(e){if("string"!=typeof e)throw new Error("must be a string");if(""===e)throw new Error("must not be empty");for(var t=e.startsWith("/")?"/":"",r=[],n=e.split("/"),i=0;i<n.length;i++){var o=n[i];if(".."===o){var a=r.pop();if(!a||"."===a)throw new Error('Path must not start with ".."')}else"."!==o&&""!==o&&r.push(o)}return r.length?t+r.join("/"):t||"."}function normalizePathUrl(e){if("string"!=typeof e)throw new Error("must be a string");var t=/^([a-z-]+:(\/\/)?)?(.*)/.exec(e),r=t[1]||"",n=t[3]||"";return"data:"===r?e:r+normalizePath(n)}function dirname(e){return e&&"."===e.slice(0,1)?e.slice(0,e.lastIndexOf("/")):"./"}function checkNumber(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-1/0,1/0],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=r?r+": ":"";if("number"!=typeof e||isNaN(e)||!isFinite(e))throw new Error(n+"Invalid number "+e);if(e<t[0]||e>t[1])throw new Error(n+"Number "+e+" out of range")}var traps={getPrototypeOf:!1,setPrototypeOf:!0,isExtensible:!1,preventExtensions:!1,getOwnPropertyDescriptor:!1,defineProperty:!0,has:!1,get:!1,set:!0,deleteProperty:!0,ownKeys:!1,apply:!1,construct:!1};function proxify(e){var t={};return Object.keys(traps).forEach(function(r){return t[r]=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=Reflect[r](e(),...i);return!!traps[r]||a}}),new Proxy({},t)}function isReadable(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)||!!getBytes(e)}function read(e){if(e instanceof ArrayBuffer)return e.slice(0);if(ArrayBuffer.isView(e))return e.buffer.slice(0);if(getBytes(e))return getBytes(e);throw new Error(typeof e+" is not an ArrayBuffer, Blob or typed")}function getBytes(e){return e[bytes]}function setBytes(e,t){return e[bytes]=t}function allowOnlyKeys(e,t){if("object"!=typeof e)throw new Error(toValueString(e)+" is not an object");for(var r in e)if(-1===t.indexOf(r))throw new Error(toValueString(e)+' contains unexpected entry "'+r+'"');return e}function allowOnlyValues(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Value";if(t&&-1===t.indexOf(e)){var n='"'+t.slice(0,-1).join('", "')+'" or "'+t.slice(-1)+'"';throw new Error(r+" must be "+n+'", got '+toValueString(e))}return e}function setNativeObject(e,t){e[nativeObject]=t}function getNativeObject(e){return e instanceof Object?e[nativeObject]:null}function createNativeCallback(e,t,r){var n=[(new Error).stack].concat(tabris._stackTraceStack);return function(){var i=tabris._stackTraceStack;tabris._stackTraceStack=n,e.apply(t||global,r||arguments),tabris.flush(),tabris._stackTraceStack=i}}function equals(e,t){if(e===t)return!0;if(e instanceof Object&&t instanceof Object&&e[equals$1]instanceof Function&&t[equals$1]instanceof Function&&e[equals$1]===t[equals$1])return e[equals$1](t);if(e instanceof Object&&e.constructor===Object&&t instanceof Object&&t.constructor===Object){var r=Reflect.ownKeys(e).sort(),n=Reflect.ownKeys(t).sort();return r.length===n.length&&r.every(function(r,i){var o=n[i];return r===o&&e[r]===t[o]})}return e instanceof Array&&e.constructor===Array&&t instanceof Array&&t.constructor===Array&&(e.length===t.length&&e.every(function(e,r){return e===t[r]}))}var androidStackLineRegex=/^ +at +(.+) +\((.*):([0-9]+):([0-9]+)\)/,androidStackLineNoNameRegex=/^ +at +(.*):([0-9]+):([0-9]+)/,iosStackLineRegex=/^(.+)@(.*):([0-9]+):([0-9]+)/,iosStackLineNoNameRegex=/(.*):([0-9]+):([0-9]+)/,urlBaseRegEx=/^[a-z]+:\/\/[^/]+\//;function getStackTrace(e){try{return getStackArray(e).join("\n")}catch(r){var t=r&&r.constructor&&r.message?r.constructor.name+": "+r.message:"";return warn("Could not process stack trace ("+(t||r)+"), printing original."),e.stack}}function patchError(e){e.prototype.toString=function(){return formatError(this)}}function formatError(e){var t=void 0;try{if(!(e instanceof Object))return""+e;if(!(e instanceof Error))return e.constructor.name+": "+e.toString();t=getStackArray(e).map(function(e){return"  at "+e}).join("\n")}catch(r){t=e.stack}return e.constructor.name+": "+e.message+"\n"+t}function getCurrentLine(e){try{return getStackArray(e)[0].trim()}catch(e){return""}}function getStackArray(e){var t=limitStack([e.stack].concat(tabris._stackTraceStack).join("\n").split("\n").filter(filterStackLine)).map(normalizeStackLine).filter(function(e){return!!e});if(!t.length)throw new Error("Empty stacktrace");return t}function limitStack(e){if(e.length>300){var t=e.length-300;return e.slice(0,150).concat(["["+t+" more lines...]"]).concat(e.slice(-150))}return e}function filterStackLine(e){return!("Android"===tabris.device.platform&&!androidStackLineNoNameRegex.test(e))&&(-1===e.indexOf("tabris/tabris.min.js:")&&-1===e.indexOf("@[native code]")&&-1===e.indexOf("<anonymous>:"))}function normalizeStackLine(e){if(e.endsWith("more lines...]"))return e;var t=applySourceMap(parseLine(e));return t?t.fn?t.fn+" ("+t.url+":"+t.line+":"+t.column+")":t.url+":"+t.line+":"+t.column:null}function parseLine(e){var t="Android"===tabris.device.platform?androidStackLineRegex:iosStackLineRegex,r="Android"===tabris.device.platform?androidStackLineNoNameRegex:iosStackLineNoNameRegex,n=e.match(t),i=e.match(r);if(n&&5===n.length){var[,o,a,s,l]=n;return{fn:normalizeFunctionName(o),url:fixUrl(a),line:parseInt(s,10),column:parseInt(l,10)}}if(i&&4===i.length){var[,u,c,h]=i;return{fn:null,url:fixUrl(u),line:parseInt(c,10),column:parseInt(h,10)}}return null}function normalizeFunctionName(e){var t=e.split(".").pop();return"then"!==t&&"<anonymous>"!==t||(t=null),t}function fixUrl(e){var t=e.match(urlBaseRegEx);return t?"./"+e.slice(t[0].length):e}function applySourceMap(e){if(!e)return null;var{fn:t}=e,{url:r,line:n,column:i}=e,o=tabris.Module.getSourceMap(r);if(o){o.decodedMappings||(o.decodedMappings=decodeMappings(o.mappings));var a=findMapping(o.decodedMappings,n,i);if(!(a&&a.length>=4))return null;var[s,l,u,c]=a;r="./"+normalizePath(dirname(r)+"/"+o.sources[l]),n=u+1,i+=c-s}return{fn:t,url:r,line:n,column:i}}function findMapping(e,t,r){var n=e?e[t-1]:null;return n&&n.length?n.find(function(e,t){if(!e)return!1;var i=n[t+1],o=e[0]+1,a=i?i[0]+1:1/0;return 0===t&&r<o||r>=o&&r<a}):null}var charToInteger={};function decodeMappings(e){var t=0,r=0,n=0,i=0;return e.split(";").map(function(e){return e.split(",").map(decodeVLQ)}).map(function(e){var o=0;return e.map(function(e){if(0===e.length)return null;var a=[o+=e[0]];return 1===e.length?a:(t+=e[1],r+=e[2],n+=e[3],a.push(t,r,n),5===e.length&&(i+=e[4],a.push(i)),a)})})}function decodeVLQ(e){for(var t=[],r=0,n=0,i=0;i<e.length;i++){var o=charToInteger[e[i]];if(void 0===o)throw new Error("Invalid character ("+e[i]+")");var a=32&o;if(n+=(o&=31)<<r,a)r+=5;else{var s=1&n;n>>=1,t.push(s?-n:n),n=r=0}}return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(e,t){charToInteger[e]=t});var numbersOnlyRE=/^\d+$/,objectHasOwnProperty=Object.prototype.hasOwnProperty,propertyIsEnumerable=Object.prototype.propertyIsEnumerable,regExpToString=RegExp.prototype.toString,dateToISOString=Date.prototype.toISOString,CIRCULAR_ERROR_MESSAGE=void 0;function tryStringify(e){try{return JSON.stringify(e)}catch(e){if(!CIRCULAR_ERROR_MESSAGE)try{var t={};t.a=t,JSON.stringify(t)}catch(e){CIRCULAR_ERROR_MESSAGE=e.message}if("TypeError"===e.name&&e.message===CIRCULAR_ERROR_MESSAGE)return"[Circular]";throw e}}function format(e){if("string"!=typeof e){for(var t=new Array(arguments.length),r=0;r<arguments.length;r++)t[r]=inspect(arguments[r]);return t.join(" ")}if(1===arguments.length)return e;for(var n="",i=1,o=0,a=0;a<e.length;)if(37===e.charCodeAt(a)&&a+1<e.length){if(37!==e.charCodeAt(a+1)&&i>=arguments.length){++a;continue}switch(e.charCodeAt(a+1)){case 100:o<a&&(n+=e.slice(o,a)),n+=Number(arguments[i++]);break;case 105:o<a&&(n+=e.slice(o,a)),n+=parseInt(arguments[i++]);break;case 102:o<a&&(n+=e.slice(o,a)),n+=parseFloat(arguments[i++]);break;case 106:o<a&&(n+=e.slice(o,a)),n+=tryStringify(arguments[i++]);break;case 115:o<a&&(n+=e.slice(o,a)),n+=String(arguments[i++]);break;case 37:o<a&&(n+=e.slice(o,a)),n+="%";break;default:o<a&&(n+=e.slice(o,a)),n+="%",o=a+=1;continue}o=a+=2}else++a;for(0===o?n=e:o<e.length&&(n+=e.slice(o));i<arguments.length;){var s=arguments[i++];n+=null===s||"object"!=typeof s&&"symbol"!=typeof s?" "+s:" "+inspect(s)}return n}function inspect(e){return formatValue({seen:[],breakLength:60,maxArrayLength:20},e,2)}function arrayToHash(e){for(var t=Object.create(null),r=0;r<e.length;r++){t[e[r]]=!0}return t}function formatValue(e,t,r){var n=formatPrimitive(e,t);if(n)return n;var i=Object.keys(t),o=arrayToHash(i),a=Object.getOwnPropertySymbols(t).filter(function(e){return propertyIsEnumerable.call(t,e)});i=i.concat(a);var s=t;try{isDate(t)||(s=t.valueOf())}catch(e){}"string"==typeof s&&(i=i.filter(function(e){return"symbol"==typeof e||!(e>=0&&e<s.length)})),isError(t)&&"iOS"===tabris.device.platform&&(i=i.filter(function(e){return!["line","column","sourceURL"].includes(e)}));var l=getConstructorOf(t);if(0===i.length){if("function"==typeof t)return"["+(l?l.name:"Function")+(t.name?": "+t.name:"")+"]";if(isRegExp(t))return regExpToString.call(t);if(isDate(t))return Number.isNaN(t.getTime())?t.toString():dateToISOString.call(t);if(isError(t))return formatError(t);if("string"==typeof s)return"[String: "+formatPrimitive(e,s)+"]";if("symbol"==typeof s)return"[Symbol: "+formatPrimitive(e,s)+"]";if("number"==typeof s)return"[Number: "+formatPrimitive(e,s)+"]";if("boolean"==typeof s)return"[Boolean: "+formatPrimitive(e,s)+"]"}var u="",c=!1,h=formatObject,f=void 0;if(Array.isArray(t))l&&"Array"===l.name&&(l=null),f=["[","]"],c=0===t.length,h=formatArray;else if(isArrayBuffer(t))f=["{","}"],i.unshift("byteLength"),o.byteLength=!0;else if(isTypedArray(t))f=["[","]"],h=formatTypedArray;else if(isPromise(t))f=["{","}"],h=formatPromise;else{try{if(t instanceof Object&&t.toString!==Object.prototype.toString){var p=t.toString();if("string"==typeof p)return p}}catch(e){}l&&"Object"===l.name&&(l=null),f=["{","}"],c=!0}(c=!0===c&&0===i.length,"function"==typeof t)&&(u=" ["+(l?l.name:"Function")+(t.name?": "+t.name:"")+"]");if(isRegExp(t)&&(u=" "+regExpToString.call(t)),isDate(t)&&(u=" "+dateToISOString.call(t)),isError(t))return formatError(t);if("string"==typeof s&&(u=" [String: "+formatPrimitive(e,s)+"]"),"number"==typeof s&&(u=" [Number: "+formatPrimitive(e,s)+"]"),"boolean"==typeof s&&(u=" [Boolean: "+formatPrimitive(e,s)+"]"),""===u&&l&&(f[0]=l.name+" "+f[0]),!0===c)return""+f[0]+u+f[1];if(r<0)return isRegExp(t)?regExpToString.call(t):Array.isArray(t)?"[Array]":"[Object]";e.seen.push(t);var d=h(e,t,r,o,i);return e.seen.pop(),reduceToSingleString(d,u,f,e.breakLength)}function formatNumber(e,t){return Object.is(t,-0)?"-0":""+t}function formatPrimitive(e,t){if(void 0===t)return"undefined";if(null===t)return"null";var r=typeof t;return"string"===r?"'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'":"number"===r?formatNumber(e,t):"boolean"===r?""+t:"symbol"===r?t.toString():void 0}function formatObject(e,t,r,n,i){return i.map(function(i){return formatProperty(e,t,r,n,i,!1)})}function formatArray(e,t,r,n,i){for(var o=[],a=0,s=0;s<t.length&&a<e.maxArrayLength;){for(var l=0;s<t.length&&!hasOwnProperty(t,String(s));)l++,s++;if(l>0){var u="<"+l+" empty item"+(l>1?"s":"")+">";o.push(u)}else o.push(formatProperty(e,t,r,n,String(s),!0)),s++;a++}var c=t.length-s;c>0&&o.push("... "+c+" more item"+(c>1?"s":""));for(var h=0;h<i.length;h++){var f=i[h];"symbol"!=typeof f&&numbersOnlyRE.test(f)||o.push(formatProperty(e,t,r,n,f,!0))}return o}function formatTypedArray(e,t,r,n,i){for(var o=Math.min(Math.max(0,e.maxArrayLength),t.length),a=t.length-o,s=new Array(o),l=0;l<o;++l)s[l]=formatNumber(e,t[l]);for(var u of(a>0&&s.push("... "+a+" more item"+(a>1?"s":"")),i))"symbol"!=typeof u&&numbersOnlyRE.test(u)||s.push(formatProperty(e,t,r,n,u,!0));return s}function formatPromise(e,t,r,n,i){var o=[];if(isPending(t))o.push("<pending>");else{var a=null===r?null:r-1,s=formatValue(e,getPromiseResult(t),a);isRejected(t)?o.push("<rejected> "+s):o.push(s)}for(var l=0;l<i.length;l++)o.push(formatProperty(e,t,r,n,i[l],!1));return o}function formatProperty(e,t,r,n,i,o){var a=void 0,s=void 0,l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(l.get?s=l.set?"[Getter/Setter]":"[Getter]":l.set&&(s="[Setter]"),hasOwnProperty(n,i)||(a="symbol"==typeof i?"["+i.toString()+"]":"["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=formatValue(e,l.value,null===r?null:r-1)).indexOf("\n")>-1&&(s=o?s.replace(/\n/g,"\n  "):s.replace(/^|\n/g,"\n   ")):s="[Circular]"),void 0===a){if(o&&numbersOnlyRE.test(i))return s;a=JSON.stringify(""+i),a=/^"[a-zA-Z_][a-zA-Z_0-9]*"$/.test(a)?a.substr(1,a.length-2):a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/^"|"$/g,"'").replace(/\\\\/g,"\\")}return a+": "+s}function reduceToSingleString(e,t,r,n){return e.reduce(function(e,t){return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>n?r[0]+(""===t&&1===r[0].length?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:""+r[0]+t+" "+e.join(", ")+" "+r[1]}function hasOwnProperty(e,t){return objectHasOwnProperty.call(e,t)}function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error}function isDate(e){return"[object Date]"===objectToString(e)||e instanceof Date}function isPromise(e){return"[object Promise]"===objectToString(e)||e instanceof Promise}function isRegExp(e){return"[object RegExp]"===objectToString(e)||e instanceof RegExp}var typedArrayTypes=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array"],typedArrayNames={};for(var type of typedArrayTypes)typedArrayNames["[object "+type+"]"]=!0;function isTypedArray(e){return typedArrayNames[objectToString(e)]}function isArrayBuffer(e){return"[object ArrayBuffer]"===objectToString(e)||e instanceof ArrayBuffer}function getConstructorOf(e){for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value;e=Object.getPrototypeOf(e)}return null}function objectToString(e){return Object.prototype.toString.call(e)}var toXML$$1=toXML$1,Console=function(){function Console(){_classCallCheck(this,Console),this._registerPrintMethods(arguments[0]),Object.defineProperties(this,{_prefixSpaces:{enumerable:!1,writable:!0,value:0},_count:{enumerable:!1,writable:!1,value:{}}})}return _createClass(Console,[{key:"trace",value:function trace(){this.log(getStackTrace(new Error("StackTrace")))}},{key:"assert",value:function assert(e){if(!e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r[0]="Assertion failed"+(0===r.length?"":": "+r[0]),this.error(...r)}}},{key:"count",value:function count(e){e=e||"default",this._count[e]||(this._count[e]=0),this.log("%s: %s",e,++this._count[e])}},{key:"countReset",value:function countReset(e){e=e||"default",this.log("%s: %s",e,this._count[e]=0)}},{key:"dirxml",value:function dirxml(e){e&&e[toXML$$1]instanceof Function?this.log(e[toXML$$1]()):this.log(e)}},{key:"group",value:function group(){this.log(...arguments),this._prefixSpaces+=2}},{key:"groupEnd",value:function groupEnd(){this._prefixSpaces>0&&(this._prefixSpaces-=2)}},{key:"debug",value:function debug(){this._console.debug(...arguments)}},{key:"info",value:function info(){this._console.info(...arguments)}},{key:"log",value:function log(){this._console.log(...arguments)}},{key:"warn",value:function warn(){this._console.warn(...arguments)}},{key:"error",value:function error(){this._console.error(...arguments)}},{key:"_registerPrintMethods",value:function _registerPrintMethods(e){var t=this;Object.defineProperty(this,"_console",{enumerable:!1,writable:!1,value:{}});var r=function(r){t._console[r]=function(){var n=t._prepareOutput(...arguments);tabris.trigger("log",{level:r,message:n}),e.print(r,n)}};for(var n of["debug","info","log","warn","error"])r(n)}},{key:"_prepareOutput",value:function _prepareOutput(){var e=format(...arguments);return this._prefixSpaces>0&&(e=""+" ".repeat(this._prefixSpaces)+e),e}}]),Console}();function createConsole(e){return new Console(e)}var defaultConsole=global.console.print?createConsole(global.console):global.console;defaultConsole.debug||(defaultConsole.debug=function(){defaultConsole.log(...arguments)});var log=function(){defaultConsole.log(...arguments)},warn=function(){defaultConsole.warn(...arguments)},error=function(){defaultConsole.error(...arguments)},inHint=!1,toValueString=function(e){try{if(e instanceof Array||e&&e._array instanceof Array){var t="["+(e instanceof Array?e:e._array).map(toValueString).join(", ")+"]";if(t.length<=40)return t}if("string"==typeof e){var r=e.slice(0,40).replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n");return e.length>40?'"'+r+'..."':'"'+r+'"'}if(e&&e[toXML$$1])return e._disposedToStringValue||e.toString();if(e&&e instanceof Function)return e.name;if(e&&e.constructor===Object){var n=JSON.stringify(e);if(n.length<=40)return n}return e instanceof Object&&e.constructor instanceof Function?e.constructor.name:e+""}catch(e){return"[unknown]"}},hint=function(e,t){if(!inHint){inHint=!0;var r,n="";r=getCurrentLine(new Error),e&&"string"==typeof e?n=e+": ":e&&(n=toValueString(e)+": "),defaultConsole.warn(n+t+(r?"\nSource: "+r:"")),inHint=!1}};function checkVersion(e,t){if(t){var r=e.split("."),n=t.split(".");r[0]===n[0]&&r[1]===n[1]||error('Version mismatch: JavaScript module "tabris" (version '+e+") is incompatible with the native tabris platform (version "+t+").")}}var EventObject=function(){function EventObject(){var e=this;_classCallCheck(this,EventObject),Object.defineProperties(this,{type:{enumerable:!0,get:function(){return e.$type}},target:{enumerable:!0,get:function(){return e.$target}},timeStamp:{enumerable:!0,value:Date.now()},$type:{enumerable:!1,writable:!0,value:""},$target:{enumerable:!1,writable:!0,value:null},$defaultPrevented:{enumerable:!1,writable:!0,value:!1}})}return _createClass(EventObject,[{key:"preventDefault",value:function preventDefault(){this.$defaultPrevented=!0}},{key:"toString",value:function toString(){var e=this;return this.constructor.name+" { "+Object.keys(this).map(function(t){return t+": "+("string"==typeof e[t]?JSON.stringify(e[t]):format(e[t]))}).join(", ")+" }"}},{key:"_initEvent",value:function _initEvent(e,t){if(arguments.length<2)throw new Error("Not enough arguments to initEvent");this.$type=e,this.$target=t}},{key:"defaultPrevented",get:function(){return!!this.$defaultPrevented}}]),EventObject}();Object.defineProperty(EventObject.prototype,"type",{value:""}),Object.defineProperty(EventObject.prototype,"target",{value:null}),Object.defineProperty(EventObject.prototype,"timeStamp",{value:0});var Events=(_defineProperty(_Events={on:function(e,t,r){if(isObject(e)){for(var n in e)this.on(n,e[n]);return this}if("string"!=typeof e)throw new Error(toValueString(e)+" is not a string");if(!(t instanceof Function))throw new Error(toValueString(t)+" is not a function");if(r&&!(r instanceof Object))throw new Error(toValueString(r)+" is not an object");this._isDisposed&&hint(this,'Event registration warning: Can not listen for event "'+e+'" on disposed object');var i=this._isListening(e);return this._callbacks||Object.defineProperty(this,"_callbacks",{enumerable:!1,writable:!1,configurable:!0,value:[]}),this._callbacks[e]=(this._callbacks[e]||[]).concat(),this._callbacks[e].some(function(e){return(e.fn===t||"_callback"in t&&e.fn._callback===t._callback)&&e.ctx===r})||this._callbacks[e].push({fn:t,ctx:r}),i||this._listen(e,!0),this},off:function(e,t,r){if(isObject(e)){for(var n in e)this.off(n,e[n]);return this}if(!e||!t)throw new Error("Not enough arguments");if(this._callbacks&&e in this._callbacks){for(var i=this._callbacks[e].concat(),o=i.length-1;o>=0;o--)i[o].fn!==t&&i[o].fn._callback!==t||i[o].ctx!==r||i.splice(o,1);0===i.length?(delete this._callbacks[e],0===Object.keys(this._callbacks).length&&delete this._callbacks):this._callbacks[e]=i}return this._isListening(e)||this._listen(e,!1),this},once:function(e,t,r){if(isObject(e)){for(var n in e)this.once(n,e[n]);return this}var i=this,o=function(){i._isDisposed||i.off(e,o,r),t.apply(this,arguments)};return o._callback=t,this.on(e,o,r)},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this[notify](e,t,!1)},triggerAsync:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this[notify](e,t,!0)}},notify,function(e,t,r){var n=this,i=[];return this._isDisposed?hint(this,'Trigger warning: Can not dispatch event "'+e+'" on disposed object'):this._callbacks&&e in this._callbacks&&function(){var r=t instanceof EventObject&&!t.type?t:new EventObject,o=n.$eventTarget||n;if(t&&t!==r){var a=omit(t,["type","target","timeStamp"]);Object.assign(r,a)}for(var s of(r._initEvent instanceof Function&&r._initEvent(e,o),n._callbacks[e])){var l=s.fn.call(s.ctx||n,r);l instanceof Promise&&l.catch(function(t){return console.error("Listener for "+o.constructor.name+' event "'+e+'" rejected with '+(t.stack||t))}),i.push(l)}}(),r?Promise.all(i).then(function(){return n}):this}),_defineProperty(_Events,"_isListening",function(e){return!!this._callbacks&&(!e||e in this._callbacks)}),_defineProperty(_Events,"_listen",function(e,t){}),_Events),DELEGATE_FIELDS=["promise","addListener","removeListener","once","trigger","triggerAsync"],Listeners=function(){function Listeners(e,t){if(_classCallCheck(this,Listeners),arguments.length<1)throw new Error("Missing target instance");if(!(e instanceof Object))throw new Error("Target "+toValueString(e)+" is not an object");if(arguments.length<2||!t)throw new Error("Missing event type string");if("string"!=typeof t)throw new Error("Event type "+toValueString(t)+" is not a string");if(/^on[A-Z]/.test(t))throw new Error('Invalid event type string, did you mean "'+(t[2].toLowerCase()+t.slice(3))+'"?');this.store=Listeners.getListenerStore(e);var r=this.addListener.bind(this);for(var n of(r.target=this.target=e,r.type=this.type=t,r.original=this.original,DELEGATE_FIELDS))r[n]=this[n]=this[n].bind(this);return r}return _createClass(Listeners,null,[{key:"getListenerStore",value:function getListenerStore(e){return e.on instanceof Function?e:(e[listenersStore]||(e[listenersStore]=Object.assign({$eventTarget:e},Events)),e[listenersStore])}}]),_createClass(Listeners,[{key:"trigger",value:function trigger(e){return this.store.trigger(this.type,e),this.target}},{key:"triggerAsync",value:function triggerAsync(e){var t=this;return this.store.triggerAsync(this.type,e).then(function(){return t.target})}},{key:"promise",value:function promise(){var e=this;return new Promise(function(t){return e.once(t)})}},{key:"once",value:function once(e){return this.store.once(this.type,e),this.target}},{key:"addListener",value:function addListener(e){return this.store.on(this.type,e),this.target}},{key:"removeListener",value:function removeListener(e){return this.store.off(this.type,e),this.target}},{key:"original",get:function(){return this}}]),Listeners}(),ChangeListeners=function(e){function ChangeListeners(e,t){return _classCallCheck(this,ChangeListeners),propertyCheck(e,t),_possibleConstructorReturn(this,(ChangeListeners.__proto__||Object.getPrototypeOf(ChangeListeners)).call(this,e,t+"Changed"))}return _inherits(ChangeListeners,Listeners),_createClass(ChangeListeners,[{key:"trigger",value:function trigger(e){if(!("value"in e))throw new Error('Can not trigger change event without "value" property in event data');_get(ChangeListeners.prototype.__proto__||Object.getPrototypeOf(ChangeListeners.prototype),"trigger",this).call(this,e)}}]),ChangeListeners}();function propertyCheck(e,t){if(!(t in e))throw new Error('Target has no property "'+t+'"')}var MARKUP={br:{},b:{children:"object"},span:{children:"object"},big:{children:"object"},i:{children:"object"},small:{children:"object"},strong:{children:"object"},ins:{children:"object"},del:{children:"object"},a:{href:"string",children:"object"}};function createJsxProcessor(){return new JsxProcessor}var JsxProcessor=function(){function JsxProcessor(){_classCallCheck(this,JsxProcessor)}return _createClass(JsxProcessor,[{key:"createElement",value:function createElement(e,t){if(!(e instanceof Function)&&"string"!=typeof e)throw new Error("JSX: Unsupported type "+toValueString(e));for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(t&&t.children&&n&&n.length)throw new Error("JSX: Children for type "+e.name+" given twice.");var o=(n&&n.length?n:null)||(t&&t.children&&t.children.length?t.children:null),a=Object.assign({},t||{});return o&&o.length?a.children=o:delete a.children,"string"==typeof e?this.createIntrinsicElement(e,a):e.prototype&&e.prototype[JSX.jsxFactory]?this.createCustomComponent(e,a):this.createFunctionalComponent(e,a)}},{key:"createCustomComponent",value:function createCustomComponent(e,t){return e.prototype[JSX.jsxFactory].call(this,e,t)}},{key:"createFunctionalComponent",value:function createFunctionalComponent(e,t){try{var r=e.call(this,t);return e[JSX.jsxType]=!0,r instanceof Object&&(r[JSX.jsxType]=e),r}catch(e){throw new Error('JSX: "'+e.message+'" '+getCurrentLine(e))}}},{key:"createIntrinsicElement",value:function createIntrinsicElement(e,t){if(e in MARKUP){Object.keys(t||{}).forEach(function(r){var n=typeof t[r];if(n!==MARKUP[e][r])throw"children"===r?new Error("Element "+e+" can not have children"):new Error("Element "+e+" does not a support attribute "+r+" of type "+n)});var r=joinTextContent(t.children,!0),n=[e].concat(Object.keys(t||{}).filter(function(e){return"children"!==e}).map(function(e){return e+"='"+t[e]+"'"})).join(" ");return r?"<"+n+">"+r+"</"+e+">":"<"+n+"/>"}throw new Error("JSX: Unsupported type "+e)}},{key:"createNativeObject",value:function createNativeObject(e,t){if(t&&"children"in t)throw new Error("JSX: "+e.name+" can not have children");var r=new e(this.withoutListeners(t||{}));return this.registerListeners(r,t),r}},{key:"getChildren",value:function getChildren(e){return e&&"children"in e?normalizeChildren(e.children):null}},{key:"withoutChildren",value:function withoutChildren(e){return omit(e,["children"])}},{key:"withoutListeners",value:function withoutListeners(e){return omit(e,Object.keys(e).filter(this.isEventAttribute))}},{key:"registerListeners",value:function registerListeners(e,t){Listeners.getListenerStore(e).on(this.getListeners(t))}},{key:"withContentText",value:function withContentText(e,t,r,n){if(e&&e[r]&&t&&t.length)throw new Error("JSX: "+r+" given twice");var i=e&&e[r]?e[r].toString():joinTextContent(t||[],n);return Object.assign(e||{},i?_defineProperty({},r,i):{})}},{key:"withContentChildren",value:function withContentChildren(e,t,r){if(e&&e[r]&&t&&t.length)throw new Error("JSX: "+r+" given twice");var n=e&&e[r]?e[r]:t||[];return Object.assign(e||{},n?_defineProperty({},r,n):{})}},{key:"withShorthands",value:function withShorthands(e,t,r){var n=Object.keys(t),i=n.filter(function(t){return t in e});if(!i.length)return e;var o=omit(e,n);return i.forEach(function(e){var n=t[e];o[n]=n in o?r(o[n],e):e}),o}},{key:"getListeners",value:function getListeners(e){var t={};for(var r in e){if(this.isEventAttribute(r))t[r[2].toLocaleLowerCase()+r.slice(3)]=e[r]}return t}},{key:"isEventAttribute",value:function isEventAttribute(e){return e.startsWith("on")&&e.charCodeAt(2)<=90}}]),JsxProcessor}();function normalizeChildren(e){if(e instanceof Array){var t=[];for(var r of e)r&&r.toArray?t=t.concat(normalizeChildren(r.toArray())):r instanceof Array?t=t.concat(normalizeChildren(r)):t.push(r);return t}return[e]}function joinTextContent(e,t){return e?t?e.map(function(e){return e+""}).join("").replace(/\s+/g," ").replace(/\s*<br\s*\/>\s*/g,"<br/>"):e.join(""):null}var JSX={jsxFactory:Symbol("jsxFactory"),jsxType:Symbol("jsxType"),install:function(e){this.processor=e},createElement:function(){return this.processor.createElement.apply(this.processor,arguments)}};function select(e,t,r,n){if(!e||0===e.length)return[];if("*"===t&&!r)return e.concat();var i=getFilter(t,n);return r?deepSelect([],e,i):e.filter(i)}function createSelectorArray(e,t){if(!e)return["*"];if(e instanceof Function)return[e];var r=e.split(">").map(function(e){return e.trim()}),n=r.indexOf(":host");return-1!==n&&(r[n]=t),r}function getSelectorSpecificity(e){return 100*e.filter(isIdSelector).length+10*e.filter(isClassSelector).length+e.filter(isTypeSelector).length}function isTypeSelector(e){return"*"!==e&&!isIdSelector(e)&&!isClassSelector(e)}function isClassSelector(e){return"."===e[0]||":"===e[0]}function isIdSelector(e){return"#"===e[0]}function deepSelect(e,t,r){for(var n of t){r(n)&&e.push(n);var i=n.children?n.children():null;i instanceof WidgetCollection&&i.length&&deepSelect(e,i,r)}return e}function getFilter(e,t){var r={},n=isFilter(e)?e:createMatcher(e,t);return function(e,i){return!r[e.cid]&&(!!n(e,i,t)&&(r[e.cid]=!0,!0))}}function createMatcher(e,t){var r=e;if(r instanceof Array){if(1!==r.length)return createChildMatcher(r,t);r=r[0]}if(r instanceof Function&&r[JSX.jsxType])return function(e){return e[JSX.jsxType]===r};if(r instanceof Function)return function(e){return e instanceof r};if(r instanceof NativeObject)return function(e){return e===r};if(-1!==r.indexOf(">"))return createChildMatcher(createSelectorArray(r,t.host),t);if("#"===r.charAt(0)){var n=r.slice(1);return function(e){return n===e.id}}if("."===r.charAt(0)){var i=r.slice(1);return function(e){return-1!==e.classList.indexOf(i)}}return"*"===r?function(){return!0}:function(e){return r===e.constructor.name||r===(!!e[JSX.jsxType]&&e[JSX.jsxType].name)}}function createChildMatcher(e,t){var r=e.map(function(e){return createMatcher(e,t)}).reverse();return function(e){for(var t=e,n=0;n<r.length;n++){if(!t||!r[n](t))return!1;t=t.parent()}return!0}}function isFilter(e){return e instanceof Function&&!isWidgetConstructor(e)&&!e[JSX.jsxType]}function isWidgetConstructor(e){for(var t=e.prototype;t;){if(t===NativeObject.prototype)return!0;t=Object.getPrototypeOf(t)}return!1}var WidgetCollection=function(){function WidgetCollection(e){var{selector:t,deep:r,origin:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,WidgetCollection),t&&!n)throw new Error("WidgetCollection can not be constructed with an selector but no origin");var i=e instanceof WidgetCollection?e.toArray():e;Object.defineProperty(this,"_host",{enumerable:!1,writable:!1,value:getHost(n)});var o=select(i,t||"*",r,n instanceof WidgetCollection?n:this);Object.defineProperty(this,"_array",{enumerable:!1,writable:!1,value:o});for(var a=0;a<o.length;a++)this[a]=o[a]}return _createClass(WidgetCollection,[{key:"first",value:function first(e){return e?this.filter(e).first():this._array[0]}},{key:"last",value:function last(e){return e?this.filter(e).last():this._array[this._array.length-1]}},{key:"only",value:function only(e){if(e)return this.filter(e).only();if(1!==this._array.length)throw new Error("Expected exactly one match, but found "+this.length);return this._array[0]}},{key:"toArray",value:function toArray(){return this._array.concat()}},{key:"forEach",value:function forEach(e){var t=this;this._array.forEach(function(r,n){return e(r,n,t)})}},{key:"map",value:function map(e){var t=this;return this._array.map(function(r,n){return e(r,n,t)})}},{key:"indexOf",value:function indexOf(e){return this._array.indexOf(e)}},{key:"slice",value:function slice(){return new WidgetCollection(this._array.slice.apply(this._array,arguments),{origin:this})}},{key:"concat",value:function concat(){var e=Array.prototype.map.call(arguments,function(e){return e instanceof WidgetCollection?e.toArray():e});return new WidgetCollection(this._array.concat.apply(this._array,e),{origin:this})}},{key:"includes",value:function includes(e){return-1!==this._array.indexOf(e)}},{key:"filter",value:function filter(e){return new WidgetCollection(this._array,{selector:e,origin:this})}},{key:"parent",value:function parent(){var e=[];for(var t of this._array){var parent=t.parent();parent&&-1===e.indexOf(parent)&&e.push(parent)}if(e.length)return new WidgetCollection(e,{origin:this})}},{key:"children",value:function children(e){var t=[];for(var r of this._array)r.children instanceof Function&&t.push.apply(t,r.children());return new WidgetCollection(t,{selector:e,origin:this})}},{key:"appendTo",value:function appendTo(e){e.append(this)}},{key:"set",value:function set(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._array.forEach(function(e){return e.set(...t)}),this}},{key:"on",value:function on(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._array.forEach(function(e){return e.on(...t)}),this}},{key:"off",value:function off(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._array.forEach(function(e){return e.off(...t)}),this}},{key:"once",value:function once(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._array.forEach(function(e){return e.once(...t)}),this}},{key:"trigger",value:function trigger(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._array.forEach(function(e){return e.trigger(...t)}),this}},{key:"animate",value:function animate(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this._array.forEach(function(e){return e.animate(...t)})}},{key:"dispose",value:function dispose(){this._array.forEach(function(e){return e.dispose()})}},{key:"detach",value:function detach(){this._array.forEach(function(e){return e.detach()})}},{key:"toString",value:function toString(){return this._array.length<4?"WidgetCollection { "+this._array.join(", ")+" }":"WidgetCollection {\n"+this._array.map(function(e){return"  "+e}).join(",\n")+"\n}"}},{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}}}}},{key:"length",get:function(){return this._array.length}},{key:"host",get:function(){return this._host}}]),WidgetCollection}();function createElement(e,t){if(Object.keys(this.withoutChildren(t)).length)throw new Error("JSX: WidgetCollection can not have attributes");return new e(this.getChildren(t)||[])}function getHost(e){return e instanceof WidgetCollection?e.host:e||null}function colorArrayToString(e){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+(3===e.length?1:Math.round(100*e[3]/255)/100)+")"}function colorStringToArray(e){if("transparent"===e)return[0,0,0,0];if(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?$/.test(e))return[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),""===RegExp.$4?255:parseInt(RegExp.$4,16)];if(/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])?$/.test(e))return[17*parseInt(RegExp.$1,16),17*parseInt(RegExp.$2,16),17*parseInt(RegExp.$3,16),""===RegExp.$4?255:17*parseInt(RegExp.$4,16)];if(/^rgb\s*\(\s*([+-]?[0-9]+)\s*,\s*([+-]?[0-9]+)\s*,\s*([+-]?[0-9]+)\s*\)$/.test(e))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),255];if(/^rgba\s*\(\s*([+-]?[0-9]+)\s*,\s*([+-]?[0-9]+)\s*,\s*([+-]?[0-9]+)\s*,\s*([+-]?([0-9]*\.)?[0-9]+)\s*\)$/.test(e))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),Math.round(255*Math.max(0,Math.min(1,parseFloat(RegExp.$4))))];if(e in NAMES){var t=NAMES[e];return[t[0],t[1],t[2],255]}throw new Error(toValueString(e)+" is not a valid color")}WidgetCollection.prototype[JSX.jsxFactory]=createElement;var NAMES={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:[0,0,0,0]},Color=function(){function Color(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;if(_classCallCheck(this,Color),arguments.length>4)throw new Error("Too many arguments");if(arguments.length<3)throw new Error("Not enough arguments");setChannel(this,"red",e),setChannel(this,"green",t),setChannel(this,"blue",r),setChannel(this,"alpha",n)}return _createClass(Color,null,[{key:"isColorValue",value:function isColorValue(e){return null==e||"initial"===e||Color.isValidColorValue(e)}},{key:"isValidColorValue",value:function isValidColorValue(e){try{return Color.from(e),!0}catch(e){return!1}}},{key:"from",value:function from(e){if(e instanceof Color)return e;if(e instanceof Array)return arrayToColorInstance(e);if(e instanceof Object)return colorLikeObjectToColorInstance(e);if("string"==typeof e)return arrayToColorInstance(colorStringToArray(e));throw new Error("Not a valid ColorValue: "+toValueString(e))}}]),_createClass(Color,[{key:"toString",value:function toString(){return 255===this.alpha?"rgb("+this.red+", "+this.green+", "+this.blue+")":"rgba("+this.red+", "+this.green+", "+this.blue+", "+Math.round(100*this.alpha/255)/100+")"}},{key:"toArray",value:function toArray(){return[this.red,this.green,this.blue,this.alpha]}},{key:"equals",value:function equals(e){return e instanceof Color&&(e.red===this.red&&e.green===this.green&&e.blue===this.blue&&e.alpha===this.alpha)}}]),Color}();function setChannel(e,t,r){checkNumber(r,[0,255],"Invalid color value "+toValueString(t)),Object.defineProperty(e,t,{enumerable:!0,value:Math.round(r)})}function colorLikeObjectToColorInstance(e){return checkProperty(e,"red"),checkProperty(e,"green"),checkProperty(e,"blue"),"alpha"in e?new Color(e.red,e.green,e.blue,e.alpha):new Color(e.red,e.green,e.blue)}function arrayToColorInstance(e){if(e.length<3)throw new Error("Color array too short");if(e.length>4)throw new Error("Color array too long");return new Color(e[0],e[1],e[2],4===e.length?e[3]:255)}function checkProperty(e,t){if(!(t in e))throw new Error("Color-like object missing "+t+" value")}Color.prototype[equals$1]=Color.prototype.equals,Object.keys(NAMES).forEach(function(e){var t=void 0;Object.defineProperty(Color,e,{get:function(){return t||(t=Color.from(NAMES[e])),t}})});var Image=function(){function Image(e){if(_classCallCheck(this,Image),arguments.length<1)throw new Error("Not enough arguments");checkConsistentDimensions(e),setSrc(this,e),setDimension(this,"width",hasExplicit(e,"width")?e.width:"auto"),setDimension(this,"height",hasExplicit(e,"height")?e.height:"auto"),setScale(this,e)}return _createClass(Image,null,[{key:"isImageValue",value:function isImageValue(e){return null==e||"initial"===e||Image.isValidImageValue(e)}},{key:"isValidImageValue",value:function isValidImageValue(e){try{return Image.from(e),!0}catch(e){return!1}}},{key:"from",value:function from(e){if(e instanceof Image){if(getNativeObject(e.src)&&getNativeObject(e.src).isDisposed())throw new Error("ImageBitmap is closed");return e}if("string"==typeof e||getNativeObject(e)||getBytes(e))return new Image({src:e});if(e instanceof Object)return hasInconsistentDimensions(e)?(hint(this===Image?"Image.from":this,'image "scale" is ignored when "width" and/or "height" are set to a number'),new Image(Object.assign({},e,{scale:"auto"}))):new Image(e);throw new Error(toValueString(e)+" is not a valid ImageValue")}}]),_createClass(Image,[{key:"equals",value:function equals(e){return e instanceof Image&&(e.src===this.src&&e.scale===this.scale&&e.width===this.width&&e.height===this.height)}}]),Image}();Image.prototype[equals$1]=Image.prototype.equals;var initDimension=0,initSrc="";function setScale(e,t){var r=hasExplicit(t,"scale")?t.scale:"auto";if(null==t.scale&&!hasExplicit(t,"width")&&!hasExplicit(t,"height")&&"string"==typeof t.src){var n=/@([0-9]\.?[0-9]*)x/.exec(t.src.split("/").pop());n&&n[1]&&(r=parseFloat(n[1]))}setDimension(e,"scale",r)}function hasExplicit(e,t){return t in e&&"auto"!==e[t]&&null!=e[t]}function setSrc(e,t){if(checkSrc(t),getNativeObject(t.src)||getBytes(t.src))Object.defineProperty(e,"src",{enumerable:!0,value:t.src});else{var r=void 0;try{r=normalizePathUrl(t.src)}catch(e){throw new Error('Invalid image "src": '+e.message)}Object.defineProperty(e,"src",{enumerable:!0,value:r})}}function checkSrc(e){if(!("src"in e))throw new Error('Image "src" missing');if(getNativeObject(e.src)){if(getNativeObject(e.src).isDisposed())throw new Error("ImageBitmap is closed")}else if("string"==typeof e.src){if(!e.src.length)throw new Error('Image "src" must not be empty')}else{if(!getBytes(e.src))throw new Error('Image "src" '+toValueString(e.src)+" must be a string, ImageBitmap or Blob");if(!e.src.size)throw new Error('Image "src" must not be empty')}}function checkConsistentDimensions(e){if(hasInconsistentDimensions(e))throw new Error('Image "scale" cannot be used with "width" and "height"')}function hasInconsistentDimensions(e){return hasExplicit(e,"scale")&&(hasExplicit(e,"width")||hasExplicit(e,"height"))}function setDimension(e,t,r){"auto"!==r&&checkNumber(r,[0,1/0],'Image "'+t+'" is not a dimension'),Object.defineProperty(e,t,{enumerable:!0,value:r})}Object.defineProperty(Image.prototype,"src",{value:initSrc}),Object.defineProperty(Image.prototype,"width",{value:initDimension}),Object.defineProperty(Image.prototype,"height",{value:initDimension}),Object.defineProperty(Image.prototype,"scale",{value:initDimension});var FONT_STYLES=["italic","normal"],FONT_WEIGHTS=["black","bold","medium","thin","light","normal"];function fontStringToObject(e){var t={family:[],size:0,style:"normal",weight:"normal"},r=e.split(/(?:\s|^)\d+px(?:\s|$)/);checkTruthy(2===r.length,"Invalid font syntax");var[n,i]=r;return t.size=parseInt(/(?:\s|^)(\d+)px(?:\s|$)/.exec(e)[1],10),parseSizePrefix(t,n),parseFamily(t,i),t}function fontObjectToString(e){return["normal"===e.style?"":e.style,"normal"===e.weight?"":e.weight,e.size+"px",e.family.join(", ")].filter(function(e){return!!e}).join(" ").trim()}function validateFamily(e){checkTruthy(/(?:^\s*[^"']+\s*$)|(?:^\s*"[^"']+"\s*$)|(?:^\s*'[^"']+'\s*$)/.exec(e),"Invalid font family: "+e)}function validateStyle(e){checkTruthy(isStyle(e),"Invalid font style "+e)}function validateWeight(e){checkTruthy(isWeight(e),"Invalid font weight "+e)}function normalizeFamily(e){return/^\s*["']?([^"']*)/.exec(e)[1].trim()}function normalizeWeight(e){return e.trim()}function normalizeStyle(e){return e.trim()}function parseSizePrefix(e,t){var r=t.trim().split(/\s+/);checkTruthy(r.length<=2,"Too many font size prefixes");var{style:n,weight:i}=parseSizePrefixes(r);e.style=n,e.weight=i}function parseSizePrefixes(e){if(1===e.length){var t=e[0];if(isStyle(t))return{weight:"normal",style:normalizeStyle(t)};if(isWeight(t))return{weight:normalizeWeight(t),style:"normal"};if("normal"===t||""===t)return{style:"normal",weight:"normal"};throw new Error("Invalid font style or weight "+t)}if(2===e.length)return validateStyle(e[0]),validateWeight(e[1]),{style:normalizeStyle(e[0]),weight:normalizeWeight(e[1])}}function isStyle(e){return"string"==typeof e&&FONT_STYLES.includes(e.trim())}function isWeight(e){return"string"==typeof e&&FONT_WEIGHTS.includes(e.trim())}function parseFamily(e,t){(t?t.split(","):[]).forEach(function(t){validateFamily(t),e.family.push(normalizeFamily(t))})}function checkTruthy(e,t){if(!e)throw new Error(t)}var Font=function(){function Font(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal";if(_classCallCheck(this,Font),arguments.length<1)throw new Error("Not enough arguments");setSize(this,e),setFamily(this,t),setWeight(this,r),setStyle(this,n)}return _createClass(Font,null,[{key:"isFontValue",value:function isFontValue(e){return null==e||"initial"===e||Font.isValidFontValue(e)}},{key:"isValidFontValue",value:function isValidFontValue(e){try{return Font.from(e),!0}catch(e){return!1}}},{key:"from",value:function from(e){if(e instanceof Font)return e;if(e instanceof Object)return fontLikeObjectToFontInstance(e);if("string"==typeof e)return fontLikeObjectToFontInstance(fontStringToObject(e));throw new Error(toValueString(e)+" is not a valid FontValue")}},{key:"sansSerif",get:function(){return"sans-serif"}},{key:"serif",get:function(){return"serif"}},{key:"monospace",get:function(){return"monospace"}},{key:"condensed",get:function(){return"condensed"}}]),_createClass(Font,[{key:"toString",value:function toString(){return fontObjectToString(this)}},{key:"equals",value:function equals(e){var t=this;return e instanceof Font&&(e.size===this.size&&e.weight===this.weight&&e.style===this.style&&e.family.length===this.family.length&&e.family.every(function(e,r){return t.family[r]===e}))}}]),Font}();function setFamily(e,t){t.forEach(validateFamily);var r=Object.freeze(t.map(normalizeFamily));Object.defineProperty(e,"family",{enumerable:!0,value:r})}function setSize(e,t){checkNumber(t,[0,1/0],"Invalid font size"),Object.defineProperty(e,"size",{enumerable:!0,value:t})}function setWeight(e,t){validateWeight(t),Object.defineProperty(e,"weight",{enumerable:!0,value:normalizeWeight(t)})}function setStyle(e,t){validateStyle(t),Object.defineProperty(e,"style",{enumerable:!0,value:normalizeStyle(t)})}function fontLikeObjectToFontInstance(e){return checkProperty$1(e,"size"),new Font(e.size,e.family||[],e.weight||"normal",e.style||"normal")}function checkProperty$1(e,t){if(!(t in e))throw new Error("Font-like object missing "+t+" value")}Font.prototype[equals$1]=Font.prototype.equals;var Percent=function(){function Percent(e){if(_classCallCheck(this,Percent),arguments.length<1)throw new Error("Not enough arguments");checkNumber(e,[-1/0,1/0],"Invalid Percent"),Object.defineProperty(this,"percent",{enumerable:!0,value:e})}return _createClass(Percent,null,[{key:"isValidPercentValue",value:function isValidPercentValue(e){try{return Percent.from(e),!0}catch(e){return!1}}},{key:"from",value:function from(e){if(e instanceof Percent)return e;if(e instanceof Object)return percentLikeObjectToPercentInstance(e);if("string"==typeof e)return checkPercentString(e),new Percent(percentNumberFromString(e));throw new Error(toValueString(e)+" is not a valid PercentValue")}}]),_createClass(Percent,[{key:"toString",value:function toString(){return this.percent+"%"}},{key:"valueOf",value:function valueOf(){return this.percent}}]),Percent}();function percentLikeObjectToPercentInstance(e){return checkProperty$3(e,"percent"),new Percent(e.percent)}function checkPercentString(e){if(!/%$/.test(e)||isNaN(percentNumberFromString(e)))throw new Error("Invalid percent string "+e+': It must be a number followed by "%".');checkNumber(percentNumberFromString(e),[-1/0,1/0],"Invalid percent string "+e)}function percentNumberFromString(e){return parseInt(e.replace(/%$/,""))}function checkProperty$3(e,t){if(!(t in e))throw new Error("Percent-like object missing "+t+" value")}var SIDES=["left","top","right","bottom"],LinearGradient=function(){function LinearGradient(e,t){if(_classCallCheck(this,LinearGradient),arguments.length<1)throw new Error("Not enough arguments");var r=180;arguments.length>1&&(checkNumber(t,[-1/0,1/0],"Invalid direction angle"),r=t),checkColorStops(e),Object.defineProperty(this,"colorStops",{enumerable:!0,value:Object.freeze(e)}),Object.defineProperty(this,"direction",{enumerable:!0,value:r})}return _createClass(LinearGradient,null,[{key:"isLinearGradientValue",value:function isLinearGradientValue(e){return null==e||"initial"===e||LinearGradient.isValidLinearGradientValue(e)}},{key:"isValidLinearGradientValue",value:function isValidLinearGradientValue(e){try{return LinearGradient.from(e),!0}catch(e){return!1}}},{key:"from",value:function from(e){if(e instanceof LinearGradient)return e;if(e instanceof Object)return gradientLikeObjectToGradientInstance(e);if("string"==typeof e)return gradientLikeObjectToGradientInstance(gradientStringToObject(e));throw new Error(toValueString(e)+" is not a valid LinearGradient")}}]),_createClass(LinearGradient,[{key:"toString",value:function toString(){return"linear-gradient("+(this.direction?this.direction+"deg, ":"")+this.colorStops.join(", ")+")"}},{key:"equals",value:function equals(e){var t=this;return e instanceof LinearGradient&&(e.direction===this.direction&&e.colorStops.length===this.colorStops.length&&e.colorStops.every(function(e,r){return equalColorStops(e,t.colorStops[r])}))}}]),LinearGradient}();function equalColorStops(e,t){return e instanceof Color&&t instanceof Color?e.equals(t):e instanceof Array&&t instanceof Array&&(e[0].equals(t[0])&&e[1].percent===t[1].percent)}function gradientStringToObject(e){var t=e.trim(),r={colorStops:[]};if(0!==t.indexOf("linear-gradient"))throw new Error("Argument "+toValueString(e)+" is not a valid linear gradient definition");if(0!==(t=t.substring(15).trim()).indexOf("(")&&t.lastIndexOf(")")!==t.length-1)throw new Error("Argument "+toValueString(e)+" is not a valid linear gradient definition");var n=(t=encodeRGBColors(t=t.substring(1,t.length-1).trim())).split(","),i=n[0].trim(),o=1;0===i.indexOf("to")?(checkSide(i=i.substring(3).trim()),r.direction=directionToDegrees(i)):i.indexOf("deg")===i.length-3?r.direction=parseInt(i.substring(0,i.length-3),10):o=0;for(var a=o;a<n.length;a++){var s=n[a].trim().split(" ");if(1===s.length&&""!==s[0]){var l=decodeRGBColor(s[0]);r.colorStops.push(l)}else{if(2!==s.length)throw new Error("Invalid color stop value "+toValueString(s));var u=decodeRGBColor(s[0]),c=s[1];r.colorStops.push([u,c])}}return r}function encodeRGBColors(e){for(var t="",r=!1,n=0;n<e.length;n++){t.endsWith("rgb")&&(r=!0),r&&t.endsWith(")")&&(r=!1);var i=e.charAt(n);r?","===i?t+="&#44":" "!==i&&(t+=i):t+=i}return t}function decodeRGBColor(e){return e.replace(/&#44/g,",")}function gradientLikeObjectToGradientInstance(e){if(checkProperty$2(e,"colorStops"),"direction"in e){var{direction:t}=e;return"string"==typeof t&&(checkSide(t),t=directionToDegrees(t)),new LinearGradient(e.colorStops.map(translateGradientLikeColorStop),t)}return new LinearGradient(e.colorStops.map(translateGradientLikeColorStop))}function translateGradientLikeColorStop(e){return Color.isValidColorValue(e)?Color.from(e):e instanceof Array?(2!==e.length&&throwInvalidGradientLikeColorStop(e),[Color.from(e[0]),Percent.from(e[1])]):void throwInvalidGradientLikeColorStop(e)}function checkProperty$2(e,t){if(!(t in e))throw new Error("LinearGradient-like object missing "+t+" value")}function directionToDegrees(e){return{left:270,top:0,right:90,bottom:180}[e]}function checkColorStops(e){if(!(e instanceof Array))throw new Error("colorStops must be an array");if(e.length<=0)throw new Error("colorStops must not be empty");e.forEach(checkColorStop)}function checkColorStop(e){e instanceof Array||e instanceof Color||throwInvalidColorStop(e),e instanceof Array&&(2===e.length&&e[0]instanceof Color&&e[1]instanceof Percent||throwInvalidColorStop(e))}function throwInvalidColorStop(e){throw new Error(toValueString(e)+" is not a valid color stop. It must be either [Color, Percent] or Color.")}function throwInvalidGradientLikeColorStop(e){throw new Error(toValueString(e)+" is not a valid color stop. It must be either [ColorValue, Percent] or ColorValue.")}function checkSide(e){if(e.indexOf(" ")>-1)throw new Error('Invalid direction "'+e+'". Corners are not supported.');if(!SIDES.includes(e))throw new Error('Invalid direction side "'+e+'". Must be a side (e.g. "left") or a corner (e.g. "left top").')}Object.defineProperty(LinearGradient.prototype,"direction",{value:0}),Object.defineProperty(LinearGradient.prototype,"colorStops",{value:[]});var numberRegex=/^[+-]?([0-9]+|[0-9]*\.[0-9]+)$/,transformDefaults={rotation:0,scaleX:1,scaleY:1,translationX:0,translationY:0,translationZ:0},PropertyTypes=function PropertyTypes(){_classCallCheck(this,PropertyTypes);var e=this;function convertToNumber(e){if(!1===e||null==e||""===e)return 0;if("string"==typeof e){var t=e.trim().replace("px","");if(numberRegex.test(t))return parseFloat(t)}if("number"!=typeof e)throw new Error(toValueString(e)+" is not a number");if(!isFinite(e))throw new Error(toValueString(e)+" is not a valid number");return e}this.any={},this.boolean={convert:function(e){return!!e},decode:function(e){return void 0!==e&&e}},this.string={convert:function(e){return null==e?"":""+e},decode:function(e){return void 0===e?"":e}},this.number={convert:convertToNumber,decode:function(e){return void 0===e?0:e}},this.natural={convert:function(e){return Math.max(0,Math.round(convertToNumber(e)))},decode:function(e){return void 0===e?0:e}},this.integer={convert:function(e){return Math.round(convertToNumber(e))},decode:function(e){return void 0===e?0:e}},this.fraction={convert:function(e){return Math.max(0,Math.min(1,convertToNumber(e)))}},this.dimension={convert:function(e){return Math.max(0,convertToNumber(e))},decode:function(e){return void 0===e?0:e}},this.Shader={convert:function(e){if(!e||"initial"===e)return"initial";if(function isIntendedLinearGradientValue(e){if(e instanceof LinearGradient)return!0;if(e instanceof Object)return"colorStops"in e;if("string"==typeof e)return/^linear-gradient/.test(e)}(e))return LinearGradient.from(e);if(Color.isValidColorValue(e))return Color.from(e);if(Image.isValidImageValue(e))return Image.from.call(this,e);throw new Error(toValueString(e)+" must be a valid ImageValue, LinearGradientValue or ColorValue.")},encode:function(t){if("initial"===t)return null;if(t instanceof LinearGradient){var{colorStops:r,direction:n}=t;return{type:"linearGradient",colors:r.map(function(e){return e instanceof Color?[e.toArray(),null]:[e[0].toArray(),e[1].valueOf()/100]}),angle:n}}if(t instanceof Color)return{type:"color",color:t.toArray()};if(t instanceof Image)return{type:"image",image:e.ImageValue.encode(t)};throw new Error(toValueString(t)+" must be a LinearGradient or Color instance.")}},this.ColorValue={convert:function(e){return e&&"initial"!==e?Color.from(e):"initial"},encode:function(e){return"initial"===e?void 0:e.toArray()},decode:function(e){return e?Color.from(e):"initial"}},this.FontValue={convert:function(e){return e&&"initial"!==e?Font.from(e):"initial"},encode:function(e){return"initial"===e?void 0:e}},this.ImageValue={convert:function(e){return e&&"initial"!==e?Image.from(e):null},encode:function(e){if(!e)return null;var t=Image.from.call(this,e),r="auto"===t.width?null:t.width,n="auto"===t.height?null:t.height,i="auto"===t.scale?null:t.scale,o=t.src;return"string"==typeof o?{type:"uri",src:o,width:r,height:n,scale:i}:getBytes(o)?{type:"encodedImage",src:getBytes(o),width:r,height:n,scale:i}:{type:"imageBitmap",src:getNativeObject(o).cid,width:r,height:n,scale:i}}},this.BoxDimensions={convert:function(t){try{if(!t)return Object.freeze({left:0,right:0,top:0,bottom:0});if("number"==typeof t){var r=e.dimension.convert(t);return{left:r,right:r,top:r,bottom:r}}if(t instanceof Array||"string"==typeof t){var n=("string"==typeof t?t.trim().split(/\s+/):t).map(convertToNumber);if(0===n.length||n.length>4)throw new Error("Array must have between 1 and 4 entries");return Object.freeze({top:n[0],right:n.length>1?n[1]:n[0],bottom:n.length>2?n[2]:n[0],left:n.length>3?n[3]:n.length>1?n[1]:n[0]})}if("object"==typeof t){var i=allowOnlyKeys(t,["left","top","right","bottom"]);return Object.freeze({left:"left"in i?convertToNumber(i.left):0,top:"top"in i?convertToNumber(i.top):0,right:"right"in i?convertToNumber(i.right):0,bottom:"bottom"in i?convertToNumber(i.bottom):0})}throw new Error("Expected number, string or object")}catch(e){throw new Error(toValueString(t)+" is not a valid BoxDimensions value: "+e.message)}}},this.Bounds={decode:function(e){return void 0===e?{left:0,top:0,width:0,height:0}:{left:e[0],top:e[1],width:e[2],height:e[3]}}},this.Widget={convert:function(e){if(!e)return null;if(e instanceof WidgetCollection)return e.first()||null;if(e instanceof NativeObject&&Object.getPrototypeOf(e).animate instanceof Function)return e;throw new Error("Not a valid widget: "+toValueString(e))},encode:function(e){return e instanceof NativeObject?e.cid:null},decode:function(e){return tabris._nativeObjectRegistry.find(e)}},this.Transformation={convert:function(e){var t=allowOnlyKeys(e,Object.keys(transformDefaults));return Object.freeze({rotation:"rotation"in t?convertToNumber(t.rotation):0,scaleX:"scaleX"in t?convertToNumber(t.scaleX):1,scaleY:"scaleY"in t?convertToNumber(t.scaleY):1,translationX:"translationX"in t?convertToNumber(t.translationX):0,translationY:"translationY"in t?convertToNumber(t.translationY):0,translationZ:"translationZ"in t?convertToNumber(t.translationZ):0})}},this.Date={convert:function(e){if(!(e instanceof Date))throw new Error(toValueString(e)+" is not of type Date");return e},encode:function(e){return e.getTime()}}},types=Object.freeze(new PropertyTypes),EventsClass=function EventsClass(){};Object.assign(EventsClass.prototype,Events);var NativeObject=function(e){function NativeObject(e){_classCallCheck(this,NativeObject);var t=_possibleConstructorReturn(this,(NativeObject.__proto__||Object.getPrototypeOf(NativeObject)).call(this));return Object.defineProperty(t,"$props",{enumerable:!1,writable:!0,value:{}}),t._nativeCreate(e),t}return _inherits(NativeObject,EventsClass),_createClass(NativeObject,null,[{key:"defineProperties",value:function defineProperties(e,t){for(var r in t)NativeObject.defineProperty(e,r,t[r])}},{key:"defineProperty",value:function defineProperty(e,t,r){var n=normalizeProperty(r);Object.defineProperty(e,"$prop_"+t,{enumerable:!1,writable:!1,value:n}),Object.defineProperty(e,t,{set:function(e){this.$setProperty(t,e)},get:function(){return this.$getProperty(t)}}),n.const||this.defineChangeEvent(e,t)}},{key:"defineEvents",value:function defineEvents(e,t){for(var r in t)NativeObject.defineEvent(e,r,t[r])}},{key:"defineEvent",value:function defineEvent(e,t,r){var n="on"+t.charAt(0).toUpperCase()+t.slice(1),i="$"+n,o="$event_"+t;if(e[o])throw new Error("Event already defined");var a=e[o]=normalizeEvent(t,r);a.changes&&this.synthesizeChangeEvents(e,t,a),Object.defineProperty(e,n,{get:function(){return this[i]||(this[i]=new Listeners(this,t)),this[i]}})}},{key:"defineChangeEvents",value:function defineChangeEvents(e,t){var r=this;t.forEach(function(t){return r.defineChangeEvent(e,t)})}},{key:"defineChangeEvent",value:function defineChangeEvent(e,t){var r="on"+t.charAt(0).toUpperCase()+t.slice(1)+"Changed",n="$"+t+"Changed";Object.defineProperty(e,r,{get:function(){return this[n]||(this[n]=new ChangeListeners(this,t)),this[n]}})}},{key:"synthesizeChangeEvents",value:function synthesizeChangeEvents(e,t,r){var n=function(e){this.$trigger(r.changes+"Changed",{value:r.changeValue(e)})},i="$event_"+r.changes+"Changed";(e[i]=e[i]||{listen:[]}).listen.push(function(e,r){e._onoff(t,r,n)})}},{key:"extend",value:function extend(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NativeObject;return function(r){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,t),_createClass(_class,[{key:"_nativeType",get:function(){return e}}]),_class}()}}]),_createClass(NativeObject,[{key:"set",value:function set(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(0===arguments.length)throw new Error("Not enough arguments");if(arguments.length>1)throw new Error("Too many arguments");return this._reorderProperties(Object.keys(e||{})).forEach(function(t){setExistingProperty.call(this,t,e[t])},this),this}},{key:"$getProperty",value:function $getProperty(e){if(!this._isDisposed){var t=this._getPropertyDefinition(e);if(t.nocache){var r=this._nativeGet(e);return t.type.decode?t.type.decode.call(null,r,this):r}var n=this._getStoredProperty(e);if(void 0!==n)return n;if(void 0!==t.default)return t.default;var i=this._nativeGet(e),o=t.type.decode?t.type.decode.call(this,i):i;return this._storeProperty(e,o),o}hint(this,'Cannot get property "'+e+'" on disposed object')}},{key:"$setProperty",value:function $setProperty(e,t){if(this._isDisposed)hint(this,'Cannot set property "'+e+'" on disposed object');else{var r=this._getPropertyDefinition(e);if(r.readonly)hint(this,'Can not set read-only property "'+e+'"');else if(r.const&&this._wasSet(e))hint(this,'Can not set const property "'+e+'"');else{var n=t;try{n=this._convertValue(r,t,n)}catch(t){return void this._printPropertyWarning(e,t)}var i=r.type.encode.call(null,n,this);r.nocache?(this._beforePropertyChange(e,n),this._nativeSet(e,i),r.const||this._triggerChangeEvent(e,n)):equals(this._getStoredProperty(e),n)&&this._wasSet(e)||(this._beforePropertyChange(e,n),this._nativeSet(e,i),this._storeProperty(e,n,r.const))}}}},{key:"_convertValue",value:function _convertValue(e,t,r){return e.nullable&&null===t||(r=allowOnlyValues(e.type.convert.call(null,t,this),e.choice)),r}},{key:"_printPropertyWarning",value:function _printPropertyWarning(e,t){hint(this,'Ignored unsupported value for property "'+e+'": '+t.message)}},{key:"_storeProperty",value:function _storeProperty(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(t!==this._getStoredProperty(e)||!this._wasSet(e))&&(void 0!==t&&(this.$props[e]=t,r||this._triggerChangeEvent(e,t),!0))}},{key:"_getStoredProperty",value:function _getStoredProperty(e){var t=this.$props?this.$props[e]:void 0;return void 0===t&&(t=this._getPropertyDefinition(e).default),t}},{key:"_wasSet",value:function _wasSet(e){return e in(this.$props||{})}},{key:"_getPropertyDefinition",value:function _getPropertyDefinition(e){return this["$prop_"+e]||{}}},{key:"_decodeProperty",value:function _decodeProperty(e,t){return e&&e.decode?e.decode.call(null,t,this):t}},{key:"$getPropertyGetter",value:function $getPropertyGetter(e){var t=this["$prop_"+e];return t?t.get:void 0}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(e,t){this.$trigger(e+"Changed",{value:t})}},{key:"_nativeCreate",value:function _nativeCreate(e){this._register(),tabris._nativeBridge.create(this.cid,this._nativeType),e instanceof Object&&this.set(e)}},{key:"_register",value:function _register(){if("undefined"==typeof tabris||!tabris._nativeBridge)throw new Error("tabris.js not started");var e=tabris._nativeObjectRegistry.register(this);Object.defineProperty(this,"cid",{value:e})}},{key:"_reorderProperties",value:function _reorderProperties(e){return e}},{key:"dispose",value:function dispose(){this._dispose()}},{key:"_dispose",value:function _dispose(e){var t=this;this._isDisposed||this._inDispose||(Object.defineProperties(this,{_inDispose:{enumerable:!1,writable:!1,value:!0},_disposedToStringValue:{enumerable:!1,writable:!1,value:this.toString()}}),this.toString=function(){return t._disposedToStringValue+" (disposed)"},this._trigger("dispose"),this._release(),e||tabris._nativeBridge.destroy(this.cid),tabris._nativeObjectRegistry.remove(this.cid),this.$props=null,Object.defineProperty(this,"_isDisposed",{enumerable:!1,writable:!1,value:!0}))}},{key:"_release",value:function _release(){}},{key:"_beforePropertyChange",value:function _beforePropertyChange(e,t){}},{key:"isDisposed",value:function isDisposed(){return!!this._isDisposed}},{key:"_listen",value:function _listen(e,t){var r=this,n=this["$event_"+e];n&&n.listen.forEach(function(e){return e(r,t)})}},{key:"_nativeListen",value:function _nativeListen(e,t){this._checkDisposed(),tabris._nativeBridge.listen(this.cid,e,t)}},{key:"_trigger",value:function _trigger(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$trigger(e,t)}},{key:"$trigger",value:function $trigger(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new EventObject;for(var n in t)n in r||Object.defineProperty(r,n,{enumerable:!0,value:t[n]});return this.trigger(e,r),!!r.defaultPrevented}},{key:"_onoff",value:function _onoff(e,t,r){t?this.on(e,r):this.off(e,r)}},{key:"_checkDisposed",value:function _checkDisposed(){if(this._isDisposed)throw new Error("Object is disposed")}},{key:"_nativeSet",value:function _nativeSet(e,t){this._checkDisposed(),tabris._nativeBridge.set(this.cid,e,void 0===t?null:t)}},{key:"_nativeGet",value:function _nativeGet(e){return this._checkDisposed(),tabris._nativeBridge.get(this.cid,e)}},{key:"_nativeCall",value:function _nativeCall(e,t){return this._checkDisposed(),tabris._nativeBridge.call(this.cid,e,t)}},{key:"toString",value:function toString(){return this.constructor.name}},{key:toXML$$1,value:function(){if(this._isDisposed)return"<"+this._getXMLElementName()+" cid='"+this.cid+"' disposed='true'/>";var e=this._getXMLContent();return e.length?this._getXMLHeader(!0)+"\n"+e.join("\n")+"\n"+this._getXMLFooter(!0):this._getXMLHeader(!1)}},{key:"_getXMLHeader",value:function _getXMLHeader(e){var t=this._getXMLAttributes().map(function(e){return e[0]+"='"+(""+e[1]).replace(/'/g,"\\'").replace(/\n/g,"\\n")+"'"}).join(" ");return"<"+this._getXMLElementName()+" "+t+(e?"":"/")+">"}},{key:"_getXMLFooter",value:function _getXMLFooter(e){return e?"</"+this._getXMLElementName()+">":""}},{key:"_getXMLElementName",value:function _getXMLElementName(){return this.constructor.name}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){return[["cid",this.cid]]}},{key:"_getXMLContent",value:function _getXMLContent(){return[]}},{key:"_nativeType",get:function(){throw new Error("Can not create instance of abstract class "+this.constructor.name)}}]),NativeObject}();function setExistingProperty(e,t){e in this||hint(this,'There is no setter for property "'+e+'"'),this[e]=t}function normalizeProperty(e){var t={type:normalizeType(e.type||{}),default:e.default,nullable:!!e.nullable,const:!!e.const,nocache:!!e.nocache,readonly:!!e.readonly,choice:e.choice};if(t.readonly&&void 0!==t.default)throw new Error('Can not combine "nocache" with "readonly"');if(t.readonly&&t.nullable)throw new Error('Can not combine "nullable" with "readonly"');if(t.readonly&&t.choice)throw new Error('Can not combine "choice" with "readonly"');if(t.choice&&t.choice.length<2)throw new Error('"choice" needs at least two entries');if(void 0===t.default&&!t.nocache&&!t.readonly)throw new Error('"default" must be given unless "nocache" or "readonly" is true.');return allowOnlyKeys(e,Object.keys(t)),t}function normalizeEvent(e,t){var r={listen:[]};if(!0===t)return r;if(Object.assign(r,t),t.native&&r.listen.push(function(t,r){t._nativeListen(e,r)}),r.changes){var n=r.changeValue;"string"==typeof n?r.changeValue=function(e){return e[n]}:n||(r.changeValue=function(e){return e[r.changes]})}return r}function normalizeType(e){if(e instanceof Function&&e.prototype instanceof NativeObject)return{convert:function(t){if(!(t instanceof e))throw new Error("Not an instance of "+e.name);return t},encode:function(e){return e?e.cid:null},decode:function(e){return e?tabris._nativeObjectRegistry.find(e):null}};var t="string"==typeof e?types[e]:e;return allowOnlyKeys(t,["convert","encode","decode"]),{convert:t.convert||function(e){return e},encode:t.encode||function(e){return e},decode:t.decode||function(e){return e}}}NativeObject.defineEvents(NativeObject.prototype,{dispose:!0});var NativeBridge=function(){function NativeBridge(e){_classCallCheck(this,NativeBridge),Object.defineProperties(this,{$bridge:{enumerable:!1,writable:!1,value:e},$operations:{enumerable:!1,writable:!0,value:[]},$currentOperation:{enumerable:!1,writable:!0,value:{id:null}},$propertyCache:{enumerable:!1,writable:!0,value:{}}})}return _createClass(NativeBridge,[{key:"create",value:function create(e,t){var r={};this.$operations.push(["create",e,t,r]),this.$currentOperation={id:e,properties:r}}},{key:"set",value:function set(e,t,r){if(this.$currentOperation.id===e)this.$currentOperation.properties[t]=r;else{var n={};n[t]=r,this.$operations.push(["set",e,n]),this.$currentOperation={id:e,properties:n}}this.cacheValue(e,t,r)}},{key:"listen",value:function listen(e,t,r){this.$operations.push(["listen",e,t,r]),this.$currentOperation={id:null}}},{key:"destroy",value:function destroy(e){this.$operations.push(["destroy",e]),this.$currentOperation={id:null}}},{key:"get",value:function get(e,t){if(this.$propertyCache[e]&&t in this.$propertyCache[e])return this.$propertyCache[e][t];this.flush();var r=this.$bridge.get(e,t);return this.cacheValue(e,t,r),r}},{key:"call",value:function call(e,t,r){return this.flush(),this.$bridge.call(e,t,r)}},{key:"flush",value:function flush(){tabris.trigger("layout");var e=this.$operations;this.$operations=[],this.$currentOperation={id:null};for(var t=e.length,r=0;r<t;r++){var n=e[r];switch(n[0]){case"create":this.$bridge.create(n[1],n[2],n[3]);break;case"set":this.$bridge.set(n[1],n[2]);break;case"listen":this.$bridge.listen(n[1],n[2],n[3]);break;case"destroy":this.$bridge.destroy(n[1])}}}},{key:"clearCache",value:function clearCache(){this.$propertyCache={}}},{key:"cacheValue",value:function cacheValue(e,t,r){this.$propertyCache[e]||(this.$propertyCache[e]={}),this.$propertyCache[e][t]=r}}]),NativeBridge}(),NativeObjectRegistry=function(){function NativeObjectRegistry(){_classCallCheck(this,NativeObjectRegistry),Object.defineProperties(this,{$idSequence:{enumerable:!1,writable:!0,value:1},$objects:{enumerable:!1,writable:!1,value:{}}})}return _createClass(NativeObjectRegistry,[{key:"register",value:function register(e){var t=this.$generateId();if(t in this.$objects)throw new Error("cid already in use: "+t);return this.$objects[t]=e,t}},{key:"remove",value:function remove(e){delete this.$objects[e]}},{key:"find",value:function find(e){return this.$objects[e]||null}},{key:"$generateId",value:function $generateId(){return"$"+this.$idSequence++}}]),NativeObjectRegistry}(),Tabris=function(e){function Tabris(){_classCallCheck(this,Tabris);var e=_possibleConstructorReturn(this,(Tabris.__proto__||Object.getPrototypeOf(Tabris)).call(this));return Object.defineProperties(e,{_started:{enumerable:!1,writable:!0,value:!1},_init:{enumerable:!1,writable:!0,value:e._init.bind(e)},_notify:{enumerable:!1,writable:!0,value:e._notify.bind(e)},_stackTraceStack:{enumerable:!1,writable:!0,value:[]},_nativeObjectRegistry:{enumerable:!1,writable:!0,value:null},_client:{enumerable:!1,writable:!0,value:null},_nativeBridge:{enumerable:!1,writable:!0,value:null},_entryPoint:{enumerable:!1,writable:!0,value:null}}),e.$publishProxies(),e}return _inherits(Tabris,NativeObject),_createClass(Tabris,[{key:"flush",value:function flush(){this.trigger("flush"),this._nativeBridge.clearCache(),this._nativeBridge.flush()}},{key:"_nativeCreate",value:function _nativeCreate(){}},{key:"_register",value:function _register(){this._nativeObjectRegistry=new NativeObjectRegistry;var e=this._nativeObjectRegistry.register(this);Object.defineProperty(this,"cid",{value:e})}},{key:"_init",value:function _init(e,t){this._client=e,this._nativeBridge=new NativeBridge(e),this._register(),this._nativeBridge.create(this.cid,this._nativeType),this.trigger("start",t||{headless:!1}),this._started=!0}},{key:"_setEntryPoint",value:function _setEntryPoint(e){this._entryPoint=e}},{key:"_notify",value:function _notify(e,t,r){var n=void 0;try{var i=this._nativeObjectRegistry.find(e);if(i)try{var o=i["$event_"+t];o&&o.changes&&this._nativeBridge.cacheValue(e,o.changes,o.changeValue(r)),n=i._trigger(t,r)}catch(e){error(e)}this.flush()}catch(e){error(e)}return n}},{key:"$publishProxies",value:function $publishProxies(){var e=this;["contentView","drawer","navigationBar","statusBar","permission","printer","device","app","localStorage","secureStorage","crypto","fs","pkcs5","sizeMeasurement"].forEach(function(t){var r=proxify(function(){return e["$"+t]});Object.defineProperty(e,t,{value:r})})}},{key:"version",get:function(){return"3.3.0"}},{key:"started",get:function(){return!!this._started}},{key:"_nativeType",get:function(){return"tabris.Tabris"}}]),Tabris}();NativeObject.defineEvents(Tabris.prototype,{start:{},flush:{},layout:{},log:{}});var SUPPORTED_ENCODINGS=["ascii","utf-8"],TextEncoder=function(e){function TextEncoder(){return _classCallCheck(this,TextEncoder),_possibleConstructorReturn(this,(TextEncoder.__proto__||Object.getPrototypeOf(TextEncoder)).apply(this,arguments))}return _inherits(TextEncoder,NativeObject),_createClass(TextEncoder,[{key:"encode",value:function encode(e,t){this._nativeListen("result",!0),this._nativeListen("error",!0),this._nativeCall("encode",{text:e,encoding:t})}},{key:"encodeSync",value:function encodeSync(e,t){return this._nativeCall("encodeSync",{text:e,encoding:t})}},{key:"_nativeType",get:function(){return"tabris.TextEncoder"}}],[{key:"getInstance",value:function getInstance(){return this._instance||Object.defineProperty(this,"_instance",{enumerable:!1,writable:!1,value:new TextEncoder}),this._instance}},{key:"encode",value:function encode(e,t){return new Promise(function(r,n){paramCheck(e,t=t||"utf-8"),(new TextEncoder).on("result",function(e){var{target:t,data:n}=e;r(n),t.dispose()}).on("error",function(e){var{target:r}=e;n(new Error("Could not encode "+t)),r.dispose()}).encode(e,t)})}},{key:"encodeSync",value:function encodeSync(e,t){return paramCheck(e,t=t||"utf-8"),TextEncoder.getInstance().encodeSync(e,t)}}]),TextEncoder}();function paramCheck(e,t){if("string"!=typeof e)throw new Error("Invalid text, must be a string");if(!SUPPORTED_ENCODINGS.includes(t))throw new Error("Unsupported encoding: "+toValueString(t))}TextEncoder._instance=null;var SUPPORTED_ENCODINGS$1=["ascii","utf-8"],TextDecoder=function(e){function TextDecoder(){_classCallCheck(this,TextDecoder);var e=_possibleConstructorReturn(this,(TextDecoder.__proto__||Object.getPrototypeOf(TextDecoder)).call(this));return e._nativeListen("result",!0),e._nativeListen("error",!0),e}return _inherits(TextDecoder,NativeObject),_createClass(TextDecoder,[{key:"decode",value:function decode(e,t){this._nativeCall("decode",{data:e,encoding:t})}},{key:"_nativeType",get:function(){return"tabris.TextDecoder"}}],[{key:"decode",value:function decode(e,t){return new Promise(function(r,n){if(ArrayBuffer.isView(e)&&(e=e.buffer),!(e instanceof ArrayBuffer))throw new Error("Invalid buffer type");if(t=t||"utf-8",!SUPPORTED_ENCODINGS$1.includes(t))throw new Error("Unsupported encoding: "+toValueString(t));(new TextDecoder).on("result",function(e){var{target:t,string:n}=e;r(n),t.dispose()}).on("error",function(e){var{target:r}=e;n(new Error("Could not decode "+t)),r.dispose()}).decode(e,t)})}}]),TextDecoder}(),Blob=function(){function Blob(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,Blob),Object.getPrototypeOf(e)!==Array.prototype)throw new TypeError("Argument 1 of Blob.constructor can't be converted to a sequence.");if(Object.getPrototypeOf(t)!==Object.prototype)throw new TypeError("Argument 2 of Blob.constructor can't be converted to a dictionary.");setBytes(this,join(e)),Object.defineProperty(this,"type",{value:"type"in t?t.type+"":""})}return _createClass(Blob,[{key:"arrayBuffer",value:function arrayBuffer(){return Promise.resolve(getBytes(this).slice(0))}},{key:"text",value:function text(){return TextDecoder.decode(getBytes(this))}},{key:"size",get:function(){return getBytes(this).byteLength}}]),Blob}();function join(e){for(var t=0,r=[],n=0;n<e.length;n++)r[n]=partToChunk(e[n]),t+=r[n].byteLength;for(var i=new Uint8Array(t),o=0,a=0;a<r.length;a++)i.set(r[a],o),o+=r[a].byteLength;return i.buffer}function partToChunk(e){return e instanceof ArrayBuffer?new Uint8Array(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer):e instanceof Blob?new Uint8Array(getBytes(e)):new Uint8Array(TextEncoder.encodeSync(e+""))}Object.defineProperty(Blob.prototype,"type",{value:""}),Blob.prototype[Symbol.toStringTag]="Blob";var Camera=function(e){function Camera(e){if(_classCallCheck(this,Camera),!e||!e.cameraId)throw new Error("Camera requires cameraId");return _possibleConstructorReturn(this,(Camera.__proto__||Object.getPrototypeOf(Camera)).call(this,e))}return _inherits(Camera,NativeObject),_createClass(Camera,[{key:"captureImage",value:function captureImage(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(r,n){e.active?e._nativeCall("captureImage",{options:t,onResult:function(e){var t=new Blob([],{type:"image/jpg"});return setBytes(t,e.image),r({image:t,width:e.width,height:e.height})},onError:function(e){return n(new Error(e))}}):n(new Error("Camera has to be active to capture an image"))})}},{key:"_nativeType",get:function(){return"tabris.Camera"}}]),Camera}();NativeObject.defineProperties(Camera.prototype,{cameraId:{type:types.string,const:!0,default:""},active:{type:types.boolean,default:!1},captureResolution:{type:{convert:function(e){return Object.freeze(allowOnlyKeys(e,["width","height"]))}},default:null,nullable:!0},position:{type:types.string,const:!0,readonly:!0},availableCaptureResolutions:{type:{decode:function(e){return e.sort(function(e,t){return e.width*e.height-t.width*t.height})}},const:!0,readonly:!0}});var Device=function(e){function Device(){return _classCallCheck(this,Device),_possibleConstructorReturn(this,(Device.__proto__||Object.getPrototypeOf(Device)).apply(this,arguments))}return _inherits(Device,NativeObject),_createClass(Device,[{key:"_nativeCreate",value:function _nativeCreate(e){if(!0!==e)throw new Error("Device can not be created");_get(Device.prototype.__proto__||Object.getPrototypeOf(Device.prototype),"_nativeCreate",this).call(this)}},{key:"_listen",value:function _listen(e,t){"orientationChanged"===e?this._nativeListen(e,t):_get(Device.prototype.__proto__||Object.getPrototypeOf(Device.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){"orientationChanged"===e?this._triggerChangeEvent("orientation",t.orientation):_get(Device.prototype.__proto__||Object.getPrototypeOf(Device.prototype),"_trigger",this).call(this,e,t)}},{key:"dispose",value:function dispose(){throw new Error("Cannot dispose device object")}},{key:"_nativeType",get:function(){return"tabris.Device"}}]),Device}();function create(){return new Device(!0)}function publishDeviceProperties(e,t){t.devicePixelRatio=e.scaleFactor,t.device=createDevice(e),t.screen=createScreen(e),t.navigator=createNavigator(e)}function createDevice(e){var t={};return["model","vendor","platform","version","name"].forEach(function(r){defineReadOnlyProperty(t,r,function(){return e[r]})}),t}function createScreen(e){var t={};return defineReadOnlyProperty(t,"width",function(){return e.screenWidth}),defineReadOnlyProperty(t,"height",function(){return e.screenHeight}),t}function createNavigator(e){var t={};return defineReadOnlyProperty(t,"userAgent",function(){return"tabris-js"}),defineReadOnlyProperty(t,"language",function(){return e.language}),t}function defineReadOnlyProperty(e,t,r){Object.defineProperty(e,t,{get:r,set:function(){}})}NativeObject.defineProperties(Device.prototype,{model:{readonly:!0,const:!0},vendor:{readonly:!0,const:!0},platform:{readonly:!0,const:!0},version:{readonly:!0,const:!0},name:{readonly:!0,const:!0},language:{readonly:!0,const:!0},orientation:{readonly:!0,nocache:!0},screenWidth:{readonly:!0,const:!0},screenHeight:{readonly:!0,const:!0},scaleFactor:{readonly:!0,const:!0},cameras:{type:{decode:function(e){return Object.freeze(e.map(function(e){return new Camera({cameraId:e})}))}},readonly:!0,const:!0}});var Printer=function(e){function Printer(){return _classCallCheck(this,Printer),_possibleConstructorReturn(this,(Printer.__proto__||Object.getPrototypeOf(Printer)).apply(this,arguments))}return _inherits(Printer,NativeObject),_createClass(Printer,[{key:"_nativeCreate",value:function _nativeCreate(e){if(!0!==e)throw new Error("Printer can not be created");_get(Printer.prototype.__proto__||Object.getPrototypeOf(Printer.prototype),"_nativeCreate",this).call(this)}},{key:"print",value:function print(e,t){var r=arguments,n=this;return new Promise(function(i,o){if(r.length<1)throw new Error("Not enough arguments to print");if(!isDataValid(e))throw new Error("data is not an ArrayBuffer or typed array");n._nativeCall("print",{data:e instanceof ArrayBuffer?e:e.buffer,options:t,onResult:function(e){return i({result:e})},onError:function(e){return o(new Error(e))}})})}},{key:"dispose",value:function dispose(){throw new Error("Cannot dispose printer object")}},{key:"_nativeType",get:function(){return"tabris.Printer"}}]),Printer}();function isDataValid(e){return e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function create$1(){return new Printer(!0)}var Permission=function(e){function Permission(){return _classCallCheck(this,Permission),_possibleConstructorReturn(this,(Permission.__proto__||Object.getPrototypeOf(Permission)).apply(this,arguments))}return _inherits(Permission,NativeObject),_createClass(Permission,[{key:"_nativeCreate",value:function _nativeCreate(e){if(!0!==e)throw new Error("Permission can not be created");_get(Permission.prototype.__proto__||Object.getPrototypeOf(Permission.prototype),"_nativeCreate",this).call(this)}},{key:"getAuthorizationStatus",value:function getAuthorizationStatus(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];Permission.validatePermissions(t,"get authorization status");var n=this._nativeCall("getAuthorizationStatus",{permissions:t});if(!n||n.error)throw new Error(n?n.error:"No result returned for getAuthorizationStatus()");return n.status}},{key:"isAuthorized",value:function isAuthorized(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Permission.validatePermissions(t,"check if permission is authorized"),"granted"===this.getAuthorizationStatus(...t)}},{key:"isAuthorizationPossible",value:function isAuthorizationPossible(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];Permission.validatePermissions(t,"check if authorization is possible");var n=this.getAuthorizationStatus(...t);return"undetermined"===n||"declined"===n}},{key:"requestAuthorization",value:function requestAuthorization(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Promise(function(t,n){Permission.validatePermissions(r,"request permission authorization"),e._nativeCall("requestAuthorization",{permissions:r,onResult:function(e){!e||e.error?n(new Error(e?e.error:"Authorization could not be requested")):t(e.status)}})})}},{key:"withAuthorization",value:function withAuthorization(e,t,r,n){if(Array.isArray(e)){if(!e.every(function(e){return"string"==typeof e}))throw new Error("Permissions need to be of type string")}else{if("string"!=typeof e)throw new Error("Permission needs to be of type string or an array of strings");e=[e]}this.requestAuthorization(...e).then(function(e){"granted"===e&&"function"==typeof t?t(e):"function"==typeof r&&r(e)}).catch(function(e){"function"==typeof n&&n(e)})}},{key:"dispose",value:function dispose(){throw new Error("Cannot dispose permission object")}},{key:"_nativeType",get:function(){return"tabris.Permission"}}],[{key:"validatePermissions",value:function validatePermissions(e,t){if(0===e.length)throw new Error("Not enough arguments to "+t);if(!e.every(function(e){return"string"==typeof e}))throw new Error("Permissions need to be of type string")}}]),Permission}();function create$2(){return new Permission(!0)}var CERTIFICATE_ALGORITHMS=["RSA2048","RSA4096","ECDSA256"],App=function(e){function App(){return _classCallCheck(this,App),_possibleConstructorReturn(this,(App.__proto__||Object.getPrototypeOf(App)).apply(this,arguments))}return _inherits(App,NativeObject),_createClass(App,[{key:"_nativeCreate",value:function _nativeCreate(e){if(!0!==e)throw new Error("App can not be created");_get(App.prototype.__proto__||Object.getPrototypeOf(App.prototype),"_nativeCreate",this).call(this)}},{key:"_beforePropertyChange",value:function _beforePropertyChange(e){"pinnedCertificates"===e&&this.on("certificatesReceived",this._validateCertificate,this)}},{key:"launch",value:function launch(e){var t=arguments,r=this;return new Promise(function(n,i){if(t.length<1)throw new Error("Not enough arguments to launch");if("string"!=typeof e)throw new Error("Invalid url: "+toValueString(e)+" is not a string");r._nativeCall("launch",{url:e,onError:function(e){return i(new Error(e))},onSuccess:function(){return n()}})})}},{key:"getResourceLocation",value:function getResourceLocation(e){this._resourceBaseUrl||Object.defineProperty(this,"_resourceBaseUrl",{enumerable:!1,writable:!1,value:this._nativeGet("resourceBaseUrl")});var t=null!=e?"/"+normalizePath$1(""+e):"";return this._resourceBaseUrl+t}},{key:"dispose",value:function dispose(){throw new Error("tabris.app can not be disposed")}},{key:"reload",value:function reload(e){this._nativeCall("reload",{url:e})}},{key:"close",value:function close(){this._nativeCall("close")}},{key:"registerFont",value:function registerFont(e,t){if(arguments.length<2)throw new Error("Not enough arguments to register a font");if("string"!=typeof e)throw new Error("Invalid alias: "+toValueString(e)+" is not a string");if("string"!=typeof t)throw new Error("Invalid file path: "+toValueString(t)+" is not a string");this._nativeCall("registerFont",{alias:e,file:t})}},{key:"_validateCertificate",value:function _validateCertificate(e){var t=this.$pinnedCerts[e.host];t&&!t.some(function(t){return e.hashes.includes(t)})&&e.preventDefault()}},{key:"_nativeType",get:function(){return"tabris.App"}},{key:"id",get:function(){return this._nativeGet("appId")}},{key:"debugBuild",get:function(){return this._nativeGet("debugBuild")}},{key:"version",get:function(){return this._nativeGet("version")}},{key:"versionCode",get:function(){return this._nativeGet("versionId")}},{key:"$pinnedCerts",get:function(){var e=this.pinnedCertificates,t={};for(var r of e)t[r.host]=t[r.host]||[],t[r.host].push(r.hash);return t}}]),App}();function create$3(){return new App(!0)}function normalizePath$1(e){return e.split(/\/+/).map(function(t){if(".."===t)throw new Error("Path "+toValueString(e)+' must not contain ".."');return"."===t?"":t}).filter(function(e){return!!e}).join("/")}NativeObject.defineProperties(App.prototype,{pinnedCertificates:{type:{convert:function(e){return Object.freeze(e)},encode:function(e){if(!Array.isArray(e))throw new Error("Not an Array");for(var t of e){if("string"!=typeof t.host)throw new Error("Invalid host "+toValueString(t.host));if("string"!=typeof t.hash||!t.hash.startsWith("sha256/"))throw new Error("Invalid hash "+toValueString(t.hash)+" for pinned certificate "+t.host);if("iOS"===tabris.device.platform){if(!("algorithm"in t))throw new Error("Missing algorithm for pinned certificate "+t.host);if("string"!=typeof t.algorithm||-1===CERTIFICATE_ALGORITHMS.indexOf(t.algorithm))throw new Error("Invalid algorithm "+toValueString(t.algorithm)+" for pinned certificate "+t.host)}}return e}},default:Object.freeze([])},trustedCertificates:{type:{convert:function(e){return Object.freeze(e)},encode:function(e){if(!Array.isArray(e))throw new Error("Not an Array");for(var t=0;t<e.length;t++){var r=e[t];if(!(r instanceof ArrayBuffer))throw new Error("certificate entry "+toValueString(r)+" is not an ArrayBuffer")}return e}},default:Object.freeze([])},idleTimeoutEnabled:{type:{convert:function(e){if(!tabris.contentView)throw new Error('The device property "idleTimeoutEnabled" can only be changed in main context.');return types.boolean.convert(e)}},default:!0}}),NativeObject.defineEvents(App.prototype,{foreground:{native:!0},background:{native:!0},pause:{native:!0},resume:{native:!0},terminate:{native:!0},keyPress:{native:!0},backNavigation:{native:!0},certificatesReceived:{native:!0}});var ERRORS={EACCES:"Permission denied",EEXIST:"File exists",ENOENT:"No such file or directory",EISDIR:"Is a directory",ENOTDIR:"Not a directory",ENOTEMPTY:"Directory not empty"},FileSystem=function(e){function FileSystem(){return _classCallCheck(this,FileSystem),_possibleConstructorReturn(this,(FileSystem.__proto__||Object.getPrototypeOf(FileSystem)).apply(this,arguments))}return _inherits(FileSystem,NativeObject),_createClass(FileSystem,[{key:"_nativeCreate",value:function _nativeCreate(e){if(!0!==e)throw new Error("FileSystem can not be created");_get(FileSystem.prototype.__proto__||Object.getPrototypeOf(FileSystem.prototype),"_nativeCreate",this).call(this)}},{key:"readFile",value:function readFile(e,t){var r=arguments,n=this;return new Promise(function(i,o){if(r.length<1)throw new Error("Not enough arguments to readFile");n._nativeCall("readFile",{path:checkPath(e),onError:function(t){return o(createError(t,e))},onSuccess:function(e){return t?TextDecoder.decode(e,t).then(i,o):i(e)}})})}},{key:"writeFile",value:function writeFile(e,t,r){var n=arguments,i=this;return new Promise(function(o,a){if(n.length<2)throw new Error("Not enough arguments to writeFile");var s=function(t){return i._nativeCall("writeFile",{path:checkPath(e),data:checkBuffer(t),onError:function(t){return a(createError(t,e))},onSuccess:function(){return o()}})};"string"==typeof t?TextEncoder.encode(t,r||"utf-8").then(s,a):s(t)})}},{key:"removeFile",value:function removeFile(e){var t=arguments,r=this;return new Promise(function(n,i){if(t.length<1)throw new Error("Not enough arguments to removeFile");r._nativeCall("removeFile",{path:checkPath(e),onError:function(t){return i(createError(t,e))},onSuccess:function(){return n()}})})}},{key:"readDir",value:function readDir(e){var t=arguments,r=this;return new Promise(function(n,i){if(t.length<1)throw new Error("Not enough arguments to readDir");r._nativeCall("readDir",{path:checkPath(e),onError:function(t){return i(createError(t,e))},onSuccess:function(e){return n(e)}})})}},{key:"dispose",value:function dispose(){throw new Error("Cannot dispose fs object")}},{key:"_nativeType",get:function(){return"tabris.FileSystem"}},{key:"filesDir",get:function(){return this._nativeGet("filesDir")}},{key:"cacheDir",get:function(){return this._nativeGet("cacheDir")}}]),FileSystem}();function create$4(){return new FileSystem(!0)}function createError(e,t){var r=(ERRORS[e]||e)+": "+t,n=e in ERRORS?e:null,i=new Error(r);return Object.defineProperties(i,{path:{value:t},code:{value:n}}),i}function checkPath(e){try{return normalizePath(e)}catch(t){throw new Error(toValueString(e)+" is not a valid file name. "+t.message)}}function checkBuffer(e){if(ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof Blob)return getBytes(e);if(!(e instanceof ArrayBuffer))throw new Error(toValueString(e)+" is not an ArrayBuffer");return e}var GestureRecognizer=function(e){function GestureRecognizer(){return _classCallCheck(this,GestureRecognizer),_possibleConstructorReturn(this,(GestureRecognizer.__proto__||Object.getPrototypeOf(GestureRecognizer)).apply(this,arguments))}return _inherits(GestureRecognizer,NativeObject),_createClass(GestureRecognizer,[{key:"_listen",value:function _listen(e,t){"gesture"===e?this._nativeListen(e,t):_get(GestureRecognizer.prototype.__proto__||Object.getPrototypeOf(GestureRecognizer.prototype),"_listen",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.GestureRecognizer"}}]),GestureRecognizer}();NativeObject.defineProperties(GestureRecognizer.prototype,{type:{type:types.string,default:null},target:{type:types.Widget,default:null},fingers:{type:types.natural,default:null},touches:{type:types.natural,default:null},duration:{type:types.natural,default:null},direction:{type:types.string,default:null}});var ANIMATABLE_PROPERTIES=["opacity","transform"],PROPERTIES={properties:{default:Object.freeze({})},delay:{type:types.natural,default:0},duration:{type:types.natural,default:null},repeat:{type:{convert:function(e){if("number"!=typeof e)throw new Error(toValueString(e)+" is not a number");if(!isFinite(e)&&!isNaN(e)&&e!==1/0)throw new Error(toValueString(e)+" is not a valid number");return e},encode:function(e){return e===1/0?-1:e}},default:1},reverse:{type:types.boolean,default:!1},easing:{type:types.string,choice:["linear","ease-in","ease-out","ease-in-out"],default:"liniear"},target:{type:types.Widget,default:null}},Animation=function(e){function Animation(e){_classCallCheck(this,Animation);var t=_possibleConstructorReturn(this,(Animation.__proto__||Object.getPrototypeOf(Animation)).call(this,e));return t._nativeListen("completed",!0),t}return _inherits(Animation,NativeObject),_createClass(Animation,[{key:"_trigger",value:function _trigger(e,t){"completed"===e?(this.target.off("dispose",this.abort,this),this._resolve&&this._resolve(),this.dispose()):_get(Animation.prototype.__proto__||Object.getPrototypeOf(Animation.prototype),"_trigger",this).call(this,e,t)}},{key:"start",value:function start(e,t){this.target.on("dispose",this.abort,this),Object.defineProperties(this,{_resolve:{enumerable:!1,writable:!1,value:e},_reject:{enumerable:!1,writable:!1,value:t}}),this._nativeCall("start")}},{key:"abort",value:function abort(){this._reject&&this._reject(),this.dispose()}},{key:"_nativeType",get:function(){return"tabris.Animation"}}]),Animation}();function animate(e,t){var r=this,n={};for(var i in e)if(-1!==ANIMATABLE_PROPERTIES.indexOf(i))try{var o=this._getPropertyDefinition(i);n[i]=this._convertValue(o,e[i]),this._storeProperty(i,n[i])}catch(e){hint(this,'Ignored invalid animation property value for "'+i+'"')}else hint(this,'Ignored invalid animation property "'+i+'"');for(var a in t)a in PROPERTIES||"name"===a||hint(this,'Ignored invalid animation option "'+a+'"');return new Promise(function(e,i){new Animation(Object.assign({},t,{target:r,properties:n})).start(e,i)})}NativeObject.defineProperties(Animation.prototype,PROPERTIES);var LayoutData=function(){function LayoutData(e){if(_classCallCheck(this,LayoutData),!(e instanceof Object)||e.constructor!==Object)throw new Error(toValueString(e)+" is not a parameter object");setConstraintValue(this,e,"left"),setConstraintValue(this,e,"top"),setConstraintValue(this,e,"right"),setConstraintValue(this,e,"bottom"),setDimension$1(this,e,"width"),setDimension$1(this,e,"height"),setOffset(this,e,"centerX"),setOffset(this,e,"centerY"),setSiblingReference(this,e,"baseline")}return _createClass(LayoutData,null,[{key:"from",value:function from(e){if("stretch"===e)return LayoutData.stretch;if("stretchX"===e)return LayoutData.stretchX;if("stretchY"===e)return LayoutData.stretchY;if("center"===e)return LayoutData.center;if(!(e instanceof Object))throw new Error(toValueString(e)+" is not an object");if(e instanceof LayoutData)return e;if(e.constructor!==Object)throw new Error(toValueString(e)+" is not a parameter object");return new LayoutData({left:has(e,"left")?Constraint.from(e.left):"auto",right:has(e,"right")?Constraint.from(e.right):"auto",top:has(e,"top")?Constraint.from(e.top):"auto",bottom:has(e,"bottom")?Constraint.from(e.bottom):"auto",centerX:has(e,"centerX")?normalizeNumber(e.centerX,0):"auto",centerY:has(e,"centerY")?normalizeNumber(e.centerY,0):"auto",baseline:has(e,"baseline")?normalizeReference(e.baseline,LayoutData.prev):"auto",width:has(e,"width")?normalizeNumber(e.width):"auto",height:has(e,"height")?normalizeNumber(e.height):"auto"})}},{key:"next",get:function(){return Constraint.next}},{key:"prev",get:function(){return Constraint.prev}},{key:"stretch",get:function(){return this._stretch||Object.defineProperty(this,"_stretch",{enumerable:!1,writable:!1,value:new LayoutData({left:zero,top:zero,right:zero,bottom:zero})}),this._stretch}},{key:"stretchX",get:function(){return this._stretchX||Object.defineProperty(this,"_stretchX",{enumerable:!1,writable:!1,value:new LayoutData({left:zero,right:zero})}),this._stretchX}},{key:"stretchY",get:function(){return this._stretchY||Object.defineProperty(this,"_stretchY",{enumerable:!1,writable:!1,value:new LayoutData({top:zero,bottom:zero})}),this._stretchY}},{key:"center",get:function(){return this._center||Object.defineProperty(this,"_center",{enumerable:!1,writable:!1,value:new LayoutData({centerX:0,centerY:0})}),this._center}}]),_createClass(LayoutData,[{key:"toString",value:function toString(){return JSON.stringify({left:this.left.toString(),right:this.right.toString(),top:this.top.toString(),bottom:this.bottom.toString(),width:this.width,height:this.height,centerX:this.centerX,centerY:this.centerY,baseline:referenceToString(this.baseline)})}},{key:"equals",value:function equals(e){return e instanceof LayoutData&&(equals$2(e.left,this.left)&&equals$2(e.right,this.right)&&equals$2(e.top,this.top)&&equals$2(e.bottom,this.bottom)&&equals$2(e.centerX,this.centerX)&&equals$2(e.centerY,this.centerY)&&equals$2(e.baseline,this.baseline)&&equals$2(e.width,this.width)&&equals$2(e.height,this.height))}}]),LayoutData}();function mergeLayoutData(e,t){var r=LayoutData.from(e),n=LayoutData.from(t);return LayoutData.from({left:has(n,"left")?n.left:r.left,right:has(n,"right")?n.right:r.right,top:has(n,"top")?n.top:r.top,bottom:has(n,"bottom")?n.bottom:r.bottom,centerX:has(n,"centerX")?n.centerX:r.centerX,centerY:has(n,"centerY")?n.centerY:r.centerY,baseline:has(n,"baseline")?n.baseline:r.baseline,width:has(n,"width")?n.width:r.width,height:has(n,"height")?n.height:r.height})}function has(e,t){return null!=e[t]&&"auto"!==e[t]}function setConstraintValue(e,t,r){var n=r in t?t[r]:"auto";if("auto"===n||n instanceof Constraint)return Object.defineProperty(e,r,{enumerable:!0,value:n});throw new Error("Invalid "+r+" constraint "+toValueString(n))}function setDimension$1(e,t,r){var n=r in t?t[r]:"auto";"auto"!==n&&checkNumber(n,[0,1/0]),Object.defineProperty(e,r,{enumerable:!0,value:n})}function setOffset(e,t,r){var n=r in t?t[r]:"auto";"auto"!==n&&checkNumber(n,[-1/0,1/0],"Invalid "+r),Object.defineProperty(e,r,{enumerable:!0,value:n})}function setSiblingReference(e,t,r){var n=r in t?t[r]:"auto";return"auto"!==n&&checkIsValidSiblingReference(n),Object.defineProperty(e,r,{enumerable:!0,value:n})}function equals$2(e,t){return e===t||e instanceof Constraint&&t instanceof Constraint&&e.equals(t)}var layoutDataProps=["left","right","top","bottom","width","height","centerX","centerY","baseline"],jsxShorthands={center:"layoutData",stretch:"layoutData",stretchX:"layoutData",stretchY:"layoutData"},defaultGestures={tap:{type:"tap"},longPress:{type:"longPress"},pan:{type:"pan"},panLeft:{type:"pan",direction:"left"},panRight:{type:"pan",direction:"right"},panUp:{type:"pan",direction:"up"},panDown:{type:"pan",direction:"down"},panHorizontal:{type:"pan",direction:"horizontal"},panVertical:{type:"pan",direction:"vertical"},swipeLeft:{type:"swipe",direction:"left"},swipeRight:{type:"swipe",direction:"right"},swipeUp:{type:"swipe",direction:"up"},swipeDown:{type:"swipe",direction:"down"}},Widget=function(e){function Widget(){return _classCallCheck(this,Widget),_possibleConstructorReturn(this,(Widget.__proto__||Object.getPrototypeOf(Widget)).apply(this,arguments))}return _inherits(Widget,NativeObject),_createClass(Widget,[{key:"appendTo",value:function appendTo(e){if(this._checkDisposed(),!((e=e instanceof WidgetCollection?e.first():e)instanceof NativeObject))throw new Error("Cannot append to non-widget "+toValueString(e));return this._setParent(e),this}},{key:"insertBefore",value:function insertBefore(e){if(this._checkDisposed(),!((e=e instanceof WidgetCollection?e.first():e)instanceof NativeObject))throw new Error("Cannot insert before non-widget "+toValueString(e));var t=e.parent();if(!t)throw new Error("Cannot insert before orphan "+toValueString(e));var r=t.$children.indexOf(e);return this._setParent(t,r),this}},{key:"insertAfter",value:function insertAfter(e){if(this._checkDisposed(),!((e=e instanceof WidgetCollection?e.first():e)instanceof NativeObject))throw new Error("Cannot insert after non-widget "+toValueString(e));var t=e.parent();if(!t)throw new Error("Cannot insert after orphan "+toValueString(e));this.detach();var r=t.$children.indexOf(e);return this._setParent(t,r+1),this}},{key:"detach",value:function detach(){return this._checkDisposed(),this._setParent(null),this}},{key:"parent",value:function parent(e){if(!e||!this._parent)return this._parent||null;for(var t=this._parent,r=getFilter(e);t&&!r(t);)t=t.parent();return t}},{key:"siblings",value:function siblings(e){var t=this;return this._parent?this._parent._children(function(e){return e!==t}).filter(e):new WidgetCollection([])}},{key:"toString",value:function toString(){return this.constructor.name+('[cid="'+this.cid+'"]')+(this.id?"#"+this.id:"")+(this.classList.length?"."+this.classList.join("."):"")}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e=_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_getXMLAttributes",this).call(this);this.id&&e.push(["id",this.id]),this.class&&e.push(["class",this.class]);var t=this.bounds;return e.push(["bounds","{left: "+Math.round(t.left)+", top: "+Math.round(t.top)+", width: "+Math.round(t.width)+", height: "+Math.round(t.height)+"}"]),this.enabled||e.push(["enabled","false"]),this.visible||e.push(["visible","false"]),e}},{key:"_setParent",value:function _setParent(e,t){this._parent&&this._parent._removeChild(this),Object.defineProperty(this,"_parent",{enumerable:!1,writable:!0,value:e}),this._parent&&this._parent._addChild(this,t)}},{key:"_listen",value:function _listen(e,t){var r=this;if(!this._isDisposed)if(this.gestures[e])if(t){var n=Object.assign({target:this},this.gestures[e]),i=new GestureRecognizer(n).on("gesture",function(t){t.translation&&(t.translationX=t.translation.x,t.translationY=t.translation.y),t.velocity&&(t.velocityX=t.velocity.x,t.velocityY=t.velocity.y),_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_trigger",r).call(r,e,t)});this._recognizers||Object.defineProperty(this,"_recognizers",{enumerable:!1,writable:!1,value:{}}),this._recognizers[e]=i,this.on("dispose",i.dispose,i)}else this._recognizers&&e in this._recognizers&&(this._recognizers[e].dispose(),delete this._recognizers[e]);else _get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){return"resize"===e?_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_trigger",this).call(this,e,types.Bounds.decode(t.bounds)):_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),"_trigger",this).call(this,e,t)}},{key:"_release",value:function _release(){this._parent&&(this._parent._removeChild(this),this._parent=null)}},{key:"_reorderProperties",value:function _reorderProperties(e){var t=e.indexOf("layoutData");return-1!==t?e.splice(t,1).concat(e):e}},{key:"class",set:function(e){this._isDisposed?hint(this,'Cannot set property "class" on disposed object'):(Object.defineProperty(this,"_classList",{enumerable:!0,writable:!0,value:types.string.convert(e).trim().split(/\s+/)}),this._triggerChangeEvent("class",this.class))},get:function(){if(!this._isDisposed)return this.classList.join(" ")}},{key:"layoutData",set:function(e){var t=this;if(this._isDisposed)hint(this,'Cannot set property "layoutData" on disposed object');else{var r=this._layoutData;r&&r.equals(e)||(Object.defineProperty(this,"_layoutData",{enumerable:!1,writable:!0,value:e?LayoutData.from(e):new LayoutData({})}),this._triggerChangeEvent("layoutData",this._layoutData),layoutDataProps.forEach(function(e){(r?r[e]:"auto")!==t._layoutData[e]&&t._triggerChangeEvent(e,t._layoutData[e])}))}},get:function(){if(!this._isDisposed)return this._layoutData||Object.defineProperty(this,"_layoutData",{enumerable:!1,writable:!0,value:new LayoutData({})}),this._layoutData}},{key:"classList",get:function(){if(!this._isDisposed)return this._classList||Object.defineProperty(this,"_classList",{enumerable:!0,writable:!0,value:[]}),this._classList}},{key:"data",get:function(){if(!this._isDisposed)return this.$data||Object.defineProperty(this,"$data",{enumerable:!1,writable:!1,value:{}}),this.$data}},{key:"absoluteBounds",get:function(){if(!this._isDisposed)return types.Bounds.decode(this._nativeGet("absoluteBounds"))}},{key:"id",set:function(e){var t=types.string.convert(e);Object.defineProperty(this,"_id",{enumerable:!1,writable:!1,value:t})},get:function(){if(!this._isDisposed)return this._id||""}},{key:"gestures",set:function(e){var t=Object.assign({},defaultGestures,e);Object.defineProperty(this,"_gestures",{enumerable:!1,writable:!0,value:t})},get:function(){if(!this._gestures){var e=Object.assign({},defaultGestures);Object.defineProperty(this,"_gestures",{enumerable:!1,writable:!0,value:e})}return this._gestures}},{key:"excludeFromLayout",set:function(e){this._excludeFromLayout!==!!e&&Object.defineProperty(this,"_excludeFromLayout",{enumerable:!1,writable:!0,value:!!e}),this._parent&&this._parent._scheduleRenderChildren(),this._triggerChangeEvent("excludeFromLayout",this._excludeFromLayout)},get:function(){return!!this._excludeFromLayout}},{key:Symbol.toStringTag,get:function(){return this.constructor.name}}]),Widget}();function createElement$1(e,t){var r=this.withShorthands(t,jsxShorthands,mergeLayoutData);return this.createNativeObject(e,r)}NativeObject.defineProperties(Widget.prototype,{enabled:{type:types.boolean,default:!0},visible:{type:types.boolean,default:!0},elevation:{type:types.natural,default:0},bounds:{type:types.Bounds,readonly:!0,nocache:!0},background:{type:types.Shader,default:"initial"},opacity:{type:types.fraction,default:1},transform:{type:types.Transformation,default:Object.freeze({rotation:0,scaleX:1,scaleY:1,translationX:0,translationY:0,translationZ:0})},highlightOnTouch:{type:types.boolean,default:!1},cornerRadius:{type:types.number,default:0},padding:{type:types.BoxDimensions,default:Object.freeze({left:0,right:0,top:0,bottom:0})}}),layoutDataProps.forEach(function(e){Object.defineProperty(Widget.prototype,e,{set:function(t){this.layoutData=LayoutData.from(Object.assign({},this.layoutData,_defineProperty({},e,t)))},get:function(){return this.layoutData[e]}}),NativeObject.defineEvent(Widget.prototype,e+"Changed",!0)}),NativeObject.defineChangeEvents(Widget.prototype,["layoutData","class"]),NativeObject.defineEvents(Widget.prototype,{tap:!0,longPress:!0,pan:!0,panLeft:!0,panRight:!0,panUp:!0,panDown:!0,panHorizontal:!0,panVertical:!0,swipeLeft:!0,swipeRight:!0,swipeUp:!0,swipeDown:!0,touchStart:{native:!0},touchMove:{native:!0},touchEnd:{native:!0},touchCancel:{native:!0},resize:{native:!0,changes:"bounds",changeValue:function(e){var{left:t,top:r,width:n,height:i,bounds:o}=e;return o||{left:t,top:r,width:n,height:i}}},addChild:!0,removeChild:!0}),Widget.prototype.animate=animate,Widget.prototype[JSX.jsxFactory]=createElement$1;var selectorRegex=/^(\*|([#.A-Z][A-Za-z0-9_-]+))$/,numberRegex$1=/^[+-]?([0-9]+|[0-9]*\.[0-9]+)$/,zeroPercent=new Percent(0),Constraint=function(){function Constraint(e,t){if(_classCallCheck(this,Constraint),"string"==typeof e&&!selectorRegex.test(e))throw new Error("Invalid sibling selector "+toValueString(e));e instanceof Percent||checkIsValidSiblingReference(e),checkNumber(t),Object.defineProperty(this,"reference",{enumerable:!0,value:e}),Object.defineProperty(this,"offset",{enumerable:!0,value:t})}return _createClass(Constraint,null,[{key:"from",value:function from(e){if(!0===e)return zero;if("string"==typeof e){var t=e.trim();return-1!==t.indexOf(" ")?fromArray(t.split(/\s+/)):numberRegex$1.test(t)?new Constraint(zeroPercent,parseFloat(t)):new Constraint(normalizeReference(t),0)}if(Array.isArray(e))return fromArray(e);if("number"==typeof e)return 0===e?zero:new Constraint(zeroPercent,normalizeNumber(e));if(e instanceof Widget||"symbol"==typeof e||Percent.isValidPercentValue(e))return new Constraint(normalizeReference(e),0);if("reference"in e||"offset"in e)return fromArray([e.reference||zeroPercent,e.offset||0]);throw new Error("Invalid constraint "+toValueString(e))}}]),_createClass(Constraint,[{key:"toString",value:function toString(){return referenceToString(this.reference)+" "+this.offset}},{key:"toArray",value:function toArray(){return[this.reference,this.offset]}},{key:"equals",value:function equals(e){return e instanceof Constraint&&(e.offset===this.offset&&(e.reference instanceof Percent&&this.reference instanceof Percent?e.reference.percent===this.reference.percent:e.reference===this.reference))}}]),Constraint}();function checkIsValidSiblingReference(e){if("string"==typeof e&&!selectorRegex.test(e))throw new Error("Invalid sibling selector "+toValueString(e));if("string"!=typeof e&&!(e instanceof Widget)&&e!==Constraint.next&&e!==Constraint.prev)throw new Error("Invalid constraint reference "+toValueString(e))}function referenceToString(e){return e instanceof Percent?e+"%":e instanceof Widget?e.constructor.name+'[cid="'+e.cid+'"]':e===Constraint.next?"next()":e===Constraint.prev?"prev()":e}function normalizeReference(e,t){if(!0===e&&void 0!==t)return t;if(Percent.isValidPercentValue(e))return Percent.from(e);if(e instanceof Widget||e===Constraint.next||e===Constraint.prev)return e;if("string"==typeof e){var r=e.trim();if("prev()"===r)return Constraint.prev;if("next()"===r)return Constraint.next;if(selectorRegex.test(r))return r}throw new Error(toValueString(e)+" is not a percentage or widget reference")}function normalizeNumber(e,t){return!0===e&&void 0!==t?t:"string"==typeof e&&numberRegex$1.test(e)?parseFloat(e):e}Constraint.next=Symbol("next()"),Constraint.prev=Symbol("prev()");var zero=new Constraint(new Percent(0),0);function fromArray(e){if(2!==e.length)throw new Error("Constraint array requires exactly 2 elements but has "+e.length);return new Constraint(normalizeReference(e[0]),normalizeNumber(e[1]))}var PHASE_CONSTANTS={NONE:{value:0},CAPTURING_PHASE:{value:1},AT_TARGET:{value:2},BUBBLING_PHASE:{value:3}},Event=function(){function Event(e,t){if(_classCallCheck(this,Event),arguments.length<1)throw new Error("Not enough arguments to Event");Object.defineProperties(this,{$timeStamp:{enumerable:!1,writable:!0,value:Date.now()},$type:{enumerable:!1,writable:!0,value:e||""},$bubbles:{enumerable:!1,writable:!0,value:t&&!!t.bubbles||!1},$cancelable:{enumerable:!1,writable:!0,value:t&&!!t.cancelable||!1},$target:{enumerable:!1,writable:!0,value:null},$defaultPrevented:{enumerable:!1,writable:!0,value:!1}})}return _createClass(Event,[{key:"initEvent",value:function initEvent(e,t,r){if(arguments.length<3)throw new Error("Not enough arguments to initEvent");this.$type=e+"",this.$bubbles=!!t,this.$cancelable=!!r}},{key:"stopPropagation",value:function stopPropagation(){}},{key:"stopImmediatePropagation",value:function stopImmediatePropagation(){}},{key:"preventDefault",value:function preventDefault(){this.$cancelable&&(this.$defaultPrevented=!0)}},{key:"type",get:function(){return this.$type}},{key:"timeStamp",get:function(){return this.$timeStamp}},{key:"bubbles",get:function(){return this.$bubbles}},{key:"cancelable",get:function(){return this.$cancelable}},{key:"target",get:function(){return this.$target}},{key:"currentTarget",get:function(){return this.$target}},{key:"defaultPrevented",get:function(){return this.$defaultPrevented}},{key:"eventPhase",get:function(){return 0}},{key:"isTrusted",get:function(){return!1}}]),Event}();function addDOMEventTargetMethods(e){if("function"!=typeof e.addEventListener){var t=void 0;e.addEventListener=function(e,r){if(arguments.length<2)throw new Error("Not enough arguments to addEventListener");t||(t=[]),e in t||(t[e]=[]),t[e].includes(r)||t[e].push(r)},e.removeEventListener=function(e,r){if(arguments.length<2)throw new Error("Not enough arguments to removeEventListener");if(t&&e in t){var n=t[e].indexOf(r);-1!==n&&t[e].splice(n,1)}},e.dispatchEvent=function(r){if(arguments.length<1)throw new Error("Not enough arguments to dispatchEvent");if(!(r instanceof Event))throw new Error("Invalid event given to dispatchEvent");if(r.$target=e,t&&r.type in t)for(var n of t[r.type])n.call(this,r);return!r.defaultPrevented}}}function defineEventHandlerProperties(e,t){t.forEach(function(t){return defineEventHandlerProperty(e,t)})}function defineEventHandlerProperty(e,t){var r="on"+t,n=null;Object.defineProperty(e,r,{get:function(){return n},set:function(r){"function"==typeof r&&(n&&e.removeEventListener(t,n),n=r,e.addEventListener(t,n))}})}function addDOMDocument(e){var t=function(){function HTMLElement(e){_classCallCheck(this,HTMLElement),this.tagName=(e||"").toUpperCase(),this.children=[]}return _createClass(HTMLElement,[{key:"setAttribute",value:function setAttribute(){}},{key:"appendChild",value:function appendChild(t){return this.children.push(t),handleElementInserted(this,t,e),t}},{key:"cloneNode",value:function cloneNode(){return new HTMLElement}},{key:"lastChild",value:function lastChild(){return new HTMLElement}}]),HTMLElement}();e.document={documentElement:{},createDocumentFragment:function(){return new t},createElement:function(e){return new t(e)},location:{href:""},readyState:"loading",head:new t("head"),getElementsByTagName:function(e){return this.head.children.filter(function(t){return t.tagName===e.toUpperCase()})},createEvent:function(e){return new Event(e)}},addDOMEventTargetMethods(e.document),void 0===e.location&&(e.location=e.document.location),tabris.once("start",function(){e.document.readyState="complete";var t=new Event("DOMContentLoaded",!1,!1);e.document.dispatchEvent(t)})}function handleElementInserted(e,t,r){if("HEAD"===e.tagName&&"SCRIPT"===t.tagName&&t.src){var n=void 0;try{n=tabris._client.loadAndExecute(t.src,"","")}catch(e){return error("Error loading "+t.src+":",e),log(e.stack),void("function"==typeof t.onerror&&t.onerror.call(r,e))}n.loadError?"function"==typeof t.onerror&&t.onerror.call(r,new Error("Could not load "+t.src)):"function"==typeof t.onload&&t.onload.call(r)}}function addWindowTimerMethods(e){if("function"!=typeof e.setTimeout){var t=0;e.setTimeout=function(e,t){if(arguments.length<1)throw new TypeError("Not enough arguments to setTimeout");if("function"!=typeof e)throw new TypeError("Illegal argument to setTimeout: not a function");var r=Array.prototype.slice.call(arguments,2);return createTimer(e,adjustDelay(t),!1,r)},e.setInterval=function(e,t){if(arguments.length<1)throw new TypeError("Not enough arguments to setInterval");if("function"!=typeof e)throw new TypeError("Illegal argument to setInterval: not a function");var r=Array.prototype.slice.call(arguments,2);return createTimer(e,adjustDelay(t),!0,r)},e.clearTimeout=e.clearInterval=function(e){return tabris.app._nativeCall("cancelTimer",{id:e})}}function createTimer(r,n,i,o){var a=t++,s=function(){return tabris.app._nativeCall("startTimer",{id:a,delay:n,repeat:i,callback:createNativeCallback(r,e,o)})};return tabris.started?s():tabris.once("start",s),a}}function adjustDelay(e){return"number"==typeof e&&isFinite(e)?Math.max(0,Math.round(e)):0}Object.defineProperties(Event,PHASE_CONSTANTS),Object.defineProperties(Event.prototype,PHASE_CONSTANTS);var NativeStore=function(e){function NativeStore(e){return _classCallCheck(this,NativeStore),_possibleConstructorReturn(this,(NativeStore.__proto__||Object.getPrototypeOf(NativeStore)).call(this,e))}return _inherits(NativeStore,NativeObject),_createClass(NativeStore,[{key:"_nativeCreate",value:function _nativeCreate(e){this.secure=e,_get(NativeStore.prototype.__proto__||Object.getPrototypeOf(NativeStore.prototype),"_nativeCreate",this).call(this)}},{key:"_getXMLElementName",value:function _getXMLElementName(){return"Storage"}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){return[["length",this.keys.length]]}},{key:"_getXMLContent",value:function _getXMLContent(){var e=this;return this.keys.map(function(t){var r=e._nativeCall("get",{key:t}),n=t.replace(/[^a-zA-Z0-9_.:-]/g,""),i=r.split("\n");return 1===i.length?"  <"+n+">"+r+"</"+n+">":"  <"+n+">\n"+i.map(function(e){return"    "+e}).join("\n")+"\n  </"+n+">"})}},{key:"keys",get:function(){return this._nativeCall("keys")}},{key:"_nativeType",get:function(){return this.secure?"tabris.SecureStore":"tabris.ClientStore"}}]),NativeStore}(),Storage=function(){function Storage(){_classCallCheck(this,Storage);var e=arguments[0];if(!(e instanceof NativeObject))throw new Error("Cannot instantiate Storage");Object.defineProperty(this,"_nativeObject",{value:e})}return _createClass(Storage,[{key:"setItem",value:function setItem(e,t){if(arguments.length<2)throw new TypeError("Not enough arguments to 'setItem'");this._nativeObject._nativeCall("add",{key:encode(e),value:encode(t)})}},{key:"getItem",value:function getItem(e){if(arguments.length<1)throw new TypeError("Not enough arguments to 'getItem'");var t=this._nativeObject._nativeCall("get",{key:encode(e)});return void 0===t?null:t}},{key:"removeItem",value:function removeItem(e){if(arguments.length<1)throw new TypeError("Not enough arguments to 'removeItem'");this._nativeObject._nativeCall("remove",{keys:[encode(e)]})}},{key:"clear",value:function clear(){this._nativeObject._nativeCall("clear")}},{key:"key",value:function key(e){return this._nativeObject.keys[e]||null}},{key:toXML$$1,value:function(){return this._nativeObject[toXML$$1]()}},{key:"length",get:function(){return this._nativeObject.keys.length}}]),Storage}();function encode(e){return""+e}function create$5(e){return new Storage(new NativeStore(e))}var Action=function(e){function Action(){return _classCallCheck(this,Action),_possibleConstructorReturn(this,(Action.__proto__||Object.getPrototypeOf(Action)).apply(this,arguments))}return _inherits(Action,Widget),_createClass(Action,[{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(Action.prototype.__proto__||Object.getPrototypeOf(Action.prototype),"_getXMLAttributes",this).call(this).concat([["title",this.title]])}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t),n=this.withoutChildren(t);return _get(Action.prototype.__proto__||Object.getPrototypeOf(Action.prototype),JSX.jsxFactory,this).call(this,e,this.withContentText(n,r,"title"))}},{key:"_nativeType",get:function(){return"tabris.Action"}}]),Action}();NativeObject.defineProperties(Action.prototype,{image:{type:types.ImageValue,default:null},placement:{type:types.string,choice:["default","navigation","overflow"],default:"default"},title:{type:types.string,default:""}}),NativeObject.defineEvents(Action.prototype,{select:{native:!0}});var Popup=function(e){function Popup(){return _classCallCheck(this,Popup),_possibleConstructorReturn(this,(Popup.__proto__||Object.getPrototypeOf(Popup)).apply(this,arguments))}return _inherits(Popup,NativeObject),_createClass(Popup,[{key:"open",value:function open(){if(this.isDisposed())throw new Error("Can not open a popup that was disposed");return this._nativeCall("open"),this}},{key:"close",value:function close(){return this._autoDispose&&this.dispose(),this}},{key:JSX.jsxFactory,value:function(e,t){return this.createNativeObject(e,t)}}]),Popup}(),ActionSheet=function(e){function ActionSheet(e){_classCallCheck(this,ActionSheet);var t=_possibleConstructorReturn(this,(ActionSheet.__proto__||Object.getPrototypeOf(ActionSheet)).call(this,e));return Object.defineProperties(t,{_index:{enumerable:!1,writable:!0,value:null},_action:{enumerable:!1,writable:!0,value:null}}),t._autoDispose=!0,t._nativeListen("select",!0),t}return _inherits(ActionSheet,Popup),_createClass(ActionSheet,null,[{key:"open",value:function open(e){if(!(e instanceof ActionSheet))throw new Error("Not an ActionSheet: "+toValueString(e));return e.open()}}]),_createClass(ActionSheet,[{key:"_trigger",value:function _trigger(e,t){if("select"===e)this._index=t.index,this._action=this.actions[this._index],_get(ActionSheet.prototype.__proto__||Object.getPrototypeOf(ActionSheet.prototype),"_trigger",this).call(this,"select",Object.assign(t,{action:this._action}));else{if("close"!==e)return _get(ActionSheet.prototype.__proto__||Object.getPrototypeOf(ActionSheet.prototype),"_trigger",this).call(this,e,t);_get(ActionSheet.prototype.__proto__||Object.getPrototypeOf(ActionSheet.prototype),"_trigger",this).call(this,"close",Object.assign(t,{index:this._index,action:this._action})),this.dispose()}}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t)||[],n=this.withoutChildren(t);return n=this.withContentChildren(n,r.filter(function(e){return e instanceof Object}),"actions"),n=this.withContentText(n,r.filter(function(e){return!(e instanceof Object)}),"message"),this.createNativeObject(e,n)}},{key:"_nativeType",get:function(){return"tabris.ActionSheet"}}]),ActionSheet}();NativeObject.defineProperties(ActionSheet.prototype,{title:{type:types.string,default:""},message:{type:types.string,default:""},actions:{type:{convert:function(e){if(!Array.isArray(e))throw new Error(toValueString(e)+" is not an array");return Object.freeze(e.map(ActionSheetItem.from))},encode:function(e){return e.map(function(e){return{title:e.title,image:types.ImageValue.encode(e.image),style:e.style}})}},default:Object.freeze([])}}),NativeObject.defineEvents(ActionSheet.prototype,{close:{native:!0},select:{native:!0}});var ActionSheetItem=function(){function ActionSheetItem(){var{title:e,image:t,style:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,ActionSheetItem),Object.defineProperty(this,"title",{value:types.string.convert(e),enumerable:!0}),Object.defineProperty(this,"image",{value:types.ImageValue.convert(t),enumerable:!0}),Object.defineProperty(this,"style",{value:allowOnlyValues(r||"default",["default","cancel","destructive"],"style"),enumerable:!0})}return _createClass(ActionSheetItem,[{key:"toString",value:function toString(){return this.title||"[object ActionSheetItem]"}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t),n=this.withoutChildren(t);return new e(this.withContentText(n,r,"title"))}}],[{key:"from",value:function from(e){if(e instanceof ActionSheetItem)return e;if(e.constructor!==Object)throw new Error("Can not convert a non-object to an ActionSheetItem");try{return new ActionSheetItem(allowOnlyKeys(e,["title","image","style"]))}catch(e){throw new Error("Can not convert to an ActionSheetItem: "+e.message)}}}]),ActionSheetItem}();Object.defineProperty(ActionSheetItem.prototype,"title",{value:""}),Object.defineProperty(ActionSheetItem.prototype,"image",{value:null}),Object.defineProperty(ActionSheetItem.prototype,"style",{value:"default"});var ActivityIndicator=function(e){function ActivityIndicator(){return _classCallCheck(this,ActivityIndicator),_possibleConstructorReturn(this,(ActivityIndicator.__proto__||Object.getPrototypeOf(ActivityIndicator)).apply(this,arguments))}return _inherits(ActivityIndicator,Widget),_createClass(ActivityIndicator,[{key:"_nativeType",get:function(){return"tabris.ActivityIndicator"}}]),ActivityIndicator}();NativeObject.defineProperties(ActivityIndicator.prototype,{tintColor:{type:"ColorValue",default:"initial"}});var TextInput=function(e){function TextInput(){return _classCallCheck(this,TextInput),_possibleConstructorReturn(this,(TextInput.__proto__||Object.getPrototypeOf(TextInput)).apply(this,arguments))}return _inherits(TextInput,Widget),_createClass(TextInput,[{key:"_getXMLContent",value:function _getXMLContent(){var e=_get(TextInput.prototype.__proto__||Object.getPrototypeOf(TextInput.prototype),"_getXMLContent",this).call(this);return this._shouldPrintTextAsXMLContent()&&(e=e.concat(this.text.split("\n").map(function(e){return"  "+e}))),e}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e=_get(TextInput.prototype.__proto__||Object.getPrototypeOf(TextInput.prototype),"_getXMLAttributes",this).call(this);return"default"!==this.type&&e.push(["type",this.type]),this._shouldPrintTextAsXMLContent()||e.push(["text",this.text]),this.message&&e.push(["message",this.message]),this.editable||e.push(["editable","false"]),this.focused&&e.push(["focused","true"]),this.keepFocus&&e.push(["keepFocus","true"]),e}},{key:"_shouldPrintTextAsXMLContent",value:function _shouldPrintTextAsXMLContent(){return this.text.length>25||-1!==this.text.indexOf("\n")}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t),n=this.withoutChildren(t);return _get(TextInput.prototype.__proto__||Object.getPrototypeOf(TextInput.prototype),JSX.jsxFactory,this).call(this,e,this.withContentText(n,r,"text"))}},{key:"_nativeType",get:function(){return"tabris.TextInput"}}]),TextInput}();NativeObject.defineProperties(TextInput.prototype,{type:{type:types.string,choice:["default","password","search","multiline"],const:!0,default:"default"},style:{type:types.string,choice:["default","outline","fill","underline","none"],const:!0,default:"default"},text:{type:types.string,nocache:!0},message:{type:types.string,default:""},floatMessage:{type:types.boolean,default:!0},editable:{type:types.boolean,default:!0},maxChars:{type:{convert:function(e){return e<=0?null:types.natural.convert(e)}},default:null,nullable:!0},keepFocus:{type:types.boolean,default:!1},alignment:{type:types.string,choice:["left","centerX","right"],default:"left"},autoCorrect:{type:types.boolean,default:!1},autoCapitalize:{type:{convert:function(e){return!0===e?"all":e||"none"}},choice:["none","sentence","word","all"],default:!1},keyboard:{type:types.string,choice:["ascii","decimal","email","number","numbersAndPunctuation","phone","url","default"],default:"default"},enterKeyType:{type:types.string,choice:["default","done","next","send","search","go"],default:"default"},messageColor:{type:types.ColorValue,default:"initial"},focused:{type:types.boolean,nocache:!0},borderColor:{type:types.ColorValue,default:"initial"},textColor:{type:types.ColorValue,default:"initial"},revealPassword:{type:types.boolean,default:!1},cursorColor:{type:types.ColorValue,default:"initial"},selection:{type:{convert:function(e,t){if(!(e instanceof Array)||2!==e.length)throw new Error("Selection has to be a two element array with start and end position but is "+toValueString(e));var r=t.text.length,n=e.map(function(e){return types.number.convert(e)});if(n[1]>r||n[0]>r||n[1]<0||n[0]<0)throw new Error("The selection has to be in the range of 0 to text length [0-"+r+"] but is "+e);return Object.freeze(n)}},nocache:!0},font:{type:types.FontValue,default:"initial"},keyboardAppearanceMode:{type:types.string,choice:["never","ontouch","onfocus"],default:"onfocus"}}),NativeObject.defineEvents(TextInput.prototype,{focus:{native:!0,changes:"focused",changeValue:function(){return!0}},blur:{native:!0,changes:"focused",changeValue:function(){return!1}},accept:{native:!0},input:{native:!0,changes:"text"},select:{native:!0,changes:"selection"}});var layoutDataProps$1=["left","right","top","bottom","width","height","centerX","centerY","baseline"],Layout=function(){function Layout(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments[1];if(_classCallCheck(this,Layout),this.constructor===Layout)throw new Error('Can not create instance of abstract class "Layout"');if(Object.defineProperty(this,"_layoutQueue",{enumerable:!1,writable:!1,value:e||LayoutQueue.instance}),!(this._layoutQueue instanceof LayoutQueue))throw new Error("Not a LayoutQueue: "+this._layoutQueue);Object.defineProperties(this,{_handleAddChildEvent:{enumerable:!1,writable:!1,value:this._handleAddChildEvent.bind(this)},_handleRemoveChildEvent:{enumerable:!1,writable:!1,value:this._handleRemoveChildEvent.bind(this)},_handleChildPropertyChangedEvent:{enumerable:!1,writable:!1,value:this._handleChildPropertyChangedEvent.bind(this)},_getLayoutData:{enumerable:!1,writable:!1,value:this._getLayoutData.bind(this)},_renderLayoutData:{enumerable:!1,writable:!1,value:this._renderLayoutData.bind(this)},_addChild:{enumerable:!1,writable:!1,value:this._addChild.bind(this)},_removeChild:{enumerable:!1,writable:!1,value:this._removeChild.bind(this)}})}return _createClass(Layout,[{key:"add",value:function add(e){if(!e||e.layout!==this)throw new Error("Invalid layout target "+toValueString(e)+". Do not call layout.add directly.");e.on({addChild:this._handleAddChildEvent,removeChild:this._handleRemoveChildEvent}),e.$children&&e.$children.forEach(this._addChild),this._layoutQueue.add(e)}},{key:"remove",value:function remove(e){e.off({addChild:this._handleAddChildEvent,removeChild:this._handleRemoveChildEvent}),e.$children&&e.$children.forEach(this._removeChild)}},{key:"render",value:function render(e){var t=getChildrenInLayout(e);if(t.length){var r=t.map(this._getLayoutData);this._renderLayoutData(t,r)}}},{key:"_handleAddChildEvent",value:function _handleAddChildEvent(e){var{child:t}=e;this._addChild(t),this._layoutQueue.add(t._parent)}},{key:"_handleRemoveChildEvent",value:function _handleRemoveChildEvent(e){var{child:t}=e;this._removeChild(t),this._layoutQueue.add(t._parent)}},{key:"_addChild",value:function _addChild(e){e.on({layoutDataChanged:this._handleChildPropertyChangedEvent,excludeFromLayoutChanged:this._handleChildPropertyChangedEvent})}},{key:"_removeChild",value:function _removeChild(e){e.off({layoutDataChanged:this._handleChildPropertyChangedEvent,excludeFromLayoutChanged:this._handleChildPropertyChangedEvent})}},{key:"_handleChildPropertyChangedEvent",value:function _handleChildPropertyChangedEvent(e){var{target:t}=e;this._layoutQueue.add(t._parent)}},{key:"_renderLayoutData",value:function _renderLayoutData(e,t){for(var r=0;r<e.length;r++){var n=this._resolveAttributes(t[r],e[r]);e[r]._nativeSet("layoutData",n)}}},{key:"_getLayoutData",value:function _getLayoutData(e,t){var r=e.layoutData;"auto"!==r.centerX&&("auto"===r.left&&"auto"===r.right||(warn("Inconsistent layoutData: centerX overrides left and right.\nTarget: "+getPath(e)),r=makeAuto(r,"left","right"))),"auto"!==r.baseline?"auto"===r.top&&"auto"===r.bottom&&"auto"===r.centerY||(warn("Inconsistent layoutData: baseline overrides top, bottom, and centerY.\nTarget: "+getPath(e)),r=makeAuto(r,"top","bottom","centerY")):"auto"!==r.centerY&&("auto"===r.top&&"auto"===r.bottom||(warn("Inconsistent layoutData: centerY overrides top and bottom.\nTarget: "+getPath(e)),r=makeAuto(r,"top","bottom"))),"auto"!==r.left&&"auto"!==r.right&&"auto"!==r.width&&(warn("Inconsistent layoutData: left and right are set, ignore width.\nTarget: "+getPath(e)),r=makeAuto(r,"width")),"auto"!==r.top&&"auto"!==r.bottom&&"auto"!==r.height&&(warn("Inconsistent layoutData: top and bottom are set, ignore height.\nTarget: "+getPath(e)),r=makeAuto(r,"height"));var n=["left","top","right","bottom"].find(function(e){return r[e].offset&&r[e].offset<0});if(n){warn("Negative edge offsets are not supported. Setting "+n+" to 0.\nTarget: "+getPath(e));var i=Object.assign({},r[n],{offset:0});r=LayoutData.from(Object.assign({},r,_defineProperty({},n,i)))}return r}},{key:"_resolveAttributes",value:function _resolveAttributes(e,t){for(var r={},n=0;n<layoutDataProps$1.length;n++){var i=layoutDataProps$1[n];i in e&&"auto"!==e[i]&&(r[i]=resolveAttribute(e[i],t))}return r}}]),Layout}(),ConstraintLayout=function(e){function ConstraintLayout(){return _classCallCheck(this,ConstraintLayout),_possibleConstructorReturn(this,(ConstraintLayout.__proto__||Object.getPrototypeOf(ConstraintLayout)).apply(this,arguments))}return _inherits(ConstraintLayout,Layout),_createClass(ConstraintLayout,null,[{key:"default",get:function(){return this._default||Object.defineProperty(this,"_default",{enumerable:!1,writable:!0,configurable:!0,value:new ConstraintLayout}),this._default}}]),ConstraintLayout}(),LayoutQueue=function(){function LayoutQueue(){_classCallCheck(this,LayoutQueue),Object.defineProperties(this,{_map:{enumerable:!1,writable:!0,value:{}},_inFlush:{enumerable:!1,writable:!0,value:!1}})}return _createClass(LayoutQueue,null,[{key:"instance",get:function(){var e=this;return this._instance||(Object.defineProperty(this,"_instance",{enumerable:!1,writable:!0,configurable:!0,value:new LayoutQueue}),tabris.on("layout",function(){return e._instance.flush()})),this._instance}}]),_createClass(LayoutQueue,[{key:"add",value:function add(e){this._map[e.cid]=e}},{key:"flush",value:function flush(){if(this._inFlush)throw new Error("flush in flush");for(var e in this._inFlush=!0,this._map)!this._map[e]._isDisposed&&this._map[e].layout&&this._map[e].layout.render(this._map[e]);this._map={},this._inFlush=!1}}]),LayoutQueue}();function isValidConstraint(e){return"auto"===e||e.reference instanceof Percent&&0===e.reference.percent}function layoutWarn(e,t,r){warn('Unsupported value for "'+t+'": '+r+"\nTarget: "+getPath(e))}function getPath(e){for(var t=[e],r=e.parent();r;)t.unshift(r),r=r.parent();return t.join(" > ")}function maxPositive(e,t){return e<0||t<0?0:Math.max(0,Math.max(e,t))}function resolveAttribute(e,t){return e instanceof Constraint?resolveConstraint(e,t):isNumber(e)?e:toCid$1(e,t)}function resolveConstraint(e,t){return e.reference instanceof Percent?0===e.reference.percent?e.offset:[e.reference.percent,e.offset]:[toCid$1(e.reference,t),e.offset]}function toCid$1(e,t){if(e===LayoutData.prev){var r=getChildrenInLayout(getParent(t)),n=r.indexOf(t);return n>0&&types.Widget.encode(r[n-1])||0}if(e===LayoutData.next){var i=getChildrenInLayout(getParent(t)),o=i.indexOf(t);return o+1<i.length&&types.Widget.encode(i[o+1])||0}if("string"==typeof e){var a=t.siblings(e)[0];return types.Widget.encode(a)||0}return t.siblings().toArray().includes(e)&&types.Widget.encode(e)||0}function isNumber(e){return"number"==typeof e&&isFinite(e)}function getParent(e){return e.parent()||emptyParent}function makeAuto(e){for(var t={},r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var o=0;o<n.length;o++)t[n[o]]="auto";return LayoutData.from(Object.assign({},e,t))}function getChildrenInLayout(e){return e.$children?e.$children.filter(notExcluded$1):[]}function notExcluded$1(e){return!e.excludeFromLayout}var emptyParent={children:function(){return[]}},Composite=function(e){function Composite(){return _classCallCheck(this,Composite),_possibleConstructorReturn(this,(Composite.__proto__||Object.getPrototypeOf(Composite)).apply(this,arguments))}return _inherits(Composite,Widget),_createClass(Composite,[{key:"append",value:function append(){var e=this;this._checkDisposed();var t=function(t){if(!(t instanceof NativeObject))throw new Error("Cannot append non-widget "+toValueString(t)+" to "+e);if(t===e)throw new Error("Cannot append widget "+e+" to itself");t._setParent(e)};return arguments[0]instanceof WidgetCollection?arguments[0].toArray().forEach(t):Array.isArray(arguments[0])?arguments[0].forEach(t):Array.prototype.forEach.call(arguments,t),this}},{key:"find",value:function find(e){return new WidgetCollection(this.children(),{selector:e,origin:this,deep:!0})}},{key:"apply",value:function apply(e){var t=new WidgetCollection(asArray(this.children()).concat(this),{selector:"*",origin:this,deep:!0});return this._apply(e,t)}},{key:"children",value:function children(e){return this._children(e)}},{key:"set",value:function set(e){if("children"in e&&!(e.children instanceof Function))throw new Error("You may not override children with a non-function");return _get(Composite.prototype.__proto__||Object.getPrototypeOf(Composite.prototype),"set",this).call(this,e)}},{key:"_nativeCreate",value:function _nativeCreate(e){_get(Composite.prototype.__proto__||Object.getPrototypeOf(Composite.prototype),"_nativeCreate",this).call(this,omit(e||{},["layout"])),this._initLayout(e)}},{key:"_initLayout",value:function _initLayout(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"layout"in e?e.layout?Object.defineProperty(this,"_layout",{enumerable:!1,writable:!1,value:e.layout}):Object.defineProperty(this,"_layout",{enumerable:!1,writable:!1,value:null}):Object.defineProperty(this,"_layout",{enumerable:!1,writable:!1,value:ConstraintLayout.default}),this._layout&&(this._checkLayout(this._layout),this._layout.add(this))}},{key:"_children",value:function _children(e){return new WidgetCollection(this.$children,{selector:e,origin:this})}},{key:"_find",value:function _find(e){return new WidgetCollection(this._children(),{selector:e,origin:this,deep:!0})}},{key:"_apply",value:function _apply(e,t){var r=this;return 1===arguments.length&&(t=new WidgetCollection(asArray(this._children()).concat(this),{selector:"*",origin:this,deep:!0})),Object.keys(e).map(function(t){return[createSelectorArray(t,r),e[t]]}).sort(function(e,t){return getSelectorSpecificity(e[0])-getSelectorSpecificity(t[0])}).forEach(function(e){t.filter(e[0]).set(e[1])}),this}},{key:"_acceptChild",value:function _acceptChild(e){return!0}},{key:"_checkLayout",value:function _checkLayout(e){if(e&&!(e instanceof Layout))throw new Error(toValueString(e)+" is not an instance of Layout")}},{key:"_addChild",value:function _addChild(e,t){if(!this._acceptChild(e))throw new Error(toValueString(e)+" could not be appended to "+this);this.$children||Object.defineProperties(this,{$children:{enumerable:!1,writable:!0,value:[]}}),"number"==typeof t?this.$children.splice(t,0,e):t=this.$children.push(e)-1,this._scheduleRenderChildren(),_get(Composite.prototype.__proto__||Object.getPrototypeOf(Composite.prototype),"_trigger",this).call(this,"addChild",{child:e,index:t})}},{key:"_removeChild",value:function _removeChild(e){if(this.$children){var t=this.$children.indexOf(e);-1!==t&&(this.$children.splice(t,1),this._scheduleRenderChildren(),_get(Composite.prototype.__proto__||Object.getPrototypeOf(Composite.prototype),"_trigger",this).call(this,"removeChild",{child:e,index:t}))}}},{key:"_release",value:function _release(){if(this.$children){for(var e=this.$children.concat(),t=0;t<e.length;t++)e[t]._dispose(!0);this.$children=void 0}this._layout&&this._layout.remove(this),_get(Composite.prototype.__proto__||Object.getPrototypeOf(Composite.prototype),"_release",this).call(this)}},{key:"_getXMLContent",value:function _getXMLContent(){for(var e=_get(Composite.prototype.__proto__||Object.getPrototypeOf(Composite.prototype),"_getXMLContent",this).call(this),t=0;t<(this.$children||[]).length;++t)e.push(this.$children[t][toXML$$1]().split("\n").map(function(e){return"  "+e}).join("\n"));return e}},{key:"_scheduleRenderChildren",value:function _scheduleRenderChildren(){tabris.once("layout",this.$flushChildren,this)}},{key:"$flushChildren",value:function $flushChildren(){this.$children&&this._nativeSet("children",this.$children.filter(notExcluded).map(toCid))}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t),n=this.withoutChildren(t),i=_get(Composite.prototype.__proto__||Object.getPrototypeOf(Composite.prototype),JSX.jsxFactory,this).call(this,e,n);return r&&r.length&&i.append(r),i}},{key:"layout",get:function(){return this._layout},set:function(e){hint(this,'Can not set read-only property "layout"')}},{key:"_nativeType",get:function(){return"tabris.Composite"}}]),Composite}();function asArray(e){return e?e instanceof WidgetCollection?e.toArray():e:[]}function toCid(e){return e.cid}function notExcluded(e){return!e.excludeFromLayout}var ContentView=function(e){function ContentView(){return _classCallCheck(this,ContentView),_possibleConstructorReturn(this,(ContentView.__proto__||Object.getPrototypeOf(ContentView)).apply(this,arguments))}return _inherits(ContentView,Composite),_createClass(ContentView,[{key:"_nativeCreate",value:function _nativeCreate(e){if(!e||!0!==e[creationAllowed])throw new Error("ContentView can not be created");Object.defineProperties(this,{_childType:{enumerable:!1,writable:!1,value:e.childType},_phantom:{enumerable:!1,writable:!1,value:e.phantom}}),delete e[creationAllowed],delete e.childType,delete e.phantom,this._phantom?(this._register(),this._initLayout(e)):_get(ContentView.prototype.__proto__||Object.getPrototypeOf(ContentView.prototype),"_nativeCreate",this).call(this,e)}},{key:"_nativeSet",value:function _nativeSet(e,t){this._phantom||_get(ContentView.prototype.__proto__||Object.getPrototypeOf(ContentView.prototype),"_nativeSet",this).call(this,e,t)}},{key:"_nativeGet",value:function _nativeGet(e){if(!this._phantom)return _get(ContentView.prototype.__proto__||Object.getPrototypeOf(ContentView.prototype),"_nativeGet",this).call(this,e)}},{key:"_nativeListen",value:function _nativeListen(e,t){if(!this._phantom)return _get(ContentView.prototype.__proto__||Object.getPrototypeOf(ContentView.prototype),"_nativeListen",this).call(this,e,t)}},{key:"_nativeCall",value:function _nativeCall(e,t){if(!this._phantom)return _get(ContentView.prototype.__proto__||Object.getPrototypeOf(ContentView.prototype),"_nativeCall",this).call(this,e,t)}},{key:"_acceptChild",value:function _acceptChild(e){return!this._childType||e instanceof this._childType}},{key:"_setParent",value:function _setParent(e,t){if(this._parent)throw new Error("Parent of ContentView can not be changed");_get(ContentView.prototype.__proto__||Object.getPrototypeOf(ContentView.prototype),"_setParent",this).call(this,e,t)}},{key:"_dispose",value:function _dispose(){throw new Error("ContentView can not be disposed")}}]),ContentView}();function create$6(e){return new ContentView(Object.assign(_defineProperty({},creationAllowed,!0),e))}var AlertDialog=function(e){function AlertDialog(e){_classCallCheck(this,AlertDialog);var t=_possibleConstructorReturn(this,(AlertDialog.__proto__||Object.getPrototypeOf(AlertDialog)).call(this,e));return t._nativeListen("close",!0),t._autoDispose=!0,t}return _inherits(AlertDialog,Popup),_createClass(AlertDialog,null,[{key:"open",value:function open(e){return(e instanceof AlertDialog?e:new AlertDialog({message:e,buttons:{ok:"OK"}})).open()}}]),_createClass(AlertDialog,[{key:"open",value:function open(){return!this.isDisposed()&&this._contentView&&this._nativeSet("textInputs",this._contentView.children().toArray().map(function(e){return e.cid})),_get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),"open",this).call(this)}},{key:"_trigger",value:function _trigger(e,t){if("close"!==e)return _get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),"_trigger",this).call(this,e,t);t.button=t.button||null,t.texts=[],this._contentView&&(t.texts=this._contentView.children().toArray().map(function(e){return e.text})),t.button&&_get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),"_trigger",this).call(this,"close"+capitalizeFirstChar(t.button),t),_get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),"_trigger",this).call(this,"close",t),this.dispose()}},{key:"_dispose",value:function _dispose(){!this.isDisposed()&&this._contentView&&Composite.prototype._dispose.call(this._contentView,!0),_get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),"_dispose",this).call(this)}},{key:"_nativeType",get:function(){return"tabris.AlertDialog"}},{key:"textInputs",get:function(){return this._contentView||Object.defineProperty(this,"_contentView",{enumerable:!1,writable:!1,value:create$6({layout:null,childType:TextInput,phantom:!0})}),this._contentView},set:function(e){hint(this,'Property "textInputs" can not be set, append to it instead')}}]),AlertDialog}();function createElement$2(e,t){var r=this.getChildren(t)||[],n=this.withoutChildren(t);n=this.withContentText(n,r.filter(function(e){return!(e instanceof Object)}),"message");var i=r.filter(function(e){return e instanceof Object}),o=Popup.prototype[JSX.jsxFactory].call(this,e,n);return r&&r.length&&o.textInputs.append(i),o}NativeObject.defineProperties(AlertDialog.prototype,{title:{type:types.string,default:""},message:{type:types.string,default:""},buttons:{type:{convert:function(e){allowOnlyKeys(e,["ok","cancel","neutral"]);var t={};return"ok"in e&&(t.ok=e.ok+""),"cancel"in e&&(t.cancel=e.cancel+""),"neutral"in e&&(t.neutral=e.neutral+""),Object.freeze(t)}},default:Object.freeze({})}}),NativeObject.defineEvents(AlertDialog.prototype,{close:!0,closeOk:!0,closeCancel:!0,closeNeutral:!0}),AlertDialog.prototype[JSX.jsxFactory]=createElement$2;var Button=function(e){function Button(e){return _classCallCheck(this,Button),_possibleConstructorReturn(this,(Button.__proto__||Object.getPrototypeOf(Button)).call(this,Object.assign({style:"default"},e)))}return _inherits(Button,Widget),_createClass(Button,[{key:"_reorderProperties",value:function _reorderProperties(e){var t=e.indexOf("style");return-1===t?_get(Button.prototype.__proto__||Object.getPrototypeOf(Button.prototype),"_reorderProperties",this).call(this,e):_get(Button.prototype.__proto__||Object.getPrototypeOf(Button.prototype),"_reorderProperties",this).call(this,["style"].concat(e.slice(0,t)).concat(e.slice(t+1)))}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(Button.prototype.__proto__||Object.getPrototypeOf(Button.prototype),"_getXMLAttributes",this).call(this).concat([["text",this.text]])}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t),n=this.withoutChildren(t);return _get(Button.prototype.__proto__||Object.getPrototypeOf(Button.prototype),JSX.jsxFactory,this).call(this,e,this.withContentText(n,r,"text"))}},{key:"_nativeType",get:function(){return"tabris.Button"}}]),Button}();NativeObject.defineProperties(Button.prototype,{style:{type:types.string,choice:["default","elevate","flat","outline","text"],default:"default",const:!0},strokeColor:{type:{convert:function(e,t){if("outline"!==t.style)throw new Error('The strokeColor can only be set on buttons with style "outline" but it has style '+t.style+".");return types.ColorValue.convert(e)},encode:types.ColorValue.encode},default:"initial"},strokeWidth:{type:{convert:function(e,t){if("outline"!==t.style)throw new Error('The strokeWidth can only be set on buttons with style "outline" but it has style '+t.style+".");return types.dimension.convert(e)}},nullable:!0,default:null},alignment:{type:types.string,choice:["left","right","centerX"],default:"centerX"},autoCapitalize:{type:types.string,choice:["default","none","all"],default:"default"},image:{type:types.ImageValue,default:null},imageTintColor:{type:types.ColorValue,default:"initial"},text:{type:types.string,default:""},textColor:{type:types.ColorValue,default:"initial"},font:{type:types.FontValue,default:"initial"}}),NativeObject.defineEvents(Button.prototype,{select:{native:!0}});var ImageData=function ImageData(){if(_classCallCheck(this,ImageData),arguments.length<2)throw new TypeError("Not enough arguments to ImageData");var e=void 0,t=void 0,r=void 0;if(arguments[0]instanceof Uint8ClampedArray){if(e=checkArray(arguments[0]),t=checkSize(arguments[1]),r=arguments.length>2?checkSize(arguments[2]):e.byteLength/4/t,e.byteLength!==t*r*4)throw new Error("Wrong array size")}else t=checkSize(arguments[0]),r=checkSize(arguments[1]),e=new Uint8ClampedArray(t*r*4);Object.defineProperties(this,{data:{value:e},width:{value:t},height:{value:r}})};function checkArray(e){if(e.byteLength%4!=0)throw new Error("Illegal array length");return e}function checkSize(e){var t=Math.floor(e);if(t<=0||!isFinite(t))throw new Error("Illegal size for ImageData");return t}Object.defineProperty(ImageData.prototype,"data",{value:null}),Object.defineProperty(ImageData.prototype,"width",{value:0}),Object.defineProperty(ImageData.prototype,"height",{value:0});var OPCODES={arc:1,arcTo:2,beginPath:3,bezierCurveTo:4,clearRect:5,closePath:6,fill:7,fillRect:8,fillStyle:9,fillText:10,lineCap:11,lineJoin:12,lineTo:13,lineWidth:14,moveTo:15,quadraticCurveTo:16,rect:17,restore:18,rotate:19,save:20,scale:21,setTransform:22,stroke:23,strokeRect:24,strokeStyle:25,strokeText:26,textAlign:27,textBaseline:28,transform:29,translate:30,font:31,drawImage:32},GC=function(e){function GC(e){_classCallCheck(this,GC);var t=_possibleConstructorReturn(this,(GC.__proto__||Object.getPrototypeOf(GC)).call(this,e));Object.defineProperties(t,{_operations:{enumerable:!1,writable:!0,value:[]},_doubles:{enumerable:!1,writable:!0,value:[]},_booleans:{enumerable:!1,writable:!0,value:[]},_strings:{enumerable:!1,writable:!0,value:[]},_ints:{enumerable:!1,writable:!0,value:[]}});var r=function(){return t.flush()};return tabris.on("flush",r),t.on("dispose",function(){return tabris.off("flush",r)}),t}return _inherits(GC,NativeObject),_createClass(GC,[{key:"init",value:function init(e){this._nativeCall("init",e)}},{key:"getImageData",value:function getImageData(e,t,r,n){var i=this._nativeCall("getImageData",{x:e,y:t,width:r,height:n});return i instanceof Uint8ClampedArray?i:new Uint8ClampedArray(i)}},{key:"putImageData",value:function putImageData(e,t,r){this._nativeCall("putImageData",{data:e.data,width:e.width,height:e.height,x:t,y:r})}},{key:"addOperation",value:function addOperation(e){var t=OPCODES[e];if(!t)throw new Error("Invalid operation");this._operations.push(t)}},{key:"addBoolean",value:function addBoolean(){Array.prototype.push.apply(this._booleans,arguments)}},{key:"addDouble",value:function addDouble(){Array.prototype.push.apply(this._doubles,arguments)}},{key:"addInt",value:function addInt(){Array.prototype.push.apply(this._ints,arguments)}},{key:"addString",value:function addString(){Array.prototype.push.apply(this._strings,arguments)}},{key:"flush",value:function flush(){this._operations.length>0&&(this._nativeCall("draw",{packedOperations:[this._operations,this._doubles,this._booleans,this._strings,this._ints]}),this._operations=[],this._doubles=[],this._booleans=[],this._strings=[],this._ints=[])}},{key:"_nativeType",get:function(){return"tabris.GC"}}]),GC}();NativeObject.defineProperties(GC.prototype,{parent:{type:types.Widget,default:null}});var ImageBitmap=function(){function ImageBitmap(e,t){if(_classCallCheck(this,ImageBitmap),!(e instanceof _ImageBitmap))throw new TypeError("Illegal constructor");setNativeObject(this,e),Object.defineProperty(this,"width",{value:t.width}),Object.defineProperty(this,"height",{value:t.height})}return _createClass(ImageBitmap,null,[{key:"createImageBitmap",value:function createImageBitmap(e){return 1!==arguments.length?Promise.reject(new TypeError(arguments.length+" is not a valid argument count for any overload of createImageBitmap.")):e instanceof Blob?load(function(t){return t.loadEncodedImage(getBytes(e))}):e instanceof ImageData?load(function(t){return t.loadImageData(e.data,e.width,e.height)}):e instanceof ImageBitmap?getNativeObject(e).isDisposed()?Promise.reject(new TypeError("Can not create ImageBitmap from another closed ImageBitmap")):load(function(t){return t.loadImageBitmap(getNativeObject(e).cid)}):e instanceof Canvas?e.isDisposed()?Promise.reject(new TypeError("Can not create ImageBitmap from a disposed Canvas")):load(function(t){return t.loadCanvas(e)}):Promise.reject(new TypeError("Argument 1 of createImageBitmap could not be converted to any of: Blob, ImageData, ImageBitmap, Canvas."))}}]),_createClass(ImageBitmap,[{key:"close",value:function close(){getNativeObject(this).isDisposed()||getNativeObject(this).dispose()}}]),ImageBitmap}();Object.defineProperty(ImageBitmap.prototype,"width",{value:0}),Object.defineProperty(ImageBitmap.prototype,"height",{value:0});var _ImageBitmap=function(e){function _ImageBitmap(){return _classCallCheck(this,_ImageBitmap),_possibleConstructorReturn(this,(_ImageBitmap.__proto__||Object.getPrototypeOf(_ImageBitmap)).apply(this,arguments))}return _inherits(_ImageBitmap,NativeObject),_createClass(_ImageBitmap,[{key:"loadEncodedImage",value:function loadEncodedImage(e){var t=this;return new Promise(function(r,n){return t._nativeCall("loadEncodedImage",{image:e,onSuccess:r,onError:n})})}},{key:"loadImageData",value:function loadImageData(e,t,r){var n=this;return new Promise(function(i,o){return n._nativeCall("loadImageData",{image:e,width:t,height:r,onSuccess:i,onError:o})})}},{key:"loadImageBitmap",value:function loadImageBitmap(e){var t=this;return new Promise(function(r,n){return t._nativeCall("loadImageBitmap",{image:e,onSuccess:r,onError:n})})}},{key:"loadCanvas",value:function loadCanvas(e){var t=this;return new Promise(function(r,n){e._ctx&&e._ctx._gc.flush(),t._nativeCall("loadCanvas",{image:e.cid,onSuccess:r,onError:n})})}},{key:"_nativeType",get:function(){return"tabris.ImageBitmap"}}]),_ImageBitmap}();function load(e){var t=new _ImageBitmap;return e(t).then(function(e){var r=new ImageBitmap(t,e);return Object.defineProperty(r,"wrapper",{value:r}),r}).catch(function(e){throw t.dispose(),new Error(e)})}Object.defineProperty(_ImageBitmap.prototype,"wrapper",{value:null});var CanvasContext=function(){function CanvasContext(e){for(var t in _classCallCheck(this,CanvasContext),Object.defineProperties(this,{_gc:{enumerable:!1,writable:!1,value:e},_state:{enumerable:!1,writable:!0,value:createState()},_savedStates:{enumerable:!1,writable:!1,value:[]}}),this.canvas={width:0,height:0,style:{}},properties)defineProperty(this,t)}return _createClass(CanvasContext,[{key:"measureText",value:function measureText(e){return{width:5*e.length+5}}},{key:"getImageData",value:function getImageData(e,t,r,n){checkRequiredArgs(arguments,4,"CanvasContext.getImageData"),this._gc.flush();var i=this._gc.getImageData(e,t,r,n);return new ImageData(i,r,n)}},{key:"putImageData",value:function putImageData(e,t,r){checkRequiredArgs(arguments,3,"CanvasContext.putImageData"),this._gc.flush(),this._gc.putImageData(e,t,r)}},{key:"createImageData",value:function createImageData(e,t){if(arguments[0]instanceof ImageData){var r=arguments[0];e=r.width,t=r.height}else checkRequiredArgs(arguments,2,"CanvasContext.createImageData");return new ImageData(e,t)}},{key:"_init",value:function _init(e,t){this.canvas.width=e,this.canvas.height=t,this._gc.init({width:e,height:t})}}]),CanvasContext}();defineMethod("save",0,function(){this._savedStates.push(Object.assign({},this._state))}),defineMethod("restore",0,function(){this._state=this._savedStates.pop()||this._state}),defineMethod("beginPath"),defineMethod("closePath"),defineMethod("lineTo",2,function(e,t){this._gc.addDouble(e,t)}),defineMethod("moveTo",2,function(e,t){this._gc.addDouble(e,t)}),defineMethod("bezierCurveTo",6,function(e,t,r,n,i,o){this._gc.addDouble(e,t,r,n,i,o)}),defineMethod("quadraticCurveTo",4,function(e,t,r,n){this._gc.addDouble(e,t,r,n)}),defineMethod("rect",4,function(e,t,r,n){this._gc.addDouble(e,t,r,n)}),defineMethod("arc",5,function(e,t,r,n,i,o){this._gc.addDouble(e,t,r,n,i),this._gc.addBoolean(!!o)}),defineMethod("arcTo",5,function(e,t,r,n,i){this._gc.addDouble(e,t,r,n,i)}),defineMethod("scale",2,function(e,t){this._gc.addDouble(e,t)}),defineMethod("rotate",1,function(e){this._gc.addDouble(e)}),defineMethod("translate",2,function(e,t){this._gc.addDouble(e,t)}),defineMethod("transform",6,function(e,t,r,n,i,o){this._gc.addDouble(e,t,r,n,i,o)}),defineMethod("setTransform",6,function(e,t,r,n,i,o){this._gc.addDouble(e,t,r,n,i,o)}),defineMethod("clearRect",4,function(e,t,r,n){this._gc.addDouble(e,t,r,n)}),defineMethod("fillRect",4,function(e,t,r,n){this._gc.addDouble(e,t,r,n)}),defineMethod("strokeRect",4,function(e,t,r,n){this._gc.addDouble(e,t,r,n)}),defineMethod("fillText",3,function(e,t,r){this._gc.addString(e),this._gc.addBoolean(!1,!1,!1),this._gc.addDouble(t,r)}),defineMethod("strokeText",3,function(e,t,r){this._gc.addString(e),this._gc.addBoolean(!1,!1,!1),this._gc.addDouble(t,r)}),defineMethod("fill"),defineMethod("stroke"),defineMethod("drawImage",3,function(e,t,r,n,i,o,a,s,l){if(!(e instanceof ImageBitmap))throw new TypeError("First argument of CanvasContext.drawImage must be of type ImageBitmap");if(this._gc.addString(getNativeObject(e).cid),9===arguments.length)this._gc.addDouble(t,r,n,i,o,a,s,l);else if(5===arguments.length)this._gc.addDouble(0,0,e.width,e.height,t,r,n,i);else{if(3!==arguments.length)throw new TypeError(arguments.length+" is not a valid argument count for any overload of Canvas.drawImage.");this._gc.addDouble(0,0,e.width,e.height,t,r,e.width,e.height)}}),CanvasContext.getContext=function(e,t,r){return e._gc||Object.defineProperty(e,"_gc",{enumerable:!1,writable:!1,value:new GC({parent:e})}),e._ctx||Object.defineProperty(e,"_ctx",{enumerable:!1,writable:!1,value:new CanvasContext(e._gc)}),e._ctx._init(t,r),e._ctx};var properties={lineWidth:{init:1,encode:function(e){if(!isNaN(e)&&e>0)return e;throw new Error("Invalid value "+toValueString(e))},decode:passThrough,addOperations:function(e){this._gc.addDouble(e)}},lineCap:{init:"butt",values:toObject(["butt","round","square"]),encode:checkValue,decode:passThrough,addOperations:function(e){this._gc.addString(e)}},lineJoin:{init:"miter",values:toObject(["bevel","miter","round"]),encode:checkValue,decode:passThrough,addOperations:function(e){this._gc.addString(e)}},fillStyle:{init:[0,0,0,255],encode:function(e){return Color.from(e).toArray()},decode:colorArrayToString,addOperations:function(e){this._gc.addInt(e[0],e[1],e[2],e[3])}},strokeStyle:{init:[0,0,0,255],encode:function(e){return Color.from(e).toArray()},decode:colorArrayToString,addOperations:function(e){this._gc.addInt(e[0],e[1],e[2],e[3])}},textAlign:{init:"start",values:toObject(["start","end","left","right","center"]),encode:checkValue,decode:passThrough,addOperations:function(e){this._gc.addString(e)}},textBaseline:{init:"alphabetic",values:toObject(["top","hanging","middle","alphabetic","ideographic","bottom"]),encode:checkValue,decode:passThrough,addOperations:function(e){this._gc.addString(e)}},font:{init:{family:["sans-serif"],size:12,weight:"normal",style:"normal"},encode:fontStringToObject,decode:fontObjectToString,addOperations:function(e){this._gc.addString(e.family.join(", "),e.style,e.weight),this._gc.addDouble(e.size)}}};function passThrough(e){return e}function checkValue(e){if(e in this.values)return e;throw new Error("Invalid value "+toValueString(e))}function toObject(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function createState(){var e={};for(var t in properties)e[t]=properties[t].init;return e}function defineMethod(e,t,r){CanvasContext.prototype[e]=function(){checkRequiredArgs(arguments,t,"CanvasContext."+e),this._gc.addOperation(e),r&&r.apply(this,arguments)}}function defineProperty(e,t){var r=properties[t];Object.defineProperty(e,t,{get:function(){return r.decode(e._state[t])},set:function(n){try{e._state[t]=r.encode(n),e._gc.addOperation(t),r.addOperations.call(e,e._state[t])}catch(r){hint(e,"Unsupported value for "+t+": "+n)}}})}function checkRequiredArgs(e,t,r){if(e.length<t)throw new Error("Not enough arguments to "+r)}var MIME_TYPES=Object.freeze({"image/png":"image/png","image/jpeg":"image/jpeg","image/webp":"image/webp"}),TYPE_QUALITY=Object.freeze({"image/png":1,"image/jpeg":.92,"image/webp":.8}),Canvas=function(e){function Canvas(){return _classCallCheck(this,Canvas),_possibleConstructorReturn(this,(Canvas.__proto__||Object.getPrototypeOf(Canvas)).apply(this,arguments))}return _inherits(Canvas,Composite),_createClass(Canvas,[{key:"getContext",value:function getContext(e,t,r){return"2d"===e?CanvasContext.getContext(this,t,r):null}},{key:"toBlob",value:function toBlob(e,t,r){if(0===arguments.length)throw new TypeError("Canvas.toBlob requires at least 1 argument, but only 0 were passed");if(!(e instanceof Function))throw new TypeError("Argument 1 of Canvas.toBlob is not a function");this._ctx&&this._ctx._gc.flush();var n="number"==typeof r&&!isNaN(r)&&r>=0&&r<=1,i=MIME_TYPES["string"==typeof t?t:""]||MIME_TYPES["image/png"];this._nativeCall("toBlob",{onSuccess:createNativeCallback(function(t,r){if(t){var n=new Blob([],{type:r});setBytes(n,t),e(n)}else e(null)}),mimeType:i,quality:n?r:TYPE_QUALITY[i]})}},{key:"_nativeType",get:function(){return"tabris.Canvas"}}]),Canvas}(),CheckBox=function(e){function CheckBox(){return _classCallCheck(this,CheckBox),_possibleConstructorReturn(this,(CheckBox.__proto__||Object.getPrototypeOf(CheckBox)).apply(this,arguments))}return _inherits(CheckBox,Widget),_createClass(CheckBox,[{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(CheckBox.prototype.__proto__||Object.getPrototypeOf(CheckBox.prototype),"_getXMLAttributes",this).call(this).concat([["text",this.text],["checked",this.checked]])}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t),n=this.withoutChildren(t);return _get(CheckBox.prototype.__proto__||Object.getPrototypeOf(CheckBox.prototype),JSX.jsxFactory,this).call(this,e,this.withContentText(n,r,"text"))}},{key:"_nativeType",get:function(){return"tabris.CheckBox"}}]),CheckBox}();NativeObject.defineProperties(CheckBox.prototype,{text:{type:"string",default:""},checked:{type:"boolean",nocache:!0},textColor:{type:"ColorValue",default:"initial"},tintColor:{type:"ColorValue",default:"initial"},checkedTintColor:{type:"ColorValue",default:"initial"},font:{type:"FontValue",default:"initial"}}),NativeObject.defineEvents(CheckBox.prototype,{select:{native:!0,changes:"checked"}});var CollectionView=function(e){function CollectionView(e){_classCallCheck(this,CollectionView);var t=_possibleConstructorReturn(this,(CollectionView.__proto__||Object.getPrototypeOf(CollectionView)).call(this));return Object.defineProperties(t,{_needsReload:{enumerable:!1,writable:!0,value:!1},_updateCell:{enumerable:!1,writable:!0,value:function(){}},_itemCount:{enumerable:!1,writable:!0,value:0},_createCell:{enumerable:!1,writable:!0,value:function(){return new Composite}},_cellHeight:{enumerable:!1,writable:!0,value:"auto"},_cellType:{enumerable:!1,writable:!0,value:null},_cellMapping:{enumerable:!1,writable:!0,value:new Map},_itemMapping:{enumerable:!1,writable:!0,value:new Map}}),t.set(e||{}),t._nativeListen("requestInfo",!0),t._nativeListen("createCell",!0),t._nativeListen("updateCell",!0),tabris.on("flush",t.$flush,t),t.on("dispose",function(){return tabris.off("flush",t.$flush,t)}),t}return _inherits(CollectionView,Composite),_createClass(CollectionView,[{key:"load",value:function load(e){if(!isNumber$1(e)||e<0)throw new Error("Invalid itemCount "+toValueString(e));this._itemCount=e,this._needsReload=!0}},{key:"reveal",value:function reveal(e,t){(e=this.$checkIndex(e))>=0&&e<this.itemCount&&(this.$flush(),this._nativeCall("reveal",{index:e,animate:!(t&&"animate"in t)||!!t.animate}))}},{key:"refresh",value:function refresh(e){if(0===arguments.length)return this.$flush(),void this._nativeCall("refresh",{index:0,count:this.itemCount});(e=this.$checkIndex(e))>=0&&e<this.itemCount&&(this.$flush(),this._nativeCall("refresh",{index:e,count:1}))}},{key:"insert",value:function insert(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e=Math.min(Math.max(0,this.$checkIndex(e)),this.itemCount),!isNumber$1(t)||t<=0)throw new Error("Invalid insert count "+toValueString(t));this._itemCount=this.itemCount+t,this.$flush();for(var r=e;r<e+t;r++)this._itemMapping.delete(r);for(var n of this._children()){var i=this._cellMapping.get(n);if(i>=e){var o=i+t;this._cellMapping.set(n,o),this._itemMapping.set(o,n)}}this._nativeCall("insert",{index:e,count:t})}},{key:"remove",value:function remove(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e=this.$checkIndex(e),!(isNumber$1(t)&&t>=0))throw new Error("Invalid remove count "+toValueString(t));if(t=Math.min(t,this.itemCount-e),e>=0&&e<this.itemCount&&t>0){this._itemCount=this.itemCount-t,this.$flush();for(var r=this._itemCount;r<this.itemCount+t;r++)this._itemMapping.delete(r);for(var n of this._children()){var i=this._cellMapping.get(n);if(i>=e)if(i<e+t)this._cellMapping.delete(n),this._itemMapping.delete(i);else{var o=i-t;this._cellMapping.set(n,o),this._itemMapping.set(o,n)}}this._nativeCall("remove",{index:e,count:t})}}},{key:"itemIndex",value:function itemIndex(e){if(!(e instanceof Widget))throw new Error(toValueString(e)+" is not a widget");for(var t=e;t&&t.parent()!==this;)t=t.parent();if(!t)throw new Error(toValueString(e)+" not a cell or child of a cell");return this._cellMapping.has(t)?this._cellMapping.get(t):-1}},{key:"cellByItemIndex",value:function cellByItemIndex(e){if(!isNumber$1(e)||e<0)throw new Error(toValueString(e)+" is not a valid index");return this._itemMapping.has(e)?this._itemMapping.get(e):null}},{key:"_listen",value:function _listen(e,t){"firstVisibleIndexChanged"===e?this._onoff("scroll",t,triggerChangeFirstVisibleIndex):"lastVisibleIndexChanged"===e?this._onoff("scroll",t,triggerChangeLastVisibleIndex):_get(CollectionView.prototype.__proto__||Object.getPrototypeOf(CollectionView.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){if("requestInfo"===e){var r=resolveProperty(this,"cellType",t.index),n=resolveProperty(this,"cellHeight",t.index,r);return{type:encodeCellType(this,r),height:encodeCellHeight(this,n)}}if("createCell"===e)return this.$createCell(t.type).cid;if("updateCell"!==e)return _get(CollectionView.prototype.__proto__||Object.getPrototypeOf(CollectionView.prototype),"_trigger",this).call(this,e,t);var i=tabris._nativeObjectRegistry.find(t.widget);this._cellMapping.has(i)&&this._itemMapping.delete(this._cellMapping.get(i)),this._cellMapping.set(i,t.index),this._itemMapping.set(t.index,i),this.updateCell(i,t.index)}},{key:"_initLayout",value:function _initLayout(){}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(CollectionView.prototype.__proto__||Object.getPrototypeOf(CollectionView.prototype),"_getXMLAttributes",this).call(this).concat([["itemCount",this.itemCount],["firstVisibleIndex",this.firstVisibleIndex]])}},{key:"$checkIndex",value:function $checkIndex(e){if(!isNumber$1(e))throw new Error(toValueString(e)+" is not a valid index");return e<0?e+this.itemCount:e}},{key:"$flush",value:function $flush(){this._needsReload&&(this._needsReload=!1,this._nativeCall("load",{itemCount:this.itemCount}))}},{key:"$createCell",value:function $createCell(e){var t=this,r=this.createCell(decodeCellType(this,e));if(!(r instanceof Widget))throw new Error("Created cell "+toValueString(r)+" is not a widget");if(r._parent)throw new Error("Created cell "+toValueString(r)+" already has a parent");return r._parent=this,this._addChild(r),r._setParent=function(){return hint(t,"Cannot re-parent collection view cell")},r.dispose=function(){return hint(t,"Cannot dispose of collection view cell")},r}},{key:"_nativeType",get:function(){return"tabris.CollectionView"}},{key:"itemCount",set:function(e){try{var t=this._itemCount;this._itemCount=types.natural.convert(e),this._needsReload=!0,t!==this._itemCount&&this._triggerChangeEvent("itemCount",this._itemCount)}catch(e){this._printPropertyWarning("itemCount",e)}},get:function(){return this._itemCount}},{key:"cellType",set:function(e){null===e||"string"==typeof e||e instanceof Function?e!==this._cellType&&(this._cellType=e,this._needsReload=!0,this._triggerChangeEvent("cellType",this._itemCount)):this._printPropertyWarning("cellType",new Error("Not a string or function"))},get:function(){return this._cellType}},{key:"cellHeight",set:function(e){try{var t=this._cellHeight;"auto"===e||e instanceof Function?this._cellHeight=e:this._cellHeight=types.dimension.convert(e),t!==this._cellHeight&&(this._needsReload=!0,this._triggerChangeEvent("cellHeight",this._cellHeight))}catch(e){this._printPropertyWarning("cellHeight",e)}},get:function(){return this._cellHeight}},{key:"createCell",set:function(e){e instanceof Function?e!==this._createCell&&(this._createCell=e,this._needsReload=!0,this._triggerChangeEvent("createCell",this._createCell)):this._printPropertyWarning("createCell",new Error("Not a function"))},get:function(){return this._createCell}},{key:"updateCell",set:function(e){e instanceof Function?this._updateCell!==e&&(this._updateCell=e,this._needsReload=!0,this._triggerChangeEvent("updateCell",this._updateCell)):this._printPropertyWarning("updateCell",new Error("Not a function"))},get:function(){return this._updateCell}},{key:"layout",set:function(e){e&&this._printPropertyWarning("layout",new Error("CollectionView does not support layouts"))},get:function(){return null}}]),CollectionView}();function resolveProperty(e,t){var r=e[t];return"function"==typeof r?r.apply(null,Array.prototype.slice.call(arguments,2)):r}function encodeCellType(e,t){var r=e._cellTypes||(e._cellTypes=[]),n=r.indexOf(t);return-1===n&&(n+=r.push(t)),n}function decodeCellType(e,t){return(e._cellTypes||[])[t]||null}function encodeCellHeight(e,t){return"auto"===t?-1:isNumber$1(t)?Math.max(-1,t):void hint(e,"Invalid cell height: "+t)}NativeObject.defineProperties(CollectionView.prototype,{refreshEnabled:{type:types.boolean,default:!1},refreshIndicator:{type:types.boolean,nocache:!0},refreshMessage:{type:types.string,default:""},firstVisibleIndex:{type:types.number,readonly:!0,nocache:!0},lastVisibleIndex:{type:types.number,readonly:!0,nocache:!0},columnCount:{type:types.number,default:1},scrollbarVisible:{type:types.boolean,default:!0}}),NativeObject.defineEvents(CollectionView.prototype,{refresh:{native:!0},scroll:{native:!0}}),NativeObject.defineChangeEvents(CollectionView.prototype,["createCell","cellType","cellHeight","itemCount","updateCell"]);var triggerChangeFirstVisibleIndex=createDelegate("firstVisibleIndex"),triggerChangeLastVisibleIndex=createDelegate("lastVisibleIndex");function createDelegate(e){return function(){var t=this[e];t!==this["_prev:"+e]&&this._triggerChangeEvent(e,t),this["_prev:"+e]=t}}function isNumber$1(e){return"number"==typeof e&&isFinite(e)}var Align={top:"top",centerY:"centerY",baseline:"baseline",bottom:"bottom",stretchY:"stretchY"},zero$1=new Percent(0),RowLayout=function(e){function RowLayout(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];_classCallCheck(this,RowLayout);var r=_possibleConstructorReturn(this,(RowLayout.__proto__||Object.getPrototypeOf(RowLayout)).call(this,{},t)),n=Align[e.alignment]||Align.top;return Object.defineProperties(r,{_spacing:{enumerable:!1,writable:!1,value:"spacing"in e?types.number.convert(e.spacing):0},_alignment:{enumerable:!1,writable:!1,value:n},_layoutDataVertical:{enumerable:!1,writable:!1,value:LayoutData.from({top:n===Align.top||n===Align.stretchY?0:"auto",bottom:n===Align.bottom||n===Align.stretchY?0:"auto",centerY:n===Align.centerY?0:"auto",baseline:n===Align.baseline?Constraint.prev:"auto"})}}),r}return _inherits(RowLayout,Layout),_createClass(RowLayout,null,[{key:"default",get:function(){return this._default||Object.defineProperty(this,"_default",{enumerable:!1,writable:!0,configurable:!0,value:new RowLayout}),this._default}}]),_createClass(RowLayout,[{key:"_getLayoutData",value:function _getLayoutData(e){var t=e.layoutData;return["left","top","right","bottom"].filter(function(e){return!isValidConstraint(t[e])}).forEach(function(t){return layoutWarn(e,t,'RowLayout only supports "auto" and numeric offset.')}),["centerX"].filter(function(e){return"auto"!==t[e]}).forEach(function(t){return layoutWarn(e,t,'StackLayout only supports "auto".')}),"auto"===t.centerY||"auto"===t.top&&"auto"===t.bottom&&"auto"===t.baseline?"auto"===t.baseline||"auto"===t.top&&"auto"===t.bottom||warn("Inconsistent layoutData: baseline overrides top and bottom.\nTarget: "+getPath(e)):warn("Inconsistent layoutData: centerY overrides top, bottom and baseline.\nTarget: "+getPath(e)),"auto"!==t.top&&"auto"!==t.bottom&&"auto"!==t.height&&warn("Inconsistent layoutData: left and right are set, ignore width.\nTarget: "+getPath(e)),t}},{key:"_renderLayoutData",value:function _renderLayoutData(e,t){for(var r=this._findStretchIndex(t),n=!0,i=0;i<e.length;i++){var o=Object.assign({},this._layoutDataVertical);this._layoutY(o,t,i),this._applyWidth(t[i],o),n&&this._applyLeft(o,t,i),i===r&&(n=!1,o.width="auto"),n||this._applyRight(o,t,i),e[i]._nativeSet("layoutData",this._resolveAttributes(o,e[i]))}}},{key:"_layoutY",value:function _layoutY(e,t,r){var n=t[r];"auto"!==n.top||"auto"!==n.bottom||"auto"!==n.centerY||"auto"!==n.baseline?"auto"!==n.centerY?Object.assign(e,{top:"auto",bottom:"auto",baseline:"auto",centerY:n.centerY}):"auto"!==n.baseline?Object.assign(e,{top:"auto",bottom:"auto",baseline:n.baseline}):Object.assign(e,{top:"auto"!==n.top?new Constraint(zero$1,n.top.offset):"auto",bottom:"auto"!==n.bottom?new Constraint(zero$1,n.bottom.offset):"auto",centerY:"auto",baseline:"auto"}):0===r&&"auto"!==e.baseline&&(e.baseline="auto",e.top=0),"auto"===n.height||"auto"!==n.top&&"auto"!==n.bottom||(e.height=n.height,this._alignment===Align.stretchY&&(e.bottom="auto"))}},{key:"_applyLeft",value:function _applyLeft(e,t,r){var n=t[r].left,i=t[r-1],o=i?i.right:"auto",a=i?LayoutData.prev:zero$1;e.left=new Constraint(a,"auto"===n&&"auto"===o?i?this._spacing:0:maxPositive("auto"!==n?n.offset:0,"auto"!==o?o.offset:0))}},{key:"_applyRight",value:function _applyRight(e,t,r){var n=t[r].right,i=t[r+1],o=i?i.left:"auto",a=i?LayoutData.next:zero$1;e.right=new Constraint(a,"auto"===n&&"auto"===o?i?this._spacing:0:maxPositive("auto"!==n?n.offset:0,"auto"!==o?o.offset:0))}},{key:"_applyWidth",value:function _applyWidth(e,t){"auto"!==e.width&&(t.width=e.width)}},{key:"_findStretchIndex",value:function _findStretchIndex(e){for(var t=0;t<e.length;t++){var{left:r,width:n,right:i}=e[t];if("auto"!==r&&"auto"===n&&"auto"!==i)return t}return-1}},{key:"spacing",get:function(){return this._spacing}},{key:"alignment",get:function(){return this._alignment}}]),RowLayout}(),Row=function(e){function Row(e){return _classCallCheck(this,Row),_possibleConstructorReturn(this,(Row.__proto__||Object.getPrototypeOf(Row)).call(this,e))}return _inherits(Row,Composite),_createClass(Row,[{key:"_initLayout",value:function _initLayout(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layout||RowLayout.default;("spacing"in e||"alignment"in e)&&(t=new RowLayout({spacing:"spacing"in e?e.spacing:t.spacing,alignment:"alignment"in e?e.alignment:t.alignment})),this._checkLayout(t),Object.defineProperty(this,"_layout",{enumerable:!1,writable:!1,value:t}),this._layout.add(this)}},{key:"_checkLayout",value:function _checkLayout(e){if(!(e instanceof RowLayout))throw new Error(toValueString(e)+" is not an instance of RowLayout")}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e=_get(Row.prototype.__proto__||Object.getPrototypeOf(Row.prototype),"_getXMLAttributes",this).call(this);return e.push(["alignment",this.alignment]),e}},{key:"spacing",get:function(){return this._layout.spacing},set:function(e){}},{key:"alignment",get:function(){return this._layout.alignment},set:function(e){}}]),Row}(),Align$1={left:"left",centerX:"centerX",right:"right",stretchX:"stretchX"},zero$2=new Percent(0),StackLayout=function(e){function StackLayout(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];_classCallCheck(this,StackLayout);var r=_possibleConstructorReturn(this,(StackLayout.__proto__||Object.getPrototypeOf(StackLayout)).call(this,{},t)),n=Align$1[e.alignment]||Align$1.left;return Object.defineProperties(r,{_spacing:{enumerable:!1,writable:!1,value:"spacing"in e?types.number.convert(e.spacing):0},_alignment:{enumerable:!1,writable:!1,value:n},_layoutDataHorizontal:{enumerable:!1,writable:!1,value:LayoutData.from({left:n===Align$1.left||n===Align$1.stretchX?0:"auto",right:n===Align$1.right||n===Align$1.stretchX?0:"auto",centerX:n===Align$1.centerX?0:"auto"})}}),r}return _inherits(StackLayout,Layout),_createClass(StackLayout,null,[{key:"default",get:function(){return this._default||Object.defineProperty(this,"_default",{enumerable:!1,writable:!0,configurable:!0,value:new StackLayout}),this._default}}]),_createClass(StackLayout,[{key:"_getLayoutData",value:function _getLayoutData(e){var t=e.layoutData;return["left","top","right","bottom"].filter(function(e){return!isValidConstraint(t[e])}).forEach(function(t){return layoutWarn(e,t,'StackLayout only supports "auto" and numeric offset.')}),["centerY","baseline"].filter(function(e){return"auto"!==t[e]}).forEach(function(t){return layoutWarn(e,t,'StackLayout only supports "auto".')}),"auto"===t.centerX||"auto"===t.left&&"auto"===t.right||warn("Inconsistent layoutData: centerX overrides left and right.\nTarget: "+getPath(e)),"auto"!==t.left&&"auto"!==t.right&&"auto"!==t.width&&warn("Inconsistent layoutData: left and right are set, ignore width.\nTarget: "+getPath(e)),t}},{key:"_renderLayoutData",value:function _renderLayoutData(e,t){for(var r=this._findStretchIndex(t),n=!0,i=0;i<e.length;i++){var o=Object.assign({},this._layoutDataHorizontal);this._layoutX(t[i],o),this._applyHeight(t[i],o),n&&this._applyTop(o,t,i),i===r&&(n=!1,o.height="auto"),n||this._applyBottom(o,t,i),e[i]._nativeSet("layoutData",this._resolveAttributes(o,e[i]))}}},{key:"_layoutX",value:function _layoutX(e,t){"auto"===e.left&&"auto"===e.right&&"auto"===e.centerX||("auto"!==e.centerX?Object.assign(t,{left:"auto",right:"auto",centerX:e.centerX}):Object.assign(t,{left:"auto"!==e.left?new Constraint(zero$2,e.left.offset):"auto",right:"auto"!==e.right?new Constraint(zero$2,e.right.offset):"auto",centerX:"auto"})),"auto"===e.width||"auto"!==e.left&&"auto"!==e.right||(t.width=e.width,this._alignment===Align$1.stretchX&&(t.right="auto"))}},{key:"_applyTop",value:function _applyTop(e,t,r){var n=t[r].top,i=t[r-1],o=i?i.bottom:"auto",a=i?LayoutData.prev:zero$2;e.top=new Constraint(a,"auto"===n&&"auto"===o?i?this._spacing:0:maxPositive("auto"!==n?n.offset:0,"auto"!==o?o.offset:0))}},{key:"_applyBottom",value:function _applyBottom(e,t,r){var n=t[r].bottom,i=t[r+1],o=i?i.top:"auto",a=i?LayoutData.next:zero$2;e.bottom=new Constraint(a,"auto"===n&&"auto"===o?i?this._spacing:0:maxPositive("auto"!==n?n.offset:0,"auto"!==o?o.offset:0))}},{key:"_applyHeight",value:function _applyHeight(e,t){"auto"!==e.height&&(t.height=e.height)}},{key:"_findStretchIndex",value:function _findStretchIndex(e){for(var t=0;t<e.length;t++){var{top:r,height:n,bottom:i}=e[t];if("auto"!==r&&"auto"===n&&"auto"!==i)return t}return-1}},{key:"spacing",get:function(){return this._spacing}},{key:"alignment",get:function(){return this._alignment}}]),StackLayout}(),Stack=function(e){function Stack(e){return _classCallCheck(this,Stack),_possibleConstructorReturn(this,(Stack.__proto__||Object.getPrototypeOf(Stack)).call(this,e))}return _inherits(Stack,Composite),_createClass(Stack,[{key:"_initLayout",value:function _initLayout(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layout||StackLayout.default;("spacing"in e||"alignment"in e)&&(t=new StackLayout({spacing:"spacing"in e?e.spacing:t.spacing,alignment:"alignment"in e?e.alignment:t.alignment})),this._checkLayout(t),Object.defineProperty(this,"_layout",{enumerable:!1,writable:!1,value:t}),this._layout.add(this)}},{key:"_checkLayout",value:function _checkLayout(e){if(!(e instanceof StackLayout))throw new Error(toValueString(e)+" is not an instance of StackLayout")}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e=_get(Stack.prototype.__proto__||Object.getPrototypeOf(Stack.prototype),"_getXMLAttributes",this).call(this);return e.push(["alignment",this.alignment]),e}},{key:"spacing",get:function(){return this._layout.spacing},set:function(e){}},{key:"alignment",get:function(){return this._layout.alignment},set:function(e){}}]),Stack}(),CameraView=function(e){function CameraView(){return _classCallCheck(this,CameraView),_possibleConstructorReturn(this,(CameraView.__proto__||Object.getPrototypeOf(CameraView)).apply(this,arguments))}return _inherits(CameraView,Widget),_createClass(CameraView,[{key:"_nativeType",get:function(){return"tabris.CameraView"}}]),CameraView}();NativeObject.defineProperties(CameraView.prototype,{camera:{type:Camera,default:null,nullable:!0},scaleMode:{type:"string",choice:["fit","fill"],default:"fit"}});var Crypto=function(e){function Crypto(){return _classCallCheck(this,Crypto),_possibleConstructorReturn(this,(Crypto.__proto__||Object.getPrototypeOf(Crypto)).apply(this,arguments))}return _inherits(Crypto,NativeObject),_createClass(Crypto,[{key:"getRandomValues",value:function getRandomValues(e){if(0===arguments.length)throw new Error("Not enough arguments to Crypto.getRandomValues");if(!isIntArray(e))throw new Error("Argument "+toValueString(e)+" is not an accepted array type");var t=e.byteLength,r=new Uint8Array(this._nativeCall("getRandomValues",{byteLength:t}));if(r.byteLength!==t)throw new Error("Not enough random bytes available");new Uint8Array(e.buffer).set(r)}},{key:"_nativeType",get:function(){return"tabris.Crypto"}}]),Crypto}();function isIntArray(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array}var Drawer=function(e){function Drawer(){return _classCallCheck(this,Drawer),_possibleConstructorReturn(this,(Drawer.__proto__||Object.getPrototypeOf(Drawer)).apply(this,arguments))}return _inherits(Drawer,ContentView),_createClass(Drawer,[{key:"_nativeCreate",value:function _nativeCreate(e){if(!0!==e)throw new Error("Drawer can not be created");_get(Drawer.prototype.__proto__||Object.getPrototypeOf(Drawer.prototype),"_nativeCreate",this).call(this,_defineProperty({},creationAllowed,!0))}},{key:"_setParent",value:function _setParent(){throw new Error("Parent of Drawer can not be changed")}},{key:"_listen",value:function _listen(e,t){"open"===e||"close"===e?this._nativeListen(e,t):_get(Drawer.prototype.__proto__||Object.getPrototypeOf(Drawer.prototype),"_listen",this).call(this,e,t)}},{key:"_dispose",value:function _dispose(){throw new Error("Drawer can not be disposed")}},{key:"open",value:function open(){return this._nativeCall("open",{}),this}},{key:"close",value:function close(){return this._nativeCall("close",{}),this}},{key:"_nativeType",get:function(){return"tabris.Drawer"}}]),Drawer}();function create$7(){return new Drawer(!0)}NativeObject.defineProperties(Drawer.prototype,{enabled:{type:"boolean",default:!1}}),NativeObject.defineEvents(Drawer.prototype,{open:{native:!0},close:{native:!0}});var DateDialog=function(e){function DateDialog(e){_classCallCheck(this,DateDialog);var t=_possibleConstructorReturn(this,(DateDialog.__proto__||Object.getPrototypeOf(DateDialog)).call(this,e));return t._nativeListen("close",!0),t._nativeListen("select",!0),t._autoDispose=!0,t}return _inherits(DateDialog,Popup),_createClass(DateDialog,null,[{key:"open",value:function open(e){return(e instanceof DateDialog?e:e instanceof Date?new DateDialog({date:e}):new DateDialog).open()}}]),_createClass(DateDialog,[{key:"_trigger",value:function _trigger(e,t){if("close"===e)this._handleCloseEvent(t);else{if("select"!==e)return _get(DateDialog.prototype.__proto__||Object.getPrototypeOf(DateDialog.prototype),"_trigger",this).call(this,e,t);t.date=new Date(t.date),_get(DateDialog.prototype.__proto__||Object.getPrototypeOf(DateDialog.prototype),"_trigger",this).call(this,"select",t),this._handleCloseEvent(t)}}},{key:"_handleCloseEvent",value:function _handleCloseEvent(e){_get(DateDialog.prototype.__proto__||Object.getPrototypeOf(DateDialog.prototype),"_trigger",this).call(this,"close",e),this.dispose()}},{key:"_nativeType",get:function(){return"tabris.DateDialog"}}]),DateDialog}();NativeObject.defineProperties(DateDialog.prototype,{date:{type:types.Date,default:null},maxDate:{type:types.Date,default:null},minDate:{type:types.Date,default:null}}),NativeObject.defineEvents(DateDialog.prototype,{select:{native:!0},close:{native:!0}});var File=function(e){function File(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(_classCallCheck(this,File),arguments.length<2)throw new TypeError("File requires at least 2 arguments, but only "+arguments.length+" were passed.");var n=_possibleConstructorReturn(this,(File.__proto__||Object.getPrototypeOf(File)).call(this,e,r));Object.defineProperty(n,"name",{value:t+""});var i="lastModified"in r?r.lastModified:Date.now();return isNaN(i)||!isFinite(i)?Object.defineProperty(n,"lastModified",{value:0}):Object.defineProperty(n,"lastModified",{value:Math.round("string"==typeof i?parseInt(i):0+i)}),n}return _inherits(File,Blob),File}();File.prototype[Symbol.toStringTag]="File",Object.defineProperty(File.prototype,"name",{value:""}),Object.defineProperty(File.prototype,"lastModified",{value:0});var FormData=function(){function FormData(){_classCallCheck(this,FormData)}return _createClass(FormData,[{key:"getAll",value:function getAll(e){if(0===arguments.length)throw new TypeError("FormData.getAll requires at least 1 argument, but only 0 were passed");var t=data$1(this)[e];return t?t.concat():[]}},{key:"get",value:function get(e){if(0===arguments.length)throw new TypeError("FormData.get requires at least 1 argument, but only 0 were passed");var t=data$1(this)[e];return t?t[0]:null}},{key:"has",value:function has(e){if(0===arguments.length)throw new TypeError("FormData.has requires at least 1 argument, but only 0 were passed");return!!data$1(this)[e]}},{key:"append",value:function append(e,t,r){if(arguments.length<2)throw new TypeError(arguments.length+" is not a valid argument count for any overload of FormData.append.");if(3===arguments.length&&!(t instanceof Blob))throw new TypeError("Argument 2 of FormData.append is not an object.");var n=data$1(this)[e]||[];n.push(normalize(t,r)),data$1(this)[e]=n}},{key:"set",value:function set(e,t,r){if(arguments.length<2)throw new TypeError(arguments.length+" is not a valid argument count for any overload of FormData.set.");if(3===arguments.length&&!(t instanceof Blob))throw new TypeError("Argument 2 of FormData.set is not an object.");data$1(this)[e]=[normalize(t,r)]}},{key:"delete",value:function _delete(e){if(0===arguments.length)throw new TypeError("0 is not a valid argument count for any overload of FormData.delete.");delete data$1(this)[e]}},{key:"keys",value:function keys(){var e=this.entries();return _defineProperty({next:function(){var{done:t,value:r}=e.next();return{done:t,value:t?void 0:r[0]}}},Symbol.iterator,function(){return this})}},{key:"values",value:function values(){var e=this.entries();return _defineProperty({next:function(){var{done:t,value:r}=e.next();return{done:t,value:t?void 0:r[1]}}},Symbol.iterator,function(){return this})}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function entries(){var e=this,t=Object.keys(data$1(this)).sort(),r=0,n=0,i=function(){if(r<t.length){var o=data$1(e)[t[r]];return o&&n<o.length?{done:!1,value:[t[r],o[n++]]}:(r++,n=0,i())}return{done:!0,value:void 0}};return _defineProperty({next:i},Symbol.iterator,function(){return this})}}]),FormData}();function formDataToBlob(e){var t="----tabrisformdataboundary-"+Math.round(1e8*Math.random())+"-yradnuobatadmrofsirbat",r=[];for(var[n,i]of e)r.push("--"+t+"\r\n"),i instanceof File?(r.push('Content-Disposition: form-data; name="'+n+'"; filename="'+i.name+'"\r\n'),r.push("Content-Type: "+(i.type||"application/octet-stream")+"\r\n\r\n"),r.push(i),r.push("\r\n")):r.push('Content-Disposition: form-data; name="'+n+'"\r\n\r\n'+i+"\r\n");return r.push("--"+t+"--"),new Blob(r,{type:"multipart/form-data; boundary="+t})}function data$1(e){return e[data]||(e[data]={}),e[data]}function normalize(e,t){return e instanceof File&&void 0===t?e:e instanceof Blob?new File([e],void 0===t?"blob":t):e+""}FormData.prototype[Symbol.toStringTag]="FormData";var ImageView=function(e){function ImageView(){return _classCallCheck(this,ImageView),_possibleConstructorReturn(this,(ImageView.__proto__||Object.getPrototypeOf(ImageView)).apply(this,arguments))}return _inherits(ImageView,Widget),_createClass(ImageView,[{key:"_beforePropertyChange",value:function _beforePropertyChange(e,t){"zoomEnabled"!==e||t?"minZoomLevel"===e&&t>this.zoomLevel?this.zoomLevel=t:"maxZoomLevel"===e&&t<this.zoomLevel&&(this.zoomLevel=t):(this.minZoomLevel=1,this.maxZoomLevel=3,this.zoomLevel=1)}},{key:"_reorderProperties",value:function _reorderProperties(e){return-1!==e.indexOf("maxZoomLevel")&&e.unshift(e.splice(e.indexOf("maxZoomLevel"),1)[0]),-1!==e.indexOf("minZoomLevel")&&e.unshift(e.splice(e.indexOf("minZoomLevel"),1)[0]),-1!==e.indexOf("zoomEnabled")&&e.unshift(e.splice(e.indexOf("zoomEnabled"),1)[0]),_get(ImageView.prototype.__proto__||Object.getPrototypeOf(ImageView.prototype),"_reorderProperties",this).call(this,e)}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(ImageView.prototype.__proto__||Object.getPrototypeOf(ImageView.prototype),"_getXMLAttributes",this).call(this).concat([["image",(this.image||{src:""}).src]])}},{key:"_nativeType",get:function(){return"tabris.ImageView"}}]),ImageView}();NativeObject.defineProperties(ImageView.prototype,{image:{type:types.ImageValue,default:null},scaleMode:{type:types.string,choice:["auto","fit","fill","stretch","none"],default:"auto"},tintColor:{type:types.ColorValue,default:"initial"},zoomEnabled:{type:types.boolean,default:!1},zoomLevel:{type:{convert:function(e,t){if(!t.zoomEnabled)throw new Error("zoomLevel can not be set when zoomEnabled is false");var r=types.number.convert(e);if(r<t.minZoomLevel)throw new Error("zoomLevel can not be smaller than minZoomLevel");if(r>t.maxZoomLevel)throw new Error("zoomLevel can not be larger than maxZoomLevel");return r}},nocache:!0},minZoomLevel:{type:{convert:function(e,t){if(!t.zoomEnabled)throw new Error("minZoomLevel can not be set when zoomEnabled is false");var r=types.number.convert(e);if(r>t.maxZoomLevel)throw new Error("minZoomLevel can not be larger than maxZoomLevel");return r}},default:1},maxZoomLevel:{type:{convert:function(e,t){if(!t.zoomEnabled)throw new Error("maxZoomLevel can not be set when zoomEnabled is false");var r=types.number.convert(e);if(r<t.minZoomLevel)throw new Error("maxZoomLevel can not be smaller than minZoomLevel");return r}},default:3}}),NativeObject.defineEvents(ImageView.prototype,{load:{native:!0},zoom:{native:!0,changes:"zoomLevel"}});var InactivityTimer=function(e){function InactivityTimer(e){_classCallCheck(this,InactivityTimer);var t=_possibleConstructorReturn(this,(InactivityTimer.__proto__||Object.getPrototypeOf(InactivityTimer)).call(this,e));return t._nativeListen("timeout",!0),t}return _inherits(InactivityTimer,NativeObject),_createClass(InactivityTimer,[{key:"start",value:function start(){this._nativeCall("start")}},{key:"cancel",value:function cancel(){this._nativeCall("cancel")}},{key:"_nativeType",get:function(){return"tabris.InactivityTimer"}}]),InactivityTimer}();NativeObject.defineProperties(InactivityTimer.prototype,{delay:{type:"natural",default:0}}),NativeObject.defineEvents(InactivityTimer.prototype,{timeout:!0});var SearchAction=function(e){function SearchAction(){return _classCallCheck(this,SearchAction),_possibleConstructorReturn(this,(SearchAction.__proto__||Object.getPrototypeOf(SearchAction)).apply(this,arguments))}return _inherits(SearchAction,Widget),_createClass(SearchAction,[{key:"open",value:function open(){return this._nativeCall("open",{}),this}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e=_get(SearchAction.prototype.__proto__||Object.getPrototypeOf(SearchAction.prototype),"_getXMLAttributes",this).call(this).concat([["title",this.title]]);return this.text&&e.push(["text",this.text]),this.message&&e.push(["message",this.message]),e}},{key:"_nativeType",get:function(){return"tabris.SearchAction"}}]),SearchAction}();NativeObject.defineProperties(SearchAction.prototype,{image:{type:types.ImageValue,default:null},placementPriority:{type:types.string,choice:["low","high","normal"],default:"normal"},title:{type:types.string,default:""},proposals:{type:{convert:function(e){if(!Array.isArray(e))throw new Error("Not an array");return Object.freeze(e.map(types.string.convert))}},default:Object.freeze([])},text:{type:types.string,nocache:!0},message:{type:types.string,default:""}}),NativeObject.defineEvents(SearchAction.prototype,{input:{native:!0},accept:{native:!0},select:{native:!0}});var NavigationView=function(e){function NavigationView(e){_classCallCheck(this,NavigationView);var t=_possibleConstructorReturn(this,(NavigationView.__proto__||Object.getPrototypeOf(NavigationView)).call(this,e));return t._nativeListen("backNavigation",!0),t}return _inherits(NavigationView,Composite),_createClass(NavigationView,[{key:"_initLayout",value:function _initLayout(){Object.defineProperty(this,"_layout",{enumerable:!1,writable:!1,value:null})}},{key:"_acceptChild",value:function _acceptChild(e){return e instanceof Page||e instanceof Action||e instanceof SearchAction}},{key:"_addChild",value:function _addChild(e,t){var r=e instanceof Page&&"number"!=typeof t||t===this.pages().length;r&&this.$triggerDisappear(),_get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),"_addChild",this).call(this,e,t),r&&this.$triggerAppear()}},{key:"_removeChild",value:function _removeChild(e){var t=e instanceof Page&&e===this.pages().last();t&&this.$triggerDisappear(),_get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),"_removeChild",this).call(this,e),t&&this.$triggerAppear()}},{key:"$handleBackNavigation",value:function $handleBackNavigation(){this.$pop(this.pages().last())}},{key:"$pop",value:function $pop(e){e&&e.autoDispose?e.dispose():e&&e._setParent(null)}},{key:"_listen",value:function _listen(e,t){"toolbarHeightChanged"===e?this._nativeListen(e,t):_get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){if("backNavigation"===e)this.$handleBackNavigation();else{if("toolbarHeightChanged"!==e)return _get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),"_trigger",this).call(this,e,t);this._triggerChangeEvent("toolbarHeight",t.toolbarHeight)}}},{key:"$triggerAppear",value:function $triggerAppear(){var e=this.pages().last();e&&e.$trigger("appear")}},{key:"$triggerDisappear",value:function $triggerDisappear(){var e=this.pages().last();e&&e.$trigger("disappear")}},{key:"pages",value:function pages(e){return this.children(e).filter(function(e){return e instanceof Page})}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e=_get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),"_getXMLAttributes",this).call(this);return this.drawerActionVisible||e.push(["drawerActionVisible","false"]),this.toolbarVisible||e.push(["toolbarVisible","false"]),e}},{key:"_nativeType",get:function(){return"tabris.NavigationView"}}]),NavigationView}();NativeObject.defineProperties(NavigationView.prototype,{drawerActionVisible:{type:types.boolean,default:!1},toolbarVisible:{type:types.boolean,default:!0},toolbarColor:{type:types.ColorValue,default:null},toolbarHeight:{readonly:!0},titleTextColor:{type:types.ColorValue,default:null},actionColor:{type:types.ColorValue,default:null},actionTextColor:{type:types.ColorValue,default:null},pageAnimation:{type:types.string,choice:["default","none"],default:"default"}}),NativeObject.defineEvents(NavigationView.prototype,{backNavigation:!0});var Page=function(e){function Page(){return _classCallCheck(this,Page),_possibleConstructorReturn(this,(Page.__proto__||Object.getPrototypeOf(Page)).apply(this,arguments))}return _inherits(Page,Composite),_createClass(Page,[{key:"insertBefore",value:function insertBefore(){throw new Error("insertBefore not supported on Page")}},{key:"insertAfter",value:function insertAfter(){throw new Error("insertAfter not supported on Page")}},{key:"_setParent",value:function _setParent(e,t){if(e&&!(e instanceof NavigationView))throw new Error("Page could not be appended to "+toValueString(e));_get(Page.prototype.__proto__||Object.getPrototypeOf(Page.prototype),"_setParent",this).call(this,e,t)}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(Page.prototype.__proto__||Object.getPrototypeOf(Page.prototype),"_getXMLAttributes",this).call(this).concat([["title",this.title]])}},{key:"_nativeType",get:function(){return"tabris.Page"}}]),Page}();NativeObject.defineProperties(Page.prototype,{image:{type:"ImageValue",default:null},title:{type:"string",default:""},autoDispose:{type:"boolean",default:!0}}),NativeObject.defineEvents(Page.prototype,{appear:!0,disappear:!0});var Picker=function(e){function Picker(e){_classCallCheck(this,Picker);var t=_possibleConstructorReturn(this,(Picker.__proto__||Object.getPrototypeOf(Picker)).call(this,pick(e,["style"])));return Object.defineProperties(t,{_itemCount:{enumerable:!1,writable:!0,value:0},_itemText:{enumerable:!1,writable:!0,value:function(){return""}}}),t.set(omit(e,["style"])),tabris.on("flush",t.$flush,t),t.on("dispose",function(){return tabris.off("flush",t.$flush,t)}),t}return _inherits(Picker,Widget),_createClass(Picker,[{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(Picker.prototype.__proto__||Object.getPrototypeOf(Picker.prototype),"_getXMLAttributes",this).call(this).concat([["itemCount",this.itemCount],["selectionIndex",this.selectionIndex]])}},{key:"$flush",value:function $flush(){if(this.$needsUpdateItems){for(var e=new Array(this.itemCount),t=0;t<e.length;t++)e[t]=this.itemText(t)+"";this._nativeSet("items",e),tabris._nativeBridge.flush(),this.$needsUpdateItems=!1}this.$newSelectionIndex>=-1&&(this._nativeSet("selectionIndex",this.$newSelectionIndex),this._triggerChangeEvent("selectionIndex",this.$newSelectionIndex),tabris._nativeBridge.flush(),this.$newSelectionIndex=void 0)}},{key:"_trigger",value:function _trigger(e,t){return"select"===e?_get(Picker.prototype.__proto__||Object.getPrototypeOf(Picker.prototype),"_trigger",this).call(this,"select",{index:t.selectionIndex}):_get(Picker.prototype.__proto__||Object.getPrototypeOf(Picker.prototype),"_trigger",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.Picker"}},{key:"itemCount",set:function(e){try{var t=this._itemCount;this._itemCount=types.natural.convert(e),this._itemCount!==t&&(Object.defineProperty(this,"$needsUpdateItems",{enumerable:!1,writable:!0,value:!0}),this._triggerChangeEvent("itemCount"))}catch(e){this._printPropertyWarning("itemCount",e)}},get:function(){return this._itemCount}},{key:"itemText",set:function(e){try{if(!(e instanceof Function))throw new Error("Not a Function");var t=this._itemText;this._itemText=e,this._itemText!==t&&(Object.defineProperty(this,"$needsUpdateItems",{enumerable:!1,writable:!0,value:!0}),this._triggerChangeEvent("itemText"))}catch(e){this._printPropertyWarning("itemText",e)}},get:function(){return this._itemText}},{key:"selectionIndex",set:function(e){try{var t=this.$newSelectionIndex;this.$newSelectionIndex=types.integer.convert(e),this.$newSelectionIndex!==t&&this._triggerChangeEvent("selectionIndex")}catch(e){this._printPropertyWarning("selectionIndex",e)}},get:function(){return this.$newSelectionIndex>=-1?this.$newSelectionIndex:this._nativeGet("selectionIndex")}}]),Picker}();NativeObject.defineProperties(Picker.prototype,{style:{type:types.string,choice:["default","outline","fill","underline","none"],const:!0,default:"default"},message:{type:types.string,default:""},floatMessage:{type:types.boolean,default:!0},borderColor:{type:types.ColorValue,default:null},textColor:{type:types.ColorValue,default:null},font:{type:types.FontValue,default:null}}),NativeObject.defineChangeEvents(Picker.prototype,["selectionIndex","itemText","itemCount"]),NativeObject.defineEvents(Picker.prototype,{select:{native:!0,changes:"selectionIndex",changeValue:function(e){return"index"in e?e.index:e.selectionIndex}}});var Pbkdf2=function(e){function Pbkdf2(e){_classCallCheck(this,Pbkdf2);var t=_possibleConstructorReturn(this,(Pbkdf2.__proto__||Object.getPrototypeOf(Pbkdf2)).call(this,e));return t._nativeListen("done",!0),t}return _inherits(Pbkdf2,NativeObject),_createClass(Pbkdf2,[{key:"start",value:function start(e){this._nativeCall("start",e)}},{key:"_nativeType",get:function(){return"tabris.pkcs5.Pbkdf2"}}]),Pbkdf2}(),Pkcs5=function(){function Pkcs5(){_classCallCheck(this,Pkcs5)}return _createClass(Pkcs5,[{key:"pbkdf2",value:function pbkdf2(e,t,r,n){var i=arguments;return new Promise(function(o){if(i.length<4)throw new Error("Not enough arguments to pbkdf2");if("string"!=typeof e)throw new Error("Invalid type for password in pbkdf2");if(!(t instanceof Uint8Array))throw new Error("Invalid type for salt in pbkdf2");if("number"!=typeof r||r<=0)throw new Error("Invalid number for iterationCount in pbkdf2");if("number"!=typeof n||n<=0)throw new Error("Invalid number for keySize in pbkdf2");var a=new Pbkdf2;a.on("done",function(e){a.dispose(),o(e.key)}),a.start({password:e,salt:toArray(t),iterationCount:r,keySize:n})})}}]),Pkcs5}();function toArray(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}var ProgressEvent=function(e){function ProgressEvent(e,t){if(_classCallCheck(this,ProgressEvent),arguments.length<1)throw new Error("Not enough arguments to ProgressEvent");var r=_possibleConstructorReturn(this,(ProgressEvent.__proto__||Object.getPrototypeOf(ProgressEvent)).call(this,e,t));return Object.defineProperties(r,{$lengthComputable:{enumerable:!1,writable:!0,value:t&&t.lengthComputable||!1},$loaded:{enumerable:!1,writable:!0,value:t&&t.loaded||0},$total:{enumerable:!1,writable:!0,value:t&&t.total||0}}),r}return _inherits(ProgressEvent,Event),_createClass(ProgressEvent,[{key:"lengthComputable",get:function(){return this.$lengthComputable}},{key:"loaded",get:function(){return this.$loaded}},{key:"total",get:function(){return this.$total}}]),ProgressEvent}(),ProgressBar=function(e){function ProgressBar(){return _classCallCheck(this,ProgressBar),_possibleConstructorReturn(this,(ProgressBar.__proto__||Object.getPrototypeOf(ProgressBar)).apply(this,arguments))}return _inherits(ProgressBar,Widget),_createClass(ProgressBar,[{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(ProgressBar.prototype.__proto__||Object.getPrototypeOf(ProgressBar.prototype),"_getXMLAttributes",this).call(this).concat([["selection",this.selection],["minimum",this.minimum],["maximum",this.maximum]])}},{key:"_nativeType",get:function(){return"tabris.ProgressBar"}}]),ProgressBar}();NativeObject.defineProperties(ProgressBar.prototype,{minimum:{type:types.integer,default:0},maximum:{type:types.integer,default:100},tintColor:{type:types.ColorValue,default:null},selection:{type:types.integer,default:0},state:{type:types.string,choice:["normal","paused","error"],default:"normal"}});var Popover=function(e){function Popover(e){_classCallCheck(this,Popover);var t=_possibleConstructorReturn(this,(Popover.__proto__||Object.getPrototypeOf(Popover)).call(this,e));return Object.defineProperty(t,"contentView",{value:create$6()}),t._nativeListen("close",!0),t._autoDispose=!0,t._nativeSet("contentView",t.contentView.cid),t}return _inherits(Popover,Popup),_createClass(Popover,null,[{key:"open",value:function open(e){if(!(e instanceof Popover))throw new Error("Not a Popover: "+typeof e);return e.open()}}]),_createClass(Popover,[{key:"_trigger",value:function _trigger(e,t){if("close"!==e)return _get(Popover.prototype.__proto__||Object.getPrototypeOf(Popover.prototype),"_trigger",this).call(this,e,t);_get(Popover.prototype.__proto__||Object.getPrototypeOf(Popover.prototype),"_trigger",this).call(this,"close",t),this.dispose()}},{key:"_dispose",value:function _dispose(){this.isDisposed()||Composite.prototype._dispose.call(this.contentView),_get(Popover.prototype.__proto__||Object.getPrototypeOf(Popover.prototype),"_dispose",this).call(this)}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t),n=this.withoutChildren(t),i=_get(Popover.prototype.__proto__||Object.getPrototypeOf(Popover.prototype),JSX.jsxFactory,this).call(this,e,n);return r&&r.length&&i.contentView.append(r),i}},{key:"_nativeType",get:function(){return"tabris.Popover"}}]),Popover}();NativeObject.defineProperties(Popover.prototype,{anchor:{type:"Widget",default:null},width:{type:"dimension",nocache:!0,nullable:!0},height:{type:"dimension",nocache:!0,nullable:!0}}),NativeObject.defineEvents(Popover.prototype,{close:{}});var NavigationBar=function(e){function NavigationBar(){return _classCallCheck(this,NavigationBar),_possibleConstructorReturn(this,(NavigationBar.__proto__||Object.getPrototypeOf(NavigationBar)).apply(this,arguments))}return _inherits(NavigationBar,NativeObject),_createClass(NavigationBar,[{key:"_nativeCreate",value:function _nativeCreate(e){if(!0!==e)throw new Error("NavigationBar can not be created");_get(NavigationBar.prototype.__proto__||Object.getPrototypeOf(NavigationBar.prototype),"_nativeCreate",this).call(this)}},{key:"_setParent",value:function _setParent(){throw new Error("Parent of NavigationBar can not be changed")}},{key:"_dispose",value:function _dispose(){throw new Error("NavigationBar can not be disposed")}},{key:"_nativeType",get:function(){return"tabris.NavigationBar"}}]),NavigationBar}();function create$8(){return new NavigationBar(!0)}NativeObject.defineProperties(NavigationBar.prototype,{theme:{type:types.string,choice:["default","light","dark"],default:"default"},displayMode:{type:types.string,choice:["default","float","hide"],default:"default"},height:{type:types.number,readonly:!0,nocache:!0},background:{type:types.ColorValue,nocache:!0}});var RadioButton=function(e){function RadioButton(){return _classCallCheck(this,RadioButton),_possibleConstructorReturn(this,(RadioButton.__proto__||Object.getPrototypeOf(RadioButton)).apply(this,arguments))}return _inherits(RadioButton,Widget),_createClass(RadioButton,[{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(RadioButton.prototype.__proto__||Object.getPrototypeOf(RadioButton.prototype),"_getXMLAttributes",this).call(this).concat([["text",this.text],["checked",this.checked]])}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t),n=this.withoutChildren(t);return _get(RadioButton.prototype.__proto__||Object.getPrototypeOf(RadioButton.prototype),JSX.jsxFactory,this).call(this,e,this.withContentText(n,r,"text"))}},{key:"_nativeType",get:function(){return"tabris.RadioButton"}}]),RadioButton}();NativeObject.defineProperties(RadioButton.prototype,{text:{type:"string",default:""},checked:{type:"boolean",nocache:!0},textColor:{type:"ColorValue",default:"initial"},tintColor:{type:"ColorValue",default:"initial"},checkedTintColor:{type:"ColorValue",default:"initial"},font:{type:"FontValue",default:"initial"}}),NativeObject.defineEvents(RadioButton.prototype,{select:{native:!0,changes:"checked"}});var RefreshComposite=function(e){function RefreshComposite(){return _classCallCheck(this,RefreshComposite),_possibleConstructorReturn(this,(RefreshComposite.__proto__||Object.getPrototypeOf(RefreshComposite)).apply(this,arguments))}return _inherits(RefreshComposite,Composite),_createClass(RefreshComposite,[{key:"_listen",value:function _listen(e,t){"refresh"===e?this._nativeListen(e,t):_get(RefreshComposite.prototype.__proto__||Object.getPrototypeOf(RefreshComposite.prototype),"_listen",this).call(this,e,t)}},{key:"_nativeType",get:function(){return"tabris.RefreshComposite"}}]),RefreshComposite}();NativeObject.defineProperties(RefreshComposite.prototype,{refreshEnabled:{type:"boolean",default:!0},refreshIndicator:{type:"boolean",nocache:!0},refreshMessage:{type:"string",default:""}}),NativeObject.defineEvents(RefreshComposite.prototype,{refresh:{native:!0}});var ScrollView=function(e){function ScrollView(){return _classCallCheck(this,ScrollView),_possibleConstructorReturn(this,(ScrollView.__proto__||Object.getPrototypeOf(ScrollView)).apply(this,arguments))}return _inherits(ScrollView,Composite),_createClass(ScrollView,[{key:"scrollToY",value:function scrollToY(e,t){return this._nativeCall("scrollToY",{offset:e,animate:!(t&&"animate"in t)||!!t.animate}),this}},{key:"scrollToX",value:function scrollToX(e,t){return this._nativeCall("scrollToX",{offset:e,animate:!(t&&"animate"in t)||!!t.animate}),this}},{key:"_listen",value:function _listen(e,t){"scrollXStateChanged"===e?this._nativeListen("scrollXStateChanged",t):"scrollYStateChanged"===e?this._nativeListen("scrollYStateChanged",t):_get(ScrollView.prototype.__proto__||Object.getPrototypeOf(ScrollView.prototype),"_listen",this).call(this,e,t)}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e="vertical"===this.direction?"offsetY":"offsetX";return _get(ScrollView.prototype.__proto__||Object.getPrototypeOf(ScrollView.prototype),"_getXMLAttributes",this).call(this).concat([["direction",this.direction],[e,this[e]]])}},{key:"_nativeType",get:function(){return"tabris.ScrollView"}}]),ScrollView}();NativeObject.defineProperties(ScrollView.prototype,{direction:{type:types.string,choice:["horizontal","vertical"],default:"vertical",const:!0},offsetX:{type:types.number,nocache:!0,readonly:!0},offsetY:{type:types.number,nocache:!0,readonly:!0},scrollbarVisible:{type:types.boolean,default:!0},scrollXState:{type:types.string,nocache:!0,readonly:!0},scrollYState:{type:types.string,nocache:!0,readonly:!0}}),NativeObject.defineEvents(ScrollView.prototype,{scrollX:{native:!0,changes:"offsetX",changeValue:"offset"},scrollY:{native:!0,changes:"offsetY",changeValue:"offset"}});var SizeMeasurement=function(e){function SizeMeasurement(){return _classCallCheck(this,SizeMeasurement),_possibleConstructorReturn(this,(SizeMeasurement.__proto__||Object.getPrototypeOf(SizeMeasurement)).apply(this,arguments))}return _inherits(SizeMeasurement,NativeObject),_createClass(SizeMeasurement,[{key:"_nativeCreate",value:function _nativeCreate(e){if(!0!==e)throw new Error("SizeMeasurement can not be created");_get(SizeMeasurement.prototype.__proto__||Object.getPrototypeOf(SizeMeasurement.prototype),"_nativeCreate",this).call(this)}},{key:"measureTexts",value:function measureTexts(e){var t=arguments,r=this;return new Promise(function(n,i){if(t.length<1)throw new Error("Not enough arguments to measure texts");if(!Array.isArray(e))throw new Error("The text measurement configs have to be an array");r._nativeCall("measureTexts",{configs:r._createTextMeasureConfigs(e),onResult:function(e){return n(e)},onError:function(e){return i(new Error(e))}})})}},{key:"measureTextsSync",value:function measureTextsSync(e){if(arguments.length<1)throw new Error("Not enough arguments to measure texts");if(!Array.isArray(e))throw new Error("The text measurement configs have to be an array");return this._nativeCall("measureTextsSync",{configs:this._createTextMeasureConfigs(e)})}},{key:"_createTextMeasureConfigs",value:function _createTextMeasureConfigs(e){return e.map(function(e){return{text:checkText(e.text),font:checkFont(e.font),markupEnabled:!!e.markupEnabled,maxWidth:"maxWidth"in e?types.dimension.convert(e.maxWidth):void 0}})}},{key:"dispose",value:function dispose(){throw new Error("Cannot dispose sizeMeasurement object")}},{key:"_nativeType",get:function(){return"tabris.SizeMeasurement"}}]),SizeMeasurement}();function checkText(e){if(!e)throw new Error('A text measurement configuration has to provide a "text" value');return e}function checkFont(e){var t=Font.from(e);if(!t.size)throw new Error('A text measurement configuration has to provide a font size via the "font" property');return t}function create$9(){return new SizeMeasurement(!0)}var Slider=function(e){function Slider(){return _classCallCheck(this,Slider),_possibleConstructorReturn(this,(Slider.__proto__||Object.getPrototypeOf(Slider)).apply(this,arguments))}return _inherits(Slider,Widget),_createClass(Slider,[{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(Slider.prototype.__proto__||Object.getPrototypeOf(Slider.prototype),"_getXMLAttributes",this).call(this).concat([["selection",this.selection],["minimum",this.minimum],["maximum",this.maximum]])}},{key:"_nativeType",get:function(){return"tabris.Slider"}}]),Slider}();NativeObject.defineProperties(Slider.prototype,{minimum:{type:"integer",default:0},maximum:{type:"integer",default:100},selection:{type:"integer",nocache:!0},tintColor:{type:"ColorValue",default:"initial"}}),NativeObject.defineEvents(Slider.prototype,{select:{native:!0,changes:"selection"}});var StatusBar=function(e){function StatusBar(){return _classCallCheck(this,StatusBar),_possibleConstructorReturn(this,(StatusBar.__proto__||Object.getPrototypeOf(StatusBar)).apply(this,arguments))}return _inherits(StatusBar,NativeObject),_createClass(StatusBar,[{key:"_nativeCreate",value:function _nativeCreate(e){if(!0!==e)throw new Error("StatusBar can not be created");_get(StatusBar.prototype.__proto__||Object.getPrototypeOf(StatusBar.prototype),"_nativeCreate",this).call(this)}},{key:"_listen",value:function _listen(e,t){"tap"===e?this._nativeListen(e,t):_get(StatusBar.prototype.__proto__||Object.getPrototypeOf(StatusBar.prototype),"_listen",this).call(this,e,t)}},{key:"_setParent",value:function _setParent(){throw new Error("Parent of StatusBar can not be changed")}},{key:"_dispose",value:function _dispose(){throw new Error("StatusBar can not be disposed")}},{key:"_nativeType",get:function(){return"tabris.StatusBar"}}]),StatusBar}();function create$10(){return new StatusBar(!0)}NativeObject.defineProperties(StatusBar.prototype,{theme:{type:types.string,choice:["default","light","dark"],default:"default"},displayMode:{type:types.string,choice:["default","float","hide"],default:"default"},height:{type:types.number,readonly:!0,nocache:!0},background:{type:types.ColorValue,nocache:!0}}),NativeObject.defineEvents(StatusBar.prototype,{tap:!0});var Switch=function(e){function Switch(){return _classCallCheck(this,Switch),_possibleConstructorReturn(this,(Switch.__proto__||Object.getPrototypeOf(Switch)).apply(this,arguments))}return _inherits(Switch,Widget),_createClass(Switch,[{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(Switch.prototype.__proto__||Object.getPrototypeOf(Switch.prototype),"_getXMLAttributes",this).call(this).concat([["text",this.text],["checked",this.checked]])}},{key:"_nativeType",get:function(){return"tabris.Switch"}}]),Switch}();NativeObject.defineProperties(Switch.prototype,{checked:{type:"boolean",nocache:!0},thumbOnColor:{type:"ColorValue",default:"initial"},thumbOffColor:{type:"ColorValue",default:"initial"},trackOnColor:{type:"ColorValue",default:"initial"},trackOffColor:{type:"ColorValue",default:"initial"}}),NativeObject.defineEvents(Switch.prototype,{select:{native:!0,changes:"checked"}});var TabFolder=function(e){function TabFolder(e){_classCallCheck(this,TabFolder);var t=_possibleConstructorReturn(this,(TabFolder.__proto__||Object.getPrototypeOf(TabFolder)).call(this,e));return Object.defineProperty(t,"$previousSelection",{enumerable:!1,writable:!0,value:void 0}),t._nativeListen("select",!0),t}return _inherits(TabFolder,Composite),_createClass(TabFolder,[{key:"_scheduleRenderChildren",value:function _scheduleRenderChildren(){this.$flushChildren()}},{key:"_nativeListen",value:function _nativeListen(e,t){("select"!==e||t)&&_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_nativeListen",this).call(this,e,t)}},{key:"_initLayout",value:function _initLayout(){Object.defineProperty(this,"_layout",{enumerable:!1,writable:!1,value:null})}},{key:"_acceptChild",value:function _acceptChild(e){return e instanceof Tab}},{key:"_addChild",value:function _addChild(e,t){_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_addChild",this).call(this,e,t),0===this.$children.indexOf(e)&&(e.$trigger("appear"),this.$previousSelection=e)}},{key:"_removeChild",value:function _removeChild(e){if(!this._inDispose){var t=this.$children.indexOf(e),r=this.$children[t+1],n=this.$children[t-1],i=r||n;i?this.selection=i:this._triggerChangeEvent("selection",null)}_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_removeChild",this).call(this,e)}},{key:"_listen",value:function _listen(e,t){"selectionIndexChanged"===e?this._onoff("selectionChanged",t,this.$triggerSelectionIndexChanged):_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){if("select"===e){var r=tabris._nativeObjectRegistry.find(t.selection),n=_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_trigger",this).call(this,"select",{selection:r});return r._trigger("select"),this.$previousSelection===r&&r._trigger("reselect"),this._triggerChangeEvent("selection",r),n}if("scroll"===e){var i=t.selection?tabris._nativeObjectRegistry.find(t.selection):null;return _get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_trigger",this).call(this,"scroll",{selection:i,offset:t.offset})}return _get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_trigger",this).call(this,e,t)}},{key:"_triggerChangeEvent",value:function _triggerChangeEvent(e,t){"selection"===e?this.$previousSelection!==t&&(_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_triggerChangeEvent",this).call(this,e,t),this.$previousSelection&&this.$previousSelection._trigger("disappear"),t&&t._trigger("appear"),this.$previousSelection=t):_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_triggerChangeEvent",this).call(this,e,t)}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e=this.selection;return _get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_getXMLAttributes",this).call(this).concat([["selection",e?e.toString():""]])}},{key:"$triggerSelectionIndexChanged",value:function $triggerSelectionIndexChanged(e){var{value:t}=e;_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),"_triggerChangeEvent",this).call(this,"selectionIndex",this._children().indexOf(t))}},{key:"_nativeType",get:function(){return"tabris.TabFolder"}},{key:"selectionIndex",set:function(e){var t=this._children();t[e]?this.selection=t[e]:hint(this,"Can not set selectionIndex to "+e+", value out of bounds")},get:function(){return this._children().indexOf(this.selection)}}]),TabFolder}();function createElement$3(e,t){var r=Composite.prototype[JSX.jsxFactory].call(this,e,omit(t,["selection","selectionIndex"]));return r.set(pick(t,["selection","selectionIndex"])),r}NativeObject.defineProperties(TabFolder.prototype,{paging:{type:types.boolean,default:!1},tabBarLocation:{choice:["top","bottom","hidden","auto"],default:"auto",const:!0},tabMode:{type:types.string,choice:["fixed","scrollable"],default:"fixed",const:!0},selection:{type:{convert:function(e,t){var r=types.Widget.convert(e);if(!r||!(r instanceof Tab)||t._children().indexOf(r)<0)throw new Error("Can not set selection to "+toValueString(e));return r},encode:types.Widget.encode,decode:function(e,t){return t._children().length?types.Widget.decode(e):null}},nocache:!0},tabTintColor:{type:types.ColorValue,default:"initial"},selectedTabTintColor:{type:types.ColorValue,default:"initial"},tabBarBackground:{type:types.ColorValue,default:"initial"},tabBarElevation:{type:types.number,nocache:!0},selectedTabIndicatorTintColor:{type:types.ColorValue,default:"initial"}}),NativeObject.defineChangeEvents(TabFolder.prototype,["selectionIndex"]),NativeObject.defineEvents(TabFolder.prototype,{scroll:{native:!0},select:{native:!0}}),TabFolder.prototype[JSX.jsxFactory]=createElement$3;var Tab=function(e){function Tab(){return _classCallCheck(this,Tab),_possibleConstructorReturn(this,(Tab.__proto__||Object.getPrototypeOf(Tab)).apply(this,arguments))}return _inherits(Tab,Composite),_createClass(Tab,[{key:"_setParent",value:function _setParent(e,t){if(e&&!(e instanceof TabFolder))throw new Error("Tab could not be appended to "+toValueString(e));_get(Tab.prototype.__proto__||Object.getPrototypeOf(Tab.prototype),"_setParent",this).call(this,e,t)}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(Tab.prototype.__proto__||Object.getPrototypeOf(Tab.prototype),"_getXMLAttributes",this).call(this).concat([["title",this.title]])}},{key:"_nativeType",get:function(){return"tabris.Tab"}}]),Tab}();NativeObject.defineProperties(Tab.prototype,{title:{type:"string",default:""},image:{type:"ImageValue",default:null},selectedImage:{type:"ImageValue",default:null},badge:{type:"natural",default:0},badgeColor:{type:"ColorValue",default:"initial"}}),NativeObject.defineEvents(Tab.prototype,{disappear:!0,appear:!0,select:!0,reselect:!0});var TextView=function(e){function TextView(){return _classCallCheck(this,TextView),_possibleConstructorReturn(this,(TextView.__proto__||Object.getPrototypeOf(TextView)).apply(this,arguments))}return _inherits(TextView,Widget),_createClass(TextView,[{key:"_getXMLContent",value:function _getXMLContent(){var e=_get(TextView.prototype.__proto__||Object.getPrototypeOf(TextView.prototype),"_getXMLContent",this).call(this);return this._shouldPrintTextAsXMLContent()&&(e=e.concat(this.text.split("\n").map(function(e){return"  "+e}))),e}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e=_get(TextView.prototype.__proto__||Object.getPrototypeOf(TextView.prototype),"_getXMLAttributes",this).call(this);return this.markupEnabled&&e.push(["markupEnabled","true"]),this._shouldPrintTextAsXMLContent()||e.push(["text",this.text]),e}},{key:"_shouldPrintTextAsXMLContent",value:function _shouldPrintTextAsXMLContent(){return this.markupEnabled||this.text.length>25||-1!==this.text.indexOf("\n")}},{key:"_listen",value:function _listen(e,t){"tapLink"===e?this._nativeListen(e,t):_get(TextView.prototype.__proto__||Object.getPrototypeOf(TextView.prototype),"_listen",this).call(this,e,t)}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t),n=this.withoutChildren(t);return _get(TextView.prototype.__proto__||Object.getPrototypeOf(TextView.prototype),JSX.jsxFactory,this).call(this,e,this.withContentText(n,r,"text",!!t&&t.markupEnabled))}},{key:"_nativeType",get:function(){return"tabris.TextView"}}]),TextView}();NativeObject.defineProperties(TextView.prototype,{alignment:{type:types.string,choice:["left","right","centerX"],default:"left"},markupEnabled:{type:types.boolean,default:!1},lineSpacing:{type:types.number,default:1},selectable:{type:types.boolean,default:!1},maxLines:{type:{convert:function(e){return e<=0?null:types.natural.convert(e)}},default:null,nullable:!0},text:{type:types.string,default:""},textColor:{type:types.ColorValue,default:"initial"},font:{type:types.FontValue,default:"initial"}}),NativeObject.defineEvents(TextView.prototype,{tapLink:{native:!0}});var TimeDialog=function(e){function TimeDialog(e){_classCallCheck(this,TimeDialog);var t=_possibleConstructorReturn(this,(TimeDialog.__proto__||Object.getPrototypeOf(TimeDialog)).call(this,e));return t._nativeListen("close",!0),t._nativeListen("select",!0),t._autoDispose=!0,t}return _inherits(TimeDialog,Popup),_createClass(TimeDialog,null,[{key:"open",value:function open(e){return(e instanceof TimeDialog?e:e instanceof Date?new TimeDialog({date:e}):new TimeDialog).open()}}]),_createClass(TimeDialog,[{key:"_trigger",value:function _trigger(e,t){if("close"===e)this._handleCloseEvent(t);else{if("select"!==e)return _get(TimeDialog.prototype.__proto__||Object.getPrototypeOf(TimeDialog.prototype),"_trigger",this).call(this,e,t);t.date=new Date(t.date),_get(TimeDialog.prototype.__proto__||Object.getPrototypeOf(TimeDialog.prototype),"_trigger",this).call(this,"select",t),this._handleCloseEvent(t)}}},{key:"_handleCloseEvent",value:function _handleCloseEvent(e){_get(TimeDialog.prototype.__proto__||Object.getPrototypeOf(TimeDialog.prototype),"_trigger",this).call(this,"close",e),this.dispose()}},{key:"_nativeType",get:function(){return"tabris.TimeDialog"}}]),TimeDialog}();NativeObject.defineProperties(TimeDialog.prototype,{date:{type:types.Date,default:null}}),NativeObject.defineEvents(TimeDialog.prototype,{select:{native:!0},close:{native:!0}});var ToggleButton=function(e){function ToggleButton(){return _classCallCheck(this,ToggleButton),_possibleConstructorReturn(this,(ToggleButton.__proto__||Object.getPrototypeOf(ToggleButton)).apply(this,arguments))}return _inherits(ToggleButton,Widget),_createClass(ToggleButton,[{key:"_getXMLAttributes",value:function _getXMLAttributes(){return _get(ToggleButton.prototype.__proto__||Object.getPrototypeOf(ToggleButton.prototype),"_getXMLAttributes",this).call(this).concat([["text",this.text],["checked",this.checked]])}},{key:JSX.jsxFactory,value:function(e,t){var r=this.getChildren(t),n=this.withoutChildren(t);return _get(ToggleButton.prototype.__proto__||Object.getPrototypeOf(ToggleButton.prototype),JSX.jsxFactory,this).call(this,e,this.withContentText(n,r,"text"))}},{key:"_nativeType",get:function(){return"tabris.ToggleButton"}}]),ToggleButton}();NativeObject.defineProperties(ToggleButton.prototype,{text:{type:types.string,default:""},image:{type:types.ImageValue,default:null},checked:{type:types.boolean,nocache:!0},alignment:{type:types.string,choice:["left","right","centerX"],default:"centerX"},textColor:{type:types.ColorValue,default:"initial"},font:{type:types.FontValue,default:"initial"}}),NativeObject.defineEvents(ToggleButton.prototype,{select:{native:!0,changes:"checked"}});var Video=function(e){function Video(){return _classCallCheck(this,Video),_possibleConstructorReturn(this,(Video.__proto__||Object.getPrototypeOf(Video)).apply(this,arguments))}return _inherits(Video,Widget),_createClass(Video,[{key:"_listen",value:function _listen(e,t){"stateChanged"===e||"speedChanged"===e?this._nativeListen(e,t):_get(Video.prototype.__proto__||Object.getPrototypeOf(Video.prototype),"_listen",this).call(this,e,t)}},{key:"_trigger",value:function _trigger(e,t){return"stateChanged"===e?this._triggerChangeEvent("state",t.state):"speedChanged"===e?this._triggerChangeEvent("speed",t.speed):_get(Video.prototype.__proto__||Object.getPrototypeOf(Video.prototype),"_trigger",this).call(this,e,t)}},{key:"pause",value:function pause(){this._nativeCall("pause")}},{key:"play",value:function play(e){this._nativeCall("play",{speed:arguments.length>0?types.number.convert(e):1})}},{key:"seek",value:function seek(e){this._nativeCall("seek",{position:types.number.convert(e)})}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e=_get(Video.prototype.__proto__||Object.getPrototypeOf(Video.prototype),"_getXMLAttributes",this).call(this);return this.url&&e.push(["url",this.url]),e.push(["state",this.state]),"play"===this.state&&e.push(["speed",this.speed]),"empty"!==this.state&&e.push(["position",this.position]),this.duration&&e.push(["duration",this.duration]),e}},{key:"_nativeType",get:function(){return"tabris.Video"}}]),Video}();NativeObject.defineProperties(Video.prototype,{url:{type:"string",default:""},controlsVisible:{type:"boolean",default:!0},autoPlay:{type:"boolean",default:!0},speed:{readonly:!0,nocache:!0},position:{readonly:!0,nocache:!0},duration:{readonly:!0,nocache:!0},state:{readonly:!0,nocache:!0}});var EVENT_TYPES=["navigate","load","download","message"],WebView=function(e){function WebView(){return _classCallCheck(this,WebView),_possibleConstructorReturn(this,(WebView.__proto__||Object.getPrototypeOf(WebView)).apply(this,arguments))}return _inherits(WebView,Widget),_createClass(WebView,[{key:"_listen",value:function _listen(e,t){EVENT_TYPES.includes(e)?this._nativeListen(e,t):_get(WebView.prototype.__proto__||Object.getPrototypeOf(WebView.prototype),"_listen",this).call(this,e,t)}},{key:"postMessage",value:function postMessage(e,t){return this._nativeCall("postMessage",{data:e,origin:t}),this}},{key:"goBack",value:function goBack(){this._nativeCall("goBack")}},{key:"goForward",value:function goForward(){this._nativeCall("goForward")}},{key:"_loadData",value:function _loadData(e,t){this._nativeCall("loadData",{data:e,mimeType:t})}},{key:"_getXMLContent",value:function _getXMLContent(){var e=_get(WebView.prototype.__proto__||Object.getPrototypeOf(WebView.prototype),"_getXMLContent",this).call(this);return this.html&&(e=e.concat(this.html.split("\n").map(function(e){return"  "+e}))),e}},{key:"_getXMLAttributes",value:function _getXMLAttributes(){var e=_get(WebView.prototype.__proto__||Object.getPrototypeOf(WebView.prototype),"_getXMLAttributes",this).call(this);return this.url&&e.push(["url",this.url]),e}},{key:"_nativeType",get:function(){return"tabris.WebView"}}]),WebView}();NativeObject.defineProperties(WebView.prototype,{url:{type:"string",nocache:!0},html:{type:"string",nocache:!0},headers:{type:"any",default:Object.freeze({})},canGoBack:{type:"boolean",readonly:!0,nocache:!0},canGoForward:{type:"boolean",readonly:!0,nocache:!0},initScript:{type:"string",default:null,nullable:!0}}),NativeObject.defineEvents(WebView.prototype,{load:{native:!0},message:{native:!0}});var CONNECTING=0,OPEN=1,CLOSING=2,CLOSED=3,CONSTANTS={CONNECTING:{value:CONNECTING},OPEN:{value:OPEN},CLOSING:{value:CLOSING},CLOSED:{value:CLOSED}},EVENT_TYPES$1=["open","message","close","error"],_WebSocket=function(e){function _WebSocket(e){_classCallCheck(this,_WebSocket);var t=_possibleConstructorReturn(this,(_WebSocket.__proto__||Object.getPrototypeOf(_WebSocket)).call(this,e));return EVENT_TYPES$1.forEach(function(e){return t._nativeListen(e,!0)}),t}return _inherits(_WebSocket,NativeObject),_createClass(_WebSocket,[{key:"_nativeType",get:function(){return"tabris.WebSocket"}}]),_WebSocket}();NativeObject.defineProperties(_WebSocket.prototype,{url:{type:"string",default:""},protocol:{type:"any",default:""},binaryType:{type:"string",default:"blob"},bufferedAmount:{type:"number",nocache:!0}});var WebSocket=function(){function WebSocket(e,t){if(_classCallCheck(this,WebSocket),"string"!=typeof e)throw new Error("WebSocket url "+toValueString(e)+" is not a string");var r=extractScheme(e);if("ws"!==r&&"wss"!==r)throw new Error("The WebSocket url has to have a scheme of 'ws' or 'wss' but is '"+r+"'");if("string"!=typeof t&&!Array.isArray(t))throw new Error("The WebSocket protocol has too be a string or an array of strings");var n=Array.isArray(t)?t:[t];this.url=e,this.readyState=CONNECTING,this.protocol="",this.extensions="",addDOMEventTargetMethods(this),defineEventHandlerProperties(this,EVENT_TYPES$1),Object.defineProperty(this,"_nativeObject",{enumerable:!1,writable:!1,value:this.$createProxy(e,n)})}return _createClass(WebSocket,[{key:"$createProxy",value:function $createProxy(e,t){var r=this;return new _WebSocket({url:e,protocol:t}).on("open",function(e){r.readyState=OPEN,r.protocol=e.protocol,r.extensions=e.extensions,r.dispatchEvent(Object.assign(new Event("open"),omit(e,["target","type","timeStamp"])))}).on("message",function(e){r.readyState===OPEN&&r.dispatchEvent(Object.assign(new Event("message"),omit(e,["target","type","timeStamp"])))}).on("close",function(e){r.readyState=CLOSED,r.dispatchEvent(Object.assign(new Event("close"),omit(e,["target","type","timeStamp"])))}).on("error",function(e){r.readyState=CLOSED,r.dispatchEvent(Object.assign(new Event("error"),omit(e,["target","type","timeStamp"])))})}},{key:"send",value:function send(e){if(this.readyState===CONNECTING)throw new Error("Can not 'send' WebSocket message when WebSocket state is CONNECTING");if("string"==typeof e)this._nativeObject._nativeCall("send",{data:e});else{if(!isReadable(e))throw new Error("Data of type "+typeof e+" is not supported in WebSocket 'send' operation");this._nativeObject._nativeCall("send",{data:read(e)})}}},{key:"close",value:function close(e,t){if(e&&("number"!=typeof e||"number"!=typeof e||!(1e3===e||e>=3e3&&e<=4999)))throw new Error("A given close code has to be either 1000 or in the range 3000 - 4999 inclusive");if(t&&getStringByteSize(t)>123)throw new Error("The close reason can not be larger than 123 utf-8 bytes");if(this.readyState!==CLOSING&&this.readyState!==CLOSED){this.readyState=CLOSING;var r={};e&&(r.code=e),t&&(r.reason=t),this._nativeObject._nativeCall("close",r)}}},{key:"binaryType",set:function(e){this._nativeObject.binaryType=e},get:function(){return this._nativeObject.binaryType}},{key:"bufferedAmount",set:function(e){hint(this,'Can not set read-only property "bufferedAmount"')},get:function(){return this._nativeObject.bufferedAmount}}]),WebSocket}();function getStringByteSize(e){var t=0;if(!e.length)return 0;for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);n<=127?t+=1:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,r++):t+=n<65535?3:4}return t}function extractScheme(e){var t=/^(\S+?):/.exec(e);return t?t[1]:null}Object.defineProperties(WebSocket,CONSTANTS),Object.defineProperties(WebSocket.prototype,CONSTANTS);var EVENT_TYPES$2=["message","error","messageerror"],_Worker=function(e){function _Worker(){return _classCallCheck(this,_Worker),_possibleConstructorReturn(this,(_Worker.__proto__||Object.getPrototypeOf(_Worker)).apply(this,arguments))}return _inherits(_Worker,NativeObject),_createClass(_Worker,[{key:"_nativeType",get:function(){return"tabris.Worker"}}]),_Worker}();NativeObject.defineProperty(_Worker.prototype,"scriptPath",{type:"string",default:""}),NativeObject.defineEvents(_Worker.prototype,{message:{native:!0},error:{native:!0},messageError:!0});var Worker=function(){function Worker(e){if(_classCallCheck(this,Worker),"string"!=typeof e)throw new Error("The Worker script path has to be of type string");addDOMEventTargetMethods(this),defineEventHandlerProperties(this,EVENT_TYPES$2),Object.defineProperty(this,"_nativeObject",{enumerable:!1,writable:!1,value:this.$createProxy({scriptPath:e})})}return _createClass(Worker,[{key:"$createProxy",value:function $createProxy(e){var t=this;return new _Worker(e).onMessage(function(e){t.dispatchEvent(Object.assign(new Event("message"),omit(e,["target","type","timeStamp"])))}).onError(function(e){t.dispatchEvent(Object.assign(new Event("error"),omit(e,["target","type","timeStamp"])))}).onMessageError(function(e){t.dispatchEvent(Object.assign(new Event("messageerror"),omit(e,["target","type","timeStamp"])))})}},{key:"postMessage",value:function postMessage(e,t){this._validateMessage(e),this._nativeObject._nativeCall("postMessage",{message:e,transferList:t})}},{key:"_validateMessage",value:function _validateMessage(e){if(this._isValidMessage(e)){if(e instanceof Array)for(var t=0;t<e.length;t++)this._validateMessage(e[t]);else if("object"==typeof e)for(var r in e)e.hasOwnProperty(r)&&this._validateMessage(e[r])}else this.dispatchEvent(Object.assign(new Event("messageerror")))}},{key:"_isValidMessage",value:function _isValidMessage(e){return void 0===e||null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||e&&(e.constructor===Object||e.constructor===Array||e.constructor===DataView||e.constructor===ArrayBuffer||e.constructor===ImageData)}},{key:"terminate",value:function terminate(){this._nativeObject._nativeCall("terminate")}}]),Worker}(),HttpRequest=function(e){function HttpRequest(){_classCallCheck(this,HttpRequest);var e=_possibleConstructorReturn(this,(HttpRequest.__proto__||Object.getPrototypeOf(HttpRequest)).call(this));return e._nativeListen("stateChanged",!0),e._nativeListen("downloadProgress",!0),e._nativeListen("uploadProgress",!0),e}return _inherits(HttpRequest,NativeObject),_createClass(HttpRequest,[{key:"abort",value:function abort(){this._nativeCall("abort",{})}},{key:"send",value:function send(e){this._nativeCall("send",e)}},{key:"_nativeType",get:function(){return"tabris.HttpRequest"}}]),HttpRequest}(),UNSENT=0,OPENED=1,HEADERS_RECEIVED=2,LOADING=3,DONE=4,EVENT_TYPES$3=["loadstart","readystatechange","load","loadend","progress","timeout","abort","error"],UPLOAD_EVENT_TYPES=["progress","loadstart","load","loadend","timeout","abort","error"],SUPPORTED_SCHEMES=["http","https","file"],XMLHttpRequest=function(){function XMLHttpRequest(){_classCallCheck(this,XMLHttpRequest),Object.defineProperties(this,{$authorRequestHeaders:{enumerable:!1,writable:!0,value:{}},$timeout:{enumerable:!1,writable:!0,value:0},$status:{enumerable:!1,writable:!0,value:0},$statusText:{enumerable:!1,writable:!0,value:""},$responseHeaders:{enumerable:!1,writable:!0,value:""},$readyState:{enumerable:!1,writable:!0,value:UNSENT},$responseData:{enumerable:!1,writable:!0,value:""},$withCredentials:{enumerable:!1,writable:!0,value:!1},$responseType:{enumerable:!1,writable:!0,value:""},$sendInvoked:{enumerable:!1,writable:!0,value:!1},$isSynchronous:{enumerable:!1,writable:!0,value:!1},$error:{enumerable:!1,writable:!0,value:!1},$uploadComplete:{enumerable:!1,writable:!0,value:!1},upload:{value:{}}}),defineEventHandlerProperties(this,EVENT_TYPES$3),defineEventHandlerProperties(this.upload,UPLOAD_EVENT_TYPES),addDOMEventTargetMethods(this),addDOMEventTargetMethods(this.upload)}return _createClass(XMLHttpRequest,[{key:"open",value:function open(e,t,r){var n={};if(validateRequiredOpenArgs(e,t),n.source=t,n.isRelative=!new RegExp("^(?:[a-z]+:)?//","i").test(t),void 0===r&&(r=!0),!r)throw new Error("Only asynchronous request supported.");this.$requestMethod=e,this.$requestUrl=n,this.$isSynchronous=!r,this.$authorRequestHeaders={},this.$sendInvoked=!1,this.$responseData=null,this.$readyState!==OPENED&&(this.$readyState=OPENED,dispatchEvent("readystatechange",this))}},{key:"send",value:function send(e){var t=this;if(this.$nativeObject=(new HttpRequest).on("stateChanged",function(e){return handleStateChange(e,t)}).on("downloadProgress",function(e){return dispatchProgressEvent("progress",t,e)}).on("uploadProgress",function(e){return dispatchProgressEvent("progress",t.upload,e)}),this.$readyState!==OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'send'");if(this.$sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to execute 'send'");["GET","HEAD"].indexOf(this.$requestMethod)>-1&&(e=null),e instanceof FormData&&(e=formDataToBlob(e)),this.$requestBody=e&&getBytes(e)?getBytes(e):e,e instanceof Blob&&-1===Object.keys(this.$authorRequestHeaders).map(function(e){return e.toLowerCase()}).indexOf("content-type")&&(this.$authorRequestHeaders["Content-Type"]=e.type),this.$error=this.$uploadComplete=!1,e||(this.$uploadComplete=!0),this.$sendInvoked=!0,dispatchProgressEvent("loadstart",this),this.$uploadComplete||dispatchProgressEvent("loadstart",this.upload),this.$nativeObject.send({url:this.$requestUrl.source,method:this.$requestMethod,timeout:this.timeout,headers:this.$authorRequestHeaders,data:this.$requestBody,responseType:this.$responseType})}},{key:"abort",value:function abort(){this.$nativeObject&&this.$nativeObject.abort(),[UNSENT,OPENED].indexOf(this.$readyState)>-1&&!this.$sendInvoked||this.$readyState===DONE||(dispatchEvent("readystatechange",this),this.$uploadComplete||(this.$uploadComplete=!0,dispatchAbortProgressEvents(this.upload)),dispatchAbortProgressEvents(this)),this.$readyState=UNSENT}},{key:"setRequestHeader",value:function setRequestHeader(e,t){if(this.$readyState!==OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'setRequestHeader'");if(this.$sendInvoked)throw new Error("InvalidStateError: cannot set request header if 'send()' invoked and request not completed");if(!validHttpToken(e))throw new TypeError("Invalid HTTP header name, failed to execute 'open'");if(!isValidHttpHeaderValue(t))throw new TypeError("Invalid HTTP header value, failed to execute 'open'");e in this.$authorRequestHeaders?this.$authorRequestHeaders[e]=this.$authorRequestHeaders[e]+", "+t:this.$authorRequestHeaders[e]=t}},{key:"getResponseHeader",value:function getResponseHeader(e){if([UNSENT,OPENED].indexOf(this.readyState)>-1)return null;if(this.$error)return null;for(var t in this.$responseHeaders)if(t.toLowerCase()===e.toLowerCase())return this.$responseHeaders[t];return null}},{key:"getAllResponseHeaders",value:function getAllResponseHeaders(){if([UNSENT,OPENED].indexOf(this.readyState)>-1)return"";if(this.$error)return"";var e=[];for(var t in this.$responseHeaders)e.push(t+": "+this.$responseHeaders[t]);return e.join("\r\n")}},{key:"readyState",get:function(){return this.$readyState}},{key:"timeout",get:function(){return this.$timeout},set:function(e){isNaN(e)||(this.$timeout=Math.round(e))}},{key:"responseText",get:function(){if(""!==this.$responseType&&"text"!==this.$responseType)throw new Error("XHR responseText not accessible for non-text responseType");return this.$readyState!==LOADING&&this.$readyState!==DONE?"":this.$responseData||""}},{key:"response",get:function(){return""===this.$responseType||"string"===this.$responseType?this.$readyState!==LOADING&&this.$readyState!==DONE?"":this.$responseData||"":this.$readyState!==DONE?null:this.$responseData}},{key:"responseType",get:function(){return this.$responseType},set:function(e){if(this.$readyState===LOADING||this.$readyState===DONE)throw new Error("The response type cannot be set when state is LOADING or DONE.");if(!(["arraybuffer","blob","document","json","text"].indexOf(e)<0)){if(["blob","document","json"].indexOf(e)>-1)throw new Error("Unsupported responseType, only 'text' and 'arraybuffer' are supported");this.$responseType=e}}},{key:"status",get:function(){return[OPENED,UNSENT].indexOf(this.$readyState)>-1?0:this.$error?0:this.$status}},{key:"statusText",get:function(){return[OPENED,UNSENT].indexOf(this.$readyState)>-1?"":this.$error?"":this.$statusText}},{key:"withCredentials",get:function(){return this.$withCredentials},set:function(e){if(this.$readyState!==UNSENT&&this.$readyState!==OPENED)throw new Error("InvalidStateError: state must be 'UNSENT' or 'OPENED' when setting withCredentials");if(this.$sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to set 'withCredentials'");"boolean"==typeof e&&(this.$withCredentials=e)}}]),XMLHttpRequest}();function handleStateChange(e,t){switch(e.state){case"headers":t.$readyState=HEADERS_RECEIVED,t.$status=e.code,t.$statusText=e.message,t.$responseHeaders=e.headers,dispatchEvent("readystatechange",t),t.$uploadComplete=!0,dispatchFinishedProgressEvents(t.upload);break;case"loading":t.$readyState=LOADING,dispatchEvent("readystatechange",t);break;case"finished":t.$responseData=e.response,t.$readyState=DONE,dispatchEvent("readystatechange",t),dispatchFinishedProgressEvents(t),dispatchFinishedProgressEvents(t.upload),t.$nativeObject.dispose(),t.$nativeObject=null;break;case"error":handleRequestError("error",t);break;case"timeout":handleRequestError("timeout",t);break;case"abort":handleRequestError("abort",t)}}function handleRequestError(e,t){t.$error=!0,t.$readyState=DONE,dispatchEvent("readystatechange",t),dispatchErrorProgressEvents(e,t),t.$uploadComplete||(t.$uploadComplete=!0,dispatchErrorProgressEvents(e,t.upload)),t.$nativeObject.dispose(),t.$nativeObject=null}function validateRequiredOpenArgs(e,t){if(!e)throw new TypeError("Method argument should be specified to execute 'open'");if(!t)throw new TypeError("URL argument should be specified to execute 'open'");validateMethod(e),validateUrl(t)}function validateMethod(e){if(!validHttpToken(e))throw new TypeError("Invalid HTTP method, failed to execute 'open'");var t=e.toUpperCase();["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"].indexOf(t)>=0&&(e=t);if(["CONNECT","TRACE","TRACK"].indexOf(e)>=0)throw new Error("SecurityError: '"+e+"' HTTP method is not secure, failed to execute 'open'")}function validHttpToken(e){return!(/[^\x21-\x7E]/.test(e)||["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"].indexOf(e)>=0)}function isValidHttpHeaderValue(e){return/^[\x09\x0A\x0D\x20-\x7E\xA0-\xFF]*$/.test(e)&&e.indexOf("\n")<0&&e.indexOf("\r")<0}function validateUrl(e){var t=extractScheme$1(e);if(t&&-1===SUPPORTED_SCHEMES.indexOf(t))throw new SyntaxError("Unsupported URL scheme, failed to execute 'open'")}function extractScheme$1(e){var t=/^(\S+?):/.exec(e);return t?t[1]:null}function dispatchEvent(e,t){t.dispatchEvent(new Event(e))}function dispatchProgressEvent(e,t,r){t.dispatchEvent(new ProgressEvent(e,r))}function dispatchAbortProgressEvents(e){dispatchProgressEvent("progress",e),dispatchProgressEvent("abort",e),dispatchProgressEvent("loadend",e)}function dispatchErrorProgressEvents(e,t){dispatchProgressEvent("progress",t),dispatchProgressEvent(e,t),dispatchProgressEvent("loadend",t)}function dispatchFinishedProgressEvents(e){dispatchProgressEvent("load",e),dispatchProgressEvent("loadend",e)}function $(e){if("number"==typeof e)return tabris._nativeObjectRegistry.find("$"+e);if("string"==typeof e||e instanceof Function||0===arguments.length)return tabris.contentView.find(e||"*");if(!(e instanceof Object))return""+e;if(!Object.keys(e).length)return new WidgetCollection;if(Object.keys(e).length>1||!("children"in e))throw new Error("$ does not support attributes");var t=normalizeChildren(e.children);if(t.some(function(e){return e instanceof Widget})){var r=[],n=[];return t.forEach(function(e){e instanceof Widget?(n.length&&(r.push(new TextView({text:joinTextContent(n,!1)})),n=[]),r.push(e)):n.push(e)}),n.length&&r.push(new TextView({text:joinTextContent(n,!1)})),new WidgetCollection(r)}return joinTextContent(t,!1)}Object.defineProperties(XMLHttpRequest.prototype,{UNSENT:{value:UNSENT},OPENED:{value:OPENED},HEADERS_RECEIVED:{value:HEADERS_RECEIVED},LOADING:{value:LOADING},DONE:{value:DONE}});var Headers=function(){function Headers(e){var t=this;_classCallCheck(this,Headers),Object.defineProperties(this,{$map:{enumerable:!1,writable:!0,value:{}}}),e instanceof Headers?e.forEach(function(e,r){return t.append(r,e)}):Array.isArray(e)?e.forEach(function(e){return t.append(e[0],e[1])}):e&&Object.getOwnPropertyNames(e).forEach(function(r){return t.append(r,e[r])})}return _createClass(Headers,[{key:"append",value:function append(e,t){e=normalizeName(e);var r=this.$map[e];this.$map[e]=r?r+","+t:""+t}},{key:"delete",value:function _delete(e){delete this.$map[normalizeName(e)]}},{key:"get",value:function get(e){return e=normalizeName(e),this.has(e)?this.$map[e]:null}},{key:"has",value:function has(e){return this.$map.hasOwnProperty(normalizeName(e))}},{key:"set",value:function set(e,t){this.$map[normalizeName(e)]=""+t}},{key:"forEach",value:function forEach(e,t){for(var r in this.$map)this.$map.hasOwnProperty(r)&&e.call(t,this.$map[r],r,this)}},{key:"keys",value:function keys(){var e=[];return this.forEach(function(t,r){return e.push(r)}),iteratorFor(e)}},{key:"values",value:function values(){var e=[];return this.forEach(function(t){return e.push(t)}),iteratorFor(e)}},{key:"entries",value:function entries(){var e=[];return this.forEach(function(t,r){return e.push([r,t])}),iteratorFor(e)}},{key:iteratorSymbol(),value:function(){return this.entries()}}]),Headers}();function normalizeName(e){if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e=""+e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function iteratorFor(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t[iteratorSymbol()]=function(){return t},t}function iteratorSymbol(){return"Symbol"in global&&"iterator"in global.Symbol?global.Symbol.iterator:"@@iterator"}var Body=function(){function Body(){_classCallCheck(this,Body),Object.defineProperties(this,{$bodyUsed:{enumerable:!1,writable:!0,value:!1}})}return _createClass(Body,[{key:"_initBody",value:function _initBody(e){if(Object.defineProperty(this,"_bodyInit",{enumerable:!1,writable:!1,value:e}),e)if("string"==typeof e)Object.defineProperty(this,"_bodyText",{enumerable:!1,writable:!1,value:e});else{if(!isReadable(e))throw new Error("unsupported BodyInit type");Object.defineProperty(this,"_bodyBuffer",{enumerable:!1,writable:!1,value:read(e)})}else Object.defineProperty(this,"_bodyText",{enumerable:!1,writable:!1,value:""})}},{key:"text",value:function text(){return this.$consumed()||Promise.resolve(this._bodyBuffer?TextDecoder.decode(this._bodyBuffer,this._encoding):this._bodyText)}},{key:"json",value:function json(){return this.text().then(JSON.parse)}},{key:"blob",value:function blob(){return this.arrayBuffer().then(function(e){return new Blob([e])})}},{key:"arrayBuffer",value:function arrayBuffer(){return this.$consumed()||Promise.resolve(this._bodyBuffer.slice(0))}},{key:"$consumed",value:function $consumed(){if(this.$bodyUsed)return Promise.reject(new TypeError("Already read"));this.$bodyUsed=!0}},{key:"bodyUsed",get:function(){return!!this.$bodyUsed}},{key:"_encoding",get:function(){}}]),Body}(),METHODS=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],Request=function(e){function Request(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,Request);var r=_possibleConstructorReturn(this,(Request.__proto__||Object.getPrototypeOf(Request)).call(this)),n=t.body;if(e instanceof Request){if(e.bodyUsed)throw new TypeError("Already read");n||null==e._bodyInit||(n=e._bodyInit,e.$bodyUsed=!0)}else e={url:e};if(Object.defineProperties(r,{url:{value:""+e.url},method:{value:normalizeMethod(t.method||e.method||"GET")},headers:{value:new Headers(t.headers||e.headers||{})},credentials:{value:t.credentials||e.credentials||"omit"},mode:{value:t.mode||e.mode||null},referrer:{value:""},timeout:{value:t.timeout||0}}),("GET"===r.method||"HEAD"===r.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");return n instanceof FormData&&(n=formDataToBlob(n)),n instanceof Blob&&!r.headers.has("Content-Type")&&r.headers.set("Content-Type",n.type),r._initBody(n),r}return _inherits(Request,Body),_createClass(Request,[{key:"clone",value:function clone(){return new Request(this,{body:this._bodyInit})}}]),Request}();function normalizeMethod(e){var t=e.toUpperCase();return METHODS.includes(t)?t:e}var REDIRECT_STATUSES=[301,302,303,307,308],Response=function(e){function Response(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,Response);var r=_possibleConstructorReturn(this,(Response.__proto__||Object.getPrototypeOf(Response)).call(this));return Object.defineProperties(r,{url:{value:t.url||""},type:{value:t._type||"default"},status:{value:"status"in t?t.status:200},statusText:{value:"statusText"in t?t.statusText:"OK"},headers:{value:new Headers(t.headers)}}),r._initBody(e),r}return _inherits(Response,Body),_createClass(Response,[{key:"clone",value:function clone(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})}},{key:"ok",get:function(){return this.status>=200&&this.status<300}},{key:"_encoding",get:function(){var e=(this.headers.get("content-type")||"").split(";").slice(1);for(var t of e){var r=/charset=(\S+)/i.exec(t.trim());if(r)return r[1].toLowerCase()}return null}}],[{key:"error",value:function error(){return new Response(null,{status:0,statusText:"",_type:"error"})}},{key:"redirect",value:function redirect(e,t){if(!REDIRECT_STATUSES.includes(t))throw new RangeError("Invalid status code");return new Response(null,{status:t,headers:{location:e}})}}]),Response}();function fetch(e,t){return new Promise(function(r,n){var i=new Request(e,t),o=new HttpRequest,a={};o.on("stateChanged",function(e){switch(e.state){case"headers":a.status=e.code,a.statusText=e.message,a.headers=new Headers(e.headers);break;case"finished":a.url=a.headers.get("X-Request-URL")||i.url,r(new Response(e.response,a)),o.dispose();break;case"error":n(new TypeError("Network request failed")),o.dispose();break;case"timeout":n(new TypeError("Network request timed out")),o.dispose();break;case"abort":n(new TypeError("Network request aborted")),o.dispose()}}),o.send({url:i.url,method:i.method,responseType:"arraybuffer",data:void 0===i._bodyInit?null:i._bodyBuffer||i._bodyInit,headers:encodeHeaders(i.headers),timeout:i.timeout})})}function encodeHeaders(e){var t={};return e.forEach(function(e,r){return t[r]=e}),t}if(global.tabris&&global.tabris.version)throw new Error("tabris module already loaded. Ensure the module is installed only once.");var tabrisMain=Object.assign(new Tabris,{Action:Action,ActionSheet:ActionSheet,ActionSheetItem:ActionSheetItem,ActivityIndicator:ActivityIndicator,AlertDialog:AlertDialog,App:App,Button:Button,Blob:Blob,Canvas:Canvas,ChangeListeners:ChangeListeners,CheckBox:CheckBox,CollectionView:CollectionView,Color:Color,ConstraintLayout:ConstraintLayout,Camera:Camera,CameraView:CameraView,Composite:Composite,Constraint:Constraint,Console:Console,ContentView:ContentView,Crypto:Crypto,DateDialog:DateDialog,Device:Device,Drawer:Drawer,Event:Event,EventObject:EventObject,FileSystem:FileSystem,File:File,FormData:FormData,Font:Font,Image:Image,ImageData:ImageData,ImageBitmap:ImageBitmap,ImageView:ImageView,InactivityTimer:InactivityTimer,JsxProcessor:JsxProcessor,JSX:JSX,Layout:Layout,LayoutData:LayoutData,Listeners:Listeners,LinearGradient:LinearGradient,NativeObject:NativeObject,NavigationView:NavigationView,NavigationBar:NavigationBar,Popover:Popover,Page:Page,Percent:Percent,Permission:Permission,Picker:Picker,Printer:Printer,ProgressBar:ProgressBar,ProgressEvent:ProgressEvent,RadioButton:RadioButton,RefreshComposite:RefreshComposite,RowLayout:RowLayout,Row:Row,ScrollView:ScrollView,SearchAction:SearchAction,SizeMeasurement:SizeMeasurement,Slider:Slider,Storage:Storage,StackLayout:StackLayout,Stack:Stack,StatusBar:StatusBar,Switch:Switch,Tab:Tab,TabFolder:TabFolder,TextInput:TextInput,TextView:TextView,TimeDialog:TimeDialog,ToggleButton:ToggleButton,Video:Video,WebSocket:WebSocket,WebView:WebView,Widget:Widget,WidgetCollection:WidgetCollection,$:$,XMLHttpRequest:XMLHttpRequest,Worker:Worker,fetch:fetch,format:format,Headers:Headers,Request:Request,Response:Response});module.exports=tabrisMain,global.tabris=tabrisMain,global.tabris.tabris=tabrisMain,Object.assign(global,{Blob:Blob,File:File,FormData:FormData,Crypto:Crypto,ImageData:ImageData,ImageBitmap:ImageBitmap,ProgressEvent:ProgressEvent,Storage:Storage,WebSocket:WebSocket,XMLHttpRequest:XMLHttpRequest,fetch:fetch,Headers:Headers,Request:Request,Response:Response,Worker:Worker,$:$,createImageBitmap:ImageBitmap.createImageBitmap}),tabrisMain.on("start",function(e){patchError(Error),tabris.$app=create$3(),checkVersion(tabris.version,tabris.app._nativeGet("tabrisJsVersion")),e&&e.headless||(tabris.$contentView=create$6(),tabris._nativeSet("contentView",tabris.contentView.cid),tabris.$drawer=create$7(),tabris.$navigationBar=create$8(),tabris.$statusBar=create$10(),tabris.$printer=create$1(),tabris.$permission=create$2(),tabris.JSX.install(createJsxProcessor())),tabris.$sizeMeasurement=create$9(),tabris.$device=create(),tabris.$fs=create$4(),publishDeviceProperties(tabris.device,global),tabris.$localStorage=create$5(),"iOS"===tabris.device.platform?tabris.$secureStorage=create$5(!0):tabris.$secureStorage={},tabris.$crypto=new Crypto,global.console.print&&(global.console=createConsole(global.console)),tabris.$pkcs5=new Pkcs5,global.localStorage=tabrisMain.localStorage,global.secureStorage=tabrisMain.secureStorage,global.crypto=tabrisMain.crypto,global.JSX=tabrisMain.JSX}),addDOMDocument(global),addDOMEventTargetMethods(global),addWindowTimerMethods(global);